(this["webpackJsonpfsh-online"]=this["webpackJsonpfsh-online"]||[]).push([[0],{1226:function(e,t){},1228:function(e,t){},125:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return z})),n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return _}));var a=n(63),r=n(19),o=n.n(r),i=n(21),c=n(38),s=n(0),l=n.n(s),u=n(116),p=n(162),d=n.n(p),m=n(603),f=n.n(m),g=n(13),h=n(8),b=n(395),v=n(394),x=n(1446),O=n(277),y=n(265),S=n(615),E=n(607),j=n(610),C=n(611),w=n(614),R=Object(b.a)((function(e){return{container:{height:"100%",flexGrow:1},fullHeightGrid:{height:"100%"},editorPane:{flexGrow:"0"},resize:{height:"100%",width:"4px",cursor:"col-resize","&:hover":{background:k.lightBlue}},resizeBlue:{background:"#487AA2"},resizeCursor:{cursor:"col-resize"},collapsedMain:{width:"100%",height:"calc(100vh - 116px - 300px)"},expandedMain:{width:"100%",height:"calc(100vh - 116px - 34px)"},collapsedConsole:{height:"25px",width:"100%"},expandedConsole:{height:"300px",width:"100%"},top:{height:"116px"}}})),k={lighterBlue:"#D8E2EA",lightBlue:"#487AA2",blue:"#30638e",darkerBlue:"#143E61",editorGrey:"#263238",lightestGrey:"#E7ECEE",lightGrey:"#D0D9DD",grey:"#575B5C",darkerGrey:"#3D4345",darkestGrey:"#121D21",red:"#FD6668"},z=Object(v.a)({palette:{success:{main:k.blue,dark:k.darkerBlue,light:k.lightBlue},common:k},typography:{fontFamily:"Open Sans"},overrides:{MuiTooltip:{tooltip:{backgroundColor:k.darkestGrey,fontSize:"13px"},arrow:{color:k.darkestGrey}},MuiButton:{text:{textTransform:"none",fontWeight:600}},MuiIconButton:{root:{"&:hover":{backgroundColor:k.grey}}}}}),N="https://raw.githubusercontent.com/FSHSchool/FSHOnline-Examples/main/",I=(console.log,"There are no messages to display in the console."),T="There are no problems to display in the console.",F=[I],H=[T],D=0,L="#FDD835",U={};function P(e){e.forEach((function(e){"category"===e.type&&P(e.children),e.id=e.path.replaceAll("%20","-"),"file"===e.type&&(U[e.id]={path:"".concat(N,"/Examples/").concat(e.path),description:e.description,name:e.name}),delete e.type,delete e.path}))}function B(){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/index.json")).then((function(e){return e.json()}));case 2:return P((t=e.sent).children),e.abrupt("return",Object(a.a)(t.children));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(o.a.mark((function t(n){var a,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n.text){t.next=4;break}return t.abrupt("return","");case 4:return t.next=6,Object(y.a)(n);case 6:if(a=t.sent,r=a.long_url.slice(40),a.long_url.includes("https://fshschool.org/FSHOnline/#/share/")&&0!==r.length){t.next=12;break}return t.abrupt("return","");case 12:return i=Object(u.inflateSync)(e.from(r,"base64")).toString("utf-8"),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return(W=Object(c.a)(o.a.mark((function e(t){var n,a,r,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/gists/".concat(t)).then((function(e){return e.json()}));case 2:n=e.sent,a="",r=0,i=Object.values((null===n||void 0===n?void 0:n.files)||{});case 5:if(!(r<i.length)){e.next=19;break}if(!(c=i[r]).truncated){e.next=14;break}return e.t0=a,e.next=11,fetch(c.raw_url).then((function(e){return e.text()}));case 11:a=e.t0+=e.sent,e.next=15;break;case 14:a+=c.content;case 15:a+="\n\n";case 16:r++,e.next=5;break;case 19:return e.abrupt("return",a.trim());case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log=function(e){e&&(e.startsWith("error")||e.startsWith("warn"))&&(H[0]===T&&(H=[]),D++,H.push(e),e.startsWith("error")&&(L="#FD6668")),F[0]===I&&(F=[]),F.push(e)};var J=Object(s.createContext)(!1);function _(e){var t=R(),n=e.match,a=Object(s.useState)(!1),r=Object(i.a)(a,2),u=r[0],p=r[1],m=Object(s.useState)(""),b=Object(i.a)(m,2),v=b[0],y=b[1],k=Object(s.useState)([""]),N=Object(i.a)(k,2),P=N[0],A=N[1],M=Object(s.useState)(""),W=Object(i.a)(M,2),_=W[0],Z=W[1],$=Object(s.useState)(!1),Y=Object(i.a)($,2),K=Y[0],X=Y[1],Q=Object(s.useState)(!1),q=Object(i.a)(Q,2),ee=q[0],te=q[1],ne=Object(s.useState)(!1),ae=Object(i.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(s.useState)([]),ce=Object(i.a)(ie,2),se=ce[0],le=ce[1],ue=Object(s.useState)({}),pe=Object(i.a)(ue,2),de=pe[0],me=pe[1],fe=Object(s.useState)(41.666667),ge=Object(i.a)(fe,2),he=ge[0],be=ge[1],ve=Object(s.useState)(!1),xe=Object(i.a)(ve,2),Oe=xe[0],ye=xe[1],Se=Object(s.useState)({canonical:"",version:"",fhirVersion:[],dependencies:""}),Ee=Object(i.a)(Se,2),je=Ee[0],Ce=Ee[1],we=Object(s.useState)({}),Re=Object(i.a)(we,2),ke=Re[0],ze=Re[1];function Ne(e){e.preventDefault(),ye(!1)}function Ie(e){if(Oe){var t=e/window.innerWidth*100;t>10&&t<76&&be(t)}}function Te(e,t){if(t.get(e)){for(var n=t.get(e),a="".concat(e,"-").concat(n);t.get(a);)n+=1,a="".concat(e,"-").concat(n);t.set(e,n+1),e=a,t.set(a,1)}else t.set(e,1);return e}return Object(s.useEffect)((function(){function e(){return(e=Object(c.a)(o.a.mark((function e(){var t,a,r,i,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\/share/.test(n.path)){e.next=12;break}return e.next=3,G(n.params);case 3:t=e.sent,a=t.indexOf("\n"),r=t.slice(0,a),c=t;try{null!=(s=JSON.parse(r)).c&&null!=s.v&&null!=s.d&&(i={canonical:s.c,version:s.v,fhirVersion:s.f||[],dependencies:s.d},c=t.slice(a+1))}catch(o){}ze(i||{}),Z(c),e.next=17;break;case 12:if(!/\/gist/.test(n.path)){e.next=17;break}return e.next=15,V(n.params.id);case 15:l=e.sent,Z(l);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=le,e.next=3,B();case 3:e.t1=e.sent,(0,e.t0)(e.t1),me(U);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[n]),l.a.createElement(x.a,{theme:z},l.a.createElement("div",{className:"root",style:{height:"100vh"}},l.a.createElement("div",{className:t.top},l.a.createElement(S.a,null),l.a.createElement(w.a,{onSUSHIClick:function(e,t,n){p(e),A(t),X(n)},onGoFSHClick:function(e,t){te(t),Z(""===e?null:e)},onConfigChange:function(e){Ce(e)},config:ke,fshText:v,gofshText:P,resetLogMessages:function(){F=[I],H=[T],D=0,L="#FDD835"},exampleConfig:se,exampleMetadata:de,isWaiting:ee||K,saveAll:function(){var e=new Map,t=new f.a;t.file("FSH.fsh",v);var n=Object(g.partition)(P,(function(e){return e.id&&"Untitled"!==e.id})),a=Object(i.a)(n,2),r=a[0],o=a[1];r.forEach((function(n){var a,r,o;try{o=JSON.parse(n.def)}catch(s){}var i=Te((null===(a=o)||void 0===a?void 0:a.resourceType)?"".concat(o.resourceType,"-").concat(n.id):n.id,e),c=null!==(r=n.def)&&void 0!==r?r:null;t.file("".concat(i,".json"),c)})),o.forEach((function(n){var a,r,o;try{o=JSON.parse(n.def)}catch(l){}var i=null!==(a=n.id)&&void 0!==a?a:"Untitled",c=Te(o.resourceType?"".concat(o.resourceType,"-").concat(i):i,e),s=null!==(r=n.def)&&void 0!==r?r:null;t.file("".concat(c,".json"),s)})),t.generateAsync({type:"blob"}).then((function(e){d.a.saveAs(e,"fshonline.zip")}))}})),l.a.createElement("div",{className:re?t.collapsedMain:t.expandedMain},l.a.createElement(J.Provider,{value:re},l.a.createElement(O.a,{className:Object(h.a)(t.container,Oe&&t.resizeCursor),container:!0,onTouchMove:function(e){var t=e.touches[0].clientX;Oe&&Object(g.debounce)((function(){return Ie(t)}),10)()},onMouseMove:function(e){var t=e.clientX;Oe&&Object(g.debounce)((function(){return Ie(t)}),10)()},onMouseUp:Ne,onMouseLeave:Ne},l.a.createElement(O.a,{item:!0,className:Object(h.a)(t.fullHeightGrid,t.editorPane),style:{maxWidth:"calc(".concat(he,"% - 2px)"),flexBasis:"calc(".concat(he,"% - 2px)")}},l.a.createElement(j.a,{text:v,initialText:_,updateTextValue:function(e){""!==_&&null!==_||Z(e),y(e)},isWaiting:ee,setInitialText:Z,config:je})),l.a.createElement(O.a,{item:!0,className:Object(h.a)(t.resize,Oe&&t.resizeBlue),onTouchStart:function(){ye(!0)},onTouchEnd:function(){ye(!1)},onMouseDown:function(e){e.preventDefault(),ye(!0)},onDoubleClick:function(){be(41.666667)}}),l.a.createElement(O.a,{item:!0,className:Object(h.a)(t.fullHeightGrid,t.editorPane),style:{maxWidth:"calc(".concat(100-he,"% - 2px)"),flexBasis:"calc(".concat(100-he,"% - 2px)")}},l.a.createElement(E.a,{text:P,showNewText:u,setShowNewText:p,isWaiting:K,updateTextValue:function(e){A(e)}}))))),l.a.createElement("div",{className:re?t.expandedConsole:t.collapsedConsole},l.a.createElement(C.a,{consoleMessages:F,problemMessages:H,problemCount:D,problemColor:L,expandConsole:re,setExpandConsole:oe}))))}}).call(this,n(23).Buffer)},1365:function(e,t,n){var a={".":190,"./":190,"./OptimizerPlugin":366,"./OptimizerPlugin.d.ts":1366,"./OptimizerPlugin.js":366,"./index":190,"./index.d.ts":1367,"./index.js":190,"./loadOptimizers":365,"./loadOptimizers.d.ts":1368,"./loadOptimizers.js":365,"./plugins":255,"./plugins/":255,"./plugins/AddPathRulesOptimizer":367,"./plugins/AddPathRulesOptimizer.d.ts":1369,"./plugins/AddPathRulesOptimizer.js":367,"./plugins/AddReferenceKeywordOptimizer":193,"./plugins/AddReferenceKeywordOptimizer.d.ts":1370,"./plugins/AddReferenceKeywordOptimizer.js":193,"./plugins/CombineCardAndFlagRulesOptimizer":368,"./plugins/CombineCardAndFlagRulesOptimizer.d.ts":1371,"./plugins/CombineCardAndFlagRulesOptimizer.js":368,"./plugins/CombineCodingAndQuantityValuesOptimizer":260,"./plugins/CombineCodingAndQuantityValuesOptimizer.d.ts":1372,"./plugins/CombineCodingAndQuantityValuesOptimizer.js":260,"./plugins/CombineContainsRulesOptimizer":369,"./plugins/CombineContainsRulesOptimizer.d.ts":1373,"./plugins/CombineContainsRulesOptimizer.js":369,"./plugins/ConstructInlineInstanceOptimizer":256,"./plugins/ConstructInlineInstanceOptimizer.d.ts":1374,"./plugins/ConstructInlineInstanceOptimizer.js":256,"./plugins/ConstructNamedExtensionContainsRulesOptimizer":261,"./plugins/ConstructNamedExtensionContainsRulesOptimizer.d.ts":1375,"./plugins/ConstructNamedExtensionContainsRulesOptimizer.js":261,"./plugins/RemoveChoiceSlicingRulesOptimizer":370,"./plugins/RemoveChoiceSlicingRulesOptimizer.d.ts":1376,"./plugins/RemoveChoiceSlicingRulesOptimizer.js":370,"./plugins/RemoveDefaultExtensionContextRulesOptimizer":371,"./plugins/RemoveDefaultExtensionContextRulesOptimizer.d.ts":1377,"./plugins/RemoveDefaultExtensionContextRulesOptimizer.js":371,"./plugins/RemoveDefaultLogicalCaretRulesOptimizer":372,"./plugins/RemoveDefaultLogicalCaretRulesOptimizer.d.ts":1378,"./plugins/RemoveDefaultLogicalCaretRulesOptimizer.js":372,"./plugins/RemoveDefaultResourceCaretRulesOptimizer":373,"./plugins/RemoveDefaultResourceCaretRulesOptimizer.d.ts":1379,"./plugins/RemoveDefaultResourceCaretRulesOptimizer.js":373,"./plugins/RemoveExtensionSlicingRulesOptimizer":374,"./plugins/RemoveExtensionSlicingRulesOptimizer.d.ts":1380,"./plugins/RemoveExtensionSlicingRulesOptimizer.js":374,"./plugins/RemoveExtensionURLAssignmentRules":375,"./plugins/RemoveExtensionURLAssignmentRules.d.ts":1381,"./plugins/RemoveExtensionURLAssignmentRules.js":375,"./plugins/RemoveGeneratedTextRulesOptimizer":191,"./plugins/RemoveGeneratedTextRulesOptimizer.d.ts":1382,"./plugins/RemoveGeneratedTextRulesOptimizer.js":191,"./plugins/RemoveImpliedZeroZeroCardRulesOptimizer":259,"./plugins/RemoveImpliedZeroZeroCardRulesOptimizer.d.ts":1383,"./plugins/RemoveImpliedZeroZeroCardRulesOptimizer.js":259,"./plugins/RemovePublisherDerivedDateRulesOptimizer":376,"./plugins/RemovePublisherDerivedDateRulesOptimizer.d.ts":1384,"./plugins/RemovePublisherDerivedDateRulesOptimizer.js":376,"./plugins/ResolveBindingRuleURLsOptimizer":377,"./plugins/ResolveBindingRuleURLsOptimizer.d.ts":1385,"./plugins/ResolveBindingRuleURLsOptimizer.js":377,"./plugins/ResolveInstanceOfURLsOptimizer":192,"./plugins/ResolveInstanceOfURLsOptimizer.d.ts":1386,"./plugins/ResolveInstanceOfURLsOptimizer.js":192,"./plugins/ResolveOnlyRuleURLsOptimizer":262,"./plugins/ResolveOnlyRuleURLsOptimizer.d.ts":1387,"./plugins/ResolveOnlyRuleURLsOptimizer.js":262,"./plugins/ResolveParentURLsOptimizer":378,"./plugins/ResolveParentURLsOptimizer.d.ts":1388,"./plugins/ResolveParentURLsOptimizer.js":378,"./plugins/ResolveReferenceAssignmentsOptimizer":379,"./plugins/ResolveReferenceAssignmentsOptimizer.d.ts":1389,"./plugins/ResolveReferenceAssignmentsOptimizer.js":379,"./plugins/ResolveValueRuleURLsOptimizer":380,"./plugins/ResolveValueRuleURLsOptimizer.d.ts":1390,"./plugins/ResolveValueRuleURLsOptimizer.js":380,"./plugins/ResolveValueSetComponentRuleURLsOptimizer":381,"./plugins/ResolveValueSetComponentRuleURLsOptimizer.d.ts":1391,"./plugins/ResolveValueSetComponentRuleURLsOptimizer.js":381,"./plugins/SimplifyArrayIndexingOptimizer":195,"./plugins/SimplifyArrayIndexingOptimizer.d.ts":1392,"./plugins/SimplifyArrayIndexingOptimizer.js":195,"./plugins/SimplifyInstanceNameOptimizer":194,"./plugins/SimplifyInstanceNameOptimizer.d.ts":1393,"./plugins/SimplifyInstanceNameOptimizer.js":194,"./plugins/SimplifyMappingNamesOptimizer":382,"./plugins/SimplifyMappingNamesOptimizer.d.ts":1394,"./plugins/SimplifyMappingNamesOptimizer.js":382,"./plugins/SimplifyObeysRuleDotPathsOptimizer":258,"./plugins/SimplifyObeysRuleDotPathsOptimizer.d.ts":1395,"./plugins/SimplifyObeysRuleDotPathsOptimizer.js":258,"./plugins/SimplifyRulePathContextsOptimizer":257,"./plugins/SimplifyRulePathContextsOptimizer.d.ts":1396,"./plugins/SimplifyRulePathContextsOptimizer.js":257,"./plugins/index":255,"./plugins/index.d.ts":1397,"./plugins/index.js":255,"./utils":114,"./utils.d.ts":1398,"./utils.js":114};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1365},1430:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),i=n.n(o),c=(n(637),n(45)),s=n(125);function l(e){return r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/share/:text",component:s.b}),r.a.createElement(c.a,{path:"/gist/:id",component:s.b}),r.a.createElement(c.a,{path:"",exact:!0,component:s.b}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(388);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{basename:"/"},r.a.createElement(l,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var a=n(200),r=n(21),o=n(0),i=n.n(o),c=n(8),s=n(13),l=n(1449),u=n(1434),p=n(1500),d=n(201),m=n(621),f=n(1482),g=n(1485),h=n(1486),b=n(1487),v=n(1488),x=n(608),O=n(395),y=n(80),S=n.n(y),E=n(125),j=n(19),C=n.n(j),w=n(38),R=n(116),k=n(389),z=n(1481),N=n(1435),I=n(1437),T=n(1438),F=n(1439),H=n(1440),D=n(1483),L=n(1497),U=n(265),P=Object(O.a)((function(e){return{iconButton:{color:e.palette.common.white,padding:"3px"},textArea:{width:"100%",color:e.palette.text.primary,fontWeight:"bold"},copyBox:{backgroundColor:e.palette.common.lightGrey,borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:"3%",textOverflow:"ellipsis"}}}));function B(e){var t=P(),n=Object(o.useState)(!1),a=Object(r.a)(n,2),c=a[0],s=a[1],p=Object(o.useState)(!1),g=Object(r.a)(p,2),h=g[0],b=g[1],v=Object(o.useState)(!1),x=Object(r.a)(v,2),O=x[0],y=x[1],S=Object(o.useState)(!1),j=Object(r.a)(S,2),B=j[0],A=j[1],G=Object(o.useState)("Copy to Clipboard"),M=Object(r.a)(G,2),V=M[0],W=M[1],J=Object(o.useState)({fshCopied:!1,fshCopyButton:"Copy FSH to Clipboard"}),_=Object(r.a)(J,2),Z=_[0],$=Z.fshCopied,Y=Z.fshCopyButton,K=_[1],X=Object(o.useState)(),Q=Object(r.a)(X,2),q=Q[0],ee=Q[1],te=Object(o.useState)(),ne=Object(r.a)(te,2),ae=ne[0],re=ne[1],oe=Object(o.useState)(!0),ie=Object(r.a)(oe,2),ce=ie[0],se=ie[1],le=function(){s(!1),y(!0),re(""),K({fshCopied:!1,fshCopyButton:"Copy FSH to Clipboard"})},ue=function(){y(!1),b(!1)},pe=function(){A(!1)},de=function(){var t=Object(w.a)(C.a.mark((function t(){var n,a,r,o,i,c,l,u,p,d,m,f,g;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(null===(n=e.config)||void 0===n?void 0:n.canonical)||(null===(a=e.config)||void 0===a?void 0:a.version)||(null===(r=e.config)||void 0===r?void 0:r.fhirVersion.length)>0||(null===(o=e.config)||void 0===o?void 0:o.dependencies)?Object(R.deflateSync)(JSON.stringify({c:null===(c=e.config)||void 0===c?void 0:c.canonical,v:null===(l=e.config)||void 0===l?void 0:l.version,f:null===(u=e.config)||void 0===u?void 0:u.fhirVersion,d:null===(p=e.config)||void 0===p?void 0:p.dependencies})+"\n"+e.shareText).toString("base64"):Object(R.deflateSync)(e.shareText).toString("base64"),d="https://fshschool.org/FSHOnline/#/share/".concat(i),t.next=4,Object(U.b)(d);case 4:!0===(m=t.sent).errorNeeded?(b(!0),le()):(f=m.link.slice(15),g="https://fshschool.org/FSHOnline/#/share/".concat(f),ee(g),s(!0),W("Copy to Clipboard"),se(!0));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),me=function(){s(!1),b(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{title:"Share FSH",placement:"top",arrow:!0},i.a.createElement(u.a,{name:"Share FSH",className:t.iconButton,onClick:de},i.a.createElement(z.a,{fontSize:"small",style:{transform:"rotate(-45deg)"}}))),i.a.createElement(N.a,{open:c,onClose:me,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0},i.a.createElement(I.a,{id:"form-dialog-title"},"Share"),i.a.createElement(T.a,null,i.a.createElement(F.a,null,"Use this link to share your FSH with others!"),i.a.createElement(m.a,{className:t.copyBox},i.a.createElement(m.a,{maxWidth:"90%",textOverflow:"ellipsis",overflow:"hidden"},q),i.a.createElement(l.a,{title:V,placement:"top",arrow:!0},i.a.createElement(k.CopyToClipboard,{text:q,onCopy:function(){return W("Link Copied")}},i.a.createElement(u.a,{style:{borderRadius:"0%"}},i.a.createElement(f.a,null)))))),i.a.createElement(H.a,null,ce&&i.a.createElement(d.a,{onClick:le,color:"primary",style:{align:"left"}},"Create Link with Gist"),i.a.createElement(m.a,{style:{flex:"1 0 0",hidden:!0}}),i.a.createElement(d.a,{onClick:me,color:"primary"},"Done"))),i.a.createElement(N.a,{open:O,onClose:ue,"aria-labelledby":"alert-dialog-title",maxWidth:"md",fullWidth:!0},i.a.createElement(I.a,{id:"alert-dialog-title"},"Share with Gist"),h&&i.a.createElement(T.a,{style:{color:E.c.palette.common.red}},"Your FSH content is too long to share directly. Please use a Gist to share."),i.a.createElement(T.a,null,"Create a"," ",i.a.createElement(D.a,{id:"gistURL",href:"https://gist.github.com/",target:"_blank"},"Gist")," ","and paste the URL below to generate a shareable FSH Online link.",i.a.createElement(L.a,{id:"gistURLText",label:"Gist URL",fullWidth:!0,onChange:function(e){var t,n=null===(t=e.target.value.match(/gist\.github\.com\/[^/]+\/(.+)/))||void 0===t?void 0:t[1];n&&re("https://fshschool.org/FSHOnline/#/gist/".concat(n))}})),i.a.createElement(H.a,{style:{bottom:0,right:0}},i.a.createElement(d.a,{onClick:ue,color:"primary"},"Cancel"),i.a.createElement(m.a,{style:{flex:"1 0 0",hidden:!0}}),i.a.createElement(k.CopyToClipboard,{text:e.shareText,onCopy:function(){K({fshCopied:!0,fshCopyButton:"FSH Copied to Clipboard"})},style:{align:"left"}},i.a.createElement(d.a,{color:$?"secondary":"primary"},Y)),i.a.createElement(d.a,{color:"primary",onClick:function(){ae?(ue(),ee(ae),s(!0),W("Copy to Clipboard"),se(!1)):A(!0)},style:{align:"left"}},"Generate Link from Gist"))),i.a.createElement(N.a,{open:B,onClose:pe,"aria-labelledby":"alert-dialog-title",maxWidth:"lg"},i.a.createElement(I.a,{id:"alert-dialog-title"},"Error Creating Gist Link"),i.a.createElement(T.a,null,i.a.createElement(F.a,null,"Could not generate a link from your Gist URL. Ensure the URL is valid.")),i.a.createElement(H.a,null,i.a.createElement(d.a,{onClick:pe,color:"primary",autoFocus:!0},"Keep Swimming!"))))}n(694),n(695),n(696),n(697),n(698);n(699),n(700),n(701),n(702),n(703),n(705),n(706),n(707),n(708),S.a.defineSimpleMode("fsh",{meta:{lineComment:"//"},start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"atom"},{regex:/\b(Alias|CodeSystem|Expression|Extension|Description|Id|Instance|InstanceOf|Invariant|Logical|Mapping|Mixins|Parent|Profile|Resource|RuleSet|Severity|Source|Target|Title|Usage|ValueSet|XPath)(?=\s*:)\b/,token:"keyword"},{regex:/(\s|^)(and|codes|contains|descendent-of|exclude|exists|from system|from|generalizes|include|in|insert|is-a|is-not-a|named|not-in|obeys|only|or|regex|units|valueset|where|D|MS|N|SU|TU|\\?!)(\s|$)/,token:"def"},{regex:/(\(\s*)(exactly|example|extensible|preferred|required)(\s*\))/,token:"def"},{regex:/\b(Reference|Canonical)\s*\(/,push:"closingParen",token:"atom"},{regex:/\*|->|=|\+|:/,token:"def"},{regex:/\b(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*))\b/,token:"atom"},{regex:/(\s|^)(true|false)(\s|$)/,token:"string"},{regex:/(\s|^)(-?\d+(\.\d+)?)(\s|^)/,token:"string"},{regex:/#"(?:\\.|[^\\"])*"/,token:"string"},{regex:/#[^\s]*/,token:"string"},{regex:/'.*'/,token:"string"},{regex:/\s\/\/.*/,token:"comment"},{regex:/\/\/.*/,token:"comment",sol:!0},{regex:/\/\*/,token:"comment",next:"comment"}],closingParen:[{regex:/\)/,pop:!0,token:"atom"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}]});var A=200,G=Object(O.a)((function(e){return{box:{height:"100%"},header:{fontFamily:"Open Sans",color:e.palette.common.white,background:e.palette.common.darkerGrey,padding:"0px",paddingLeft:"29px",height:"34px",display:"flex",justifyContent:"space-between",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},headerShift:{width:"calc(100% - ".concat(A,"px - 29px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:A},headerLabel:{lineHeight:"34px",float:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},headerActionGroup:{paddingRight:"10px"},headerActions:{alignItems:"center",display:"flex"},iconButton:{color:e.palette.common.white,padding:"3px"},drawer:{width:A,flexShrink:0},drawerPaper:{width:A,border:"none",height:"calc(100vh - 116px - 34px)",top:"116px"},drawerPaperExpandedConsole:{height:"calc(100vh - 116px - 300px)"},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.palette.common.white,background:e.palette.common.darkerGrey,height:"34px",minHeight:"34px"},drawerHeaderIcon:{padding:"0px",color:e.palette.common.white,background:e.palette.success.main,"&:hover":{background:e.palette.success.light},borderRadius:0,height:"100%",width:"34px",minWidth:"34px"},content:{flexGrow:1,width:"100%",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentShift:{width:"calc(100% - ".concat(A,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}}));function M(e){var t=G(),n=Object(o.useContext)(E.a),O=Object(o.useState)(!0),y=Object(r.a)(O,2),S=y[0],j=y[1],C=function(){j(!0)},w=function(){j(!1)};var R=function(e,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i.a.createElement(l.a,{title:Object(s.upperFirst)(n),placement:"top",arrow:!0},i.a.createElement(u.a,{name:n,className:t.iconButton,"aria-label":n,onClick:a},i.a.createElement(e,{fontSize:"small",style:r})))};return i.a.createElement(m.a,{className:t.box},i.a.createElement("div",{className:Object(c.a)(t.header,Object(a.a)({},t.headerShift,e.renderDrawer&&S))},i.a.createElement("div",{title:e.name,className:t.headerLabel},e.name),i.a.createElement("div",{className:t.headerActions},i.a.createElement("div",{className:t.headerActionGroup},"fsh"===e.mode&&!e.isExamples&&i.a.createElement(B,{shareText:e.value,config:e.config}),e.copy&&R(f.a,"copy",(function(){})),e.save&&R(g.a,"save",e.save),e.delete&&R(h.a,"delete",e.delete)),e.renderDrawer&&!S&&i.a.createElement(u.a,{name:"expand",className:t.drawerHeaderIcon,"aria-label":"expand",onClick:C},i.a.createElement(b.a,null)))),i.a.createElement(x.UnControlled,{className:Object(c.a)("react-codemirror2",e.renderDrawer&&t.content,Object(a.a)({},t.contentShift,e.renderDrawer&&S)),value:e.initialText,options:{mode:e.mode,theme:"material",placeholder:e.placeholder,scrollbarStyle:"overlay",autoCloseBrackets:!0,lineNumbers:!0,foldGutter:!0,readOnly:e.isExamples,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{Tab:function(e){e.replaceSelection("  ")},"Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Ctrl-Q":function(e){e.foldCode(e.getCursor())}}},onChange:function(t,n,a){var r;r=a,e.updateTextValue(r)}}),e.renderDrawer&&i.a.createElement(p.a,{className:t.drawer,"data-testid":"editor-drawer",variant:"persistent",anchor:"right",open:S,classes:{paper:Object(c.a)(t.drawerPaper,n&&t.drawerPaperExpandedConsole)}},i.a.createElement("div",{className:t.drawerHeader},i.a.createElement(d.a,{name:"collapse","aria-label":"collapse",className:t.drawerHeaderIcon,onClick:w},i.a.createElement(v.a,null))),e.renderDrawer()))}},265:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n(19),r=n.n(a),o=n(38),i=new(0,n(662).BitlyClient)("2740ea05eb8099e664f60559416380f4f06d9dc8");function c(e){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){i.shorten(t).then((function(t){e({link:t.link,errorNeeded:!1})})).catch((function(t){e({link:void 0,errorNeeded:!0})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://bit.ly/".concat(t.text),e.abrupt("return",new Promise((function(e){i.expand(n).then((function(t){e(t)})).catch((function(e){console.error(e)}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},273:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),r=n.n(a),o=n(1435),i=n(1437),c=n(1438),s=n(1439),l=n(1440),u=n(201);function p(e){return r.a.createElement(o.a,{open:e.isOpen,onClose:e.handleCloseModal,"aria-labelledby":"delete-confirmation-dialog"},r.a.createElement(i.a,{id:"delete-confirmation-dialog-title"},"Delete ",e.title),r.a.createElement(c.a,null,r.a.createElement(s.a,null,"Are you sure you want to delete ",e.item,"? This action cannot be undone.")),r.a.createElement(l.a,null,r.a.createElement(u.a,{onClick:e.handleCloseModal,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(u.a,{onClick:e.handleDelete,color:"secondary"},"Delete")))}},607:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a=n(21),r=n(63),o=n(0),i=n.n(o),c=n(162),s=n.n(c),l=n(13),u=n(395),p=n(8),d=n(1441),m=n(620),f=n(1449),g=n(201),h=n(1442),b=n(1443),v=n(166),x=n(273),O=Object(u.a)((function(e){return{fileTreeContent:{overflowY:"scroll",height:"100%"},button:{color:e.palette.common.white,background:e.palette.success.main,"&:hover":{background:e.palette.success.dark},border:"8px solid white",fontSize:"13px",width:"100%"},list:{padding:"8px",paddingLeft:"0px",paddingBottom:"0px",fontSize:"13px"},listItemError:{paddingTop:"5px",paddingBottom:"5px",margin:0},listItem:{background:e.palette.common.lightestGrey,paddingTop:"5px",paddingBottom:"5px",marginTop:"5px",marginBottom:"5px",paddingLeft:"5px",margin:0,"&:hover":{background:e.palette.common.lightGrey},display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},listItemSelected:{background:e.palette.common.editorGrey,color:e.palette.common.white,"&:hover":{background:e.palette.common.darkestGrey}},listHeader:{padding:"5px",paddingLeft:"15px"},listIcon:{color:e.palette.success.main,verticalAlign:"middle",fontSize:"13px",paddingLeft:"3px",paddingRight:"3px"},listIconError:{color:e.palette.common.red},blankIcon:{paddingLeft:"19px"}}})),y=function(e){if("ValueSet"===e.resourceType||"CodeSystem"===e.resourceType)return e.resourceType;if("StructureDefinition"===e.resourceType)if("specialization"===e.derivation){if("resource"===e.kind)return"Resource";if("logical"===e.kind)return"Logical Model"}else if("constraint"===e.derivation){if("complex-type"===e.kind&&"Extension"===e.type)return"Extension";if(["resource","complex-type","primitive-type","logical"].includes(e.kind))return"Profile"}return null!=e.resourceType?"Instance":null};function S(e){var t=O(),n=Object(o.useState)(""),c=Object(a.a)(n,2),u=c[0],S=c[1],E=Object(o.useState)([{resourceType:null,id:"Untitled",def:null}]),j=Object(a.a)(E,2),C=j[0],w=j[1],R=e.setShowNewText,k=e.updateTextValue,z=Object(o.useState)(0),N=Object(a.a)(z,2),I=N[0],T=N[1],F=Object(o.useState)([]),H=Object(a.a)(F,2),D=H[0],L=H[1],U=Object(o.useState)(!1),P=Object(a.a)(U,2),B=P[0],A=P[1];Object(o.useEffect)((function(){if(e.showNewText&&!Object(l.isEqual)(e.text,[""])){var t;R(!1);try{t=JSON.parse(e.text)}catch(o){t={profiles:[],extensions:[],logicals:[],resources:[],instances:[],valueSets:[],codeSystems:[]}}var n=(a=t,[].concat(Object(r.a)(a.profiles),Object(r.a)(a.extensions),Object(r.a)(a.logicals),Object(r.a)(a.resources),Object(r.a)(a.instances),Object(r.a)(a.valueSets),Object(r.a)(a.codeSystems)).map((function(e){return{resourceType:y(e),id:e.id,def:JSON.stringify(e,null,2)}})));w(n),T(0),S(n.length>0?n[0].def:""),k(n)}else e.isWaiting&&(S(null),w([]));var a}),[e.text,e.showNewText,e.isWaiting,k,R]);var G=function(){var t=Object(r.a)(C);t.push({resourceType:null,id:"Untitled",def:null}),T(t.length-1),w(t),S(null),e.updateTextValue(t)},M=function(){var t=I,n=Object(r.a)(C);if(n.splice(t,1),0===n.length&&n.push({resourceType:null,id:"Untitled",def:null}),w(n),t<=I){var a=0;t<I&&(a=I-1),T(a);var o=n.length>0?n[a].def:null;S(o)}var i=Object(r.a)(D);D.includes(t)&&i.splice(D.indexOf(t),1);var c=i.map((function(e){return e<t?e:e-1}));L(c),A(!1),e.updateTextValue(n)},V=function(){A(!1)},W=C.length>0?C[I].def:null,J="".concat(C.length>0?C[I].id:"Untitled");return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{name:"FHIR JSON: ".concat(J),value:W,initialText:u,updateTextValue:function(t){if(!e.isWaiting){var n=Object(r.a)(C);try{var a,o,i=""===t?{}:JSON.parse(t);if(D.includes(I)){var c=Object(r.a)(D);c.splice(D.indexOf(I),1),L(c)}if(!C[I])n[I]={resourceType:y(i),id:null!==(a=i.id)&&void 0!==a?a:"Untitled"};if(C[I]&&i.resourceType===C[I].resourceType||(n[I].resourceType=y(i)),!C[I]||i.id!==C[I].id)n[I].id=null!==(o=i.id)&&void 0!==o?o:"Untitled"}catch(l){if(!D.includes(I)){var s=Object(r.a)(D);s.push(I),L(s)}}n[I]&&(n[I].def=t),w(n),e.updateTextValue(n),null===u&&S(t)}},mode:"application/json",placeholder:e.isWaiting?"Loading...":"Paste or edit single FHIR JSON artifact here... \nCreate additional FHIR JSON artifacts to the right.",renderDrawer:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{className:t.button,startIcon:i.a.createElement(b.a,null),onClick:G},"New JSON Editor"),i.a.createElement("div",{className:t.fileTreeContent},function(){var e=["Profiles","Extensions","Logical Models","Resources","ValueSets","CodeSystems","Instances","Unknown Type"],n=Object(l.groupBy)(C,(function(e){return e&&e.resourceType?"".concat(e.resourceType,"s"):"Unknown Type"}));return Object.keys(n).sort((function(t,n){return e.indexOf(t)-e.indexOf(n)})).map((function(e){return i.a.createElement(d.a,{component:"nav",key:e,className:t.list},i.a.createElement("div",{className:t.listHeader},e),n[e].sort((function(e,t){var n=e.id?e.id:"Untitled",a=t.id?t.id:"Untitled";return n.toLowerCase()<a.toLowerCase()?-1:n.toLowerCase()>a.toLowerCase()?1:0})).map((function(n,a){var r=C.indexOf(n),o=D.includes(r);return i.a.createElement(m.a,{button:!0,key:a,title:(null===n||void 0===n?void 0:n.id)||"Untitled","data-testid":"".concat(e,"-defId"),className:Object(p.a)(t.listItem,o&&t.listItemError,r===I&&t.listItemSelected),onClick:function(){T(r),S(n.def)}},D.includes(r)?i.a.createElement(f.a,{title:"Invalid JSON",placement:"top",arrow:!0},i.a.createElement(h.a,{className:Object(p.a)(t.listIcon,t.listIconError)})):i.a.createElement("span",{className:t.blankIcon}),(null===n||void 0===n?void 0:n.id)||"Untitled")})))}))}()))},isExamples:!1,delete:function(){A(!0)},save:function(){return function(e,t){var n,a,r;try{r=JSON.parse(e)}catch(o){}s.a.saveAs(new Blob([e]),(null===(n=r)||void 0===n?void 0:n.resourceType)&&(null===(a=r)||void 0===a?void 0:a.id)?"".concat(r.resourceType,"-").concat(r.id,".json"):"".concat(J,".json"))}(W)}}),B&&function(){var e=C[I];if(e){var t=e.resourceType||"Unknown Type",n=e.id||"Untitled";return i.a.createElement(x.a,{title:"FHIR JSON",item:"".concat(t," ").concat(n),isOpen:B,handleCloseModal:V,handleDelete:M})}}())}},610:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(21),r=n(0),o=n.n(r),i=n(162),c=n.n(i),s=n(166),l=n(273);function u(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),i=n[0],u=n[1],p=function(){u(!i)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{name:"FSH",isExamples:!1,value:e.text,initialText:e.initialText,updateTextValue:e.updateTextValue,mode:"fsh",placeholder:e.isWaiting?"Loading...":"Paste or edit FSH here...",delete:p,save:function(){c.a.saveAs(new Blob([e.text]),"FSH.fsh")},config:e.config}),i&&o.a.createElement(l.a,{title:"FHIR Shorthand",item:"all FSH",isOpen:i,handleCloseModal:p,handleDelete:function(){u(!1),e.setInitialText("")}}))}},611:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(21),r=n(0),o=n.n(r),i=n(395),c=n(621),s=n(1434),l=n(201),u=n(1444),p=n(1445),d=Object(i.a)((function(e){return{consoleControls:{background:e.palette.common.darkestGrey,height:"34px",boxSizing:"border-box",display:"flex;",alignItems:"center",justifyContent:"left"},box:{paddingLeft:"29px",color:e.palette.common.white,background:e.palette.common.darkestGrey,height:"calc(100% - 34px)",overflow:"scroll",boxSizing:"border-box"},button:{marginRight:"10px",color:e.palette.common.white,textTransform:"none",padding:0},problemsButton:{padding:0,color:e.palette.common.white,textTransform:"none"},expandIcon:{width:"29px",color:e.palette.common.white,padding:0},pre:{margin:"0px"},circle:{"border-radius":"50%","border-style":"solid","border-width":"2px","min-width":"20px",height:"20px",paddingLeft:1,paddingRight:1,background:"#263238","align-items":"center",display:"flex",marginLeft:4,"justify-content":"center",padding:0}}}));function m(e){var t=d(),n=Object(r.useState)(!1),i=Object(a.a)(n,2),m=i[0],f=i[1],g=e.problemCount,h=e.setExpandConsole;Object(r.useEffect)((function(){g&&h(!0)}),[g,h]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{className:t.consoleControls},o.a.createElement(s.a,{onClick:function(){e.setExpandConsole(!e.expandConsole)},"aria-label":e.expandConsole?"collapse console":"expand console",className:t.expandIcon},e.expandConsole?o.a.createElement(u.a,null):o.a.createElement(p.a,null)),o.a.createElement(l.a,{onClick:function(){f(!1),e.setExpandConsole(!0)},className:t.button},o.a.createElement("p",{style:{borderBottom:e.expandConsole&&!m?"1px solid white":"none",margin:"0"}},"Console")),o.a.createElement(l.a,{onClick:function(){f(!0),e.setExpandConsole(!0)},className:t.problemsButton},o.a.createElement("p",{style:{borderBottom:e.expandConsole&&m?"1px solid ".concat(e.problemCount?e.problemColor:"white"):"none",margin:"0"}},"Problems"),o.a.createElement("div",{className:t.circle,style:{borderColor:"".concat(e.problemCount?e.problemColor:"white")}},e.problemCount))),o.a.createElement(c.a,{style:{display:e.expandConsole?"block":"none"},className:t.box},m?e.problemMessages.map((function(e,n){return o.a.createElement("pre",{key:n,className:t.pre},e)})):e.consoleMessages.map((function(e,n){return o.a.createElement("pre",{key:n,className:t.pre},e)}))))}},614:function(e,t,n){"use strict";n.d(t,"a",(function(){return we}));var a=n(390),r=n(19),o=n.n(r),i=n(38),c=n(21),s=n(0),l=n.n(s),u=n(8),p=n(395),d=n(1490),m=n(1491),f=n(1485),g=n(1492),h=n(1444),b=n(1488),v=n(1496),x=n(1449),O=n(621),y=n(277),S=n(201),E=n(1489),j=n(1435),C=n(1437),w=n(1438),R=n(1439),k=n(1497),z=n(1493),N=n(1494),I=n(1499),T=n(1484),F=n(1440),H=n(13),D=n(14),L=n(128),U=n(612),P=n(613),B=n.n(P),A=n(116),G=n.n(A),M=n(196),V=n.n(M),W=D.utils.logger;function J(e,t,n){var a={resourceArr:e,emptyDependencies:[]};return new Promise((function(e){V.a.get("https://packages.fhir.org/".concat(t,"/").concat(n),(function(r){var o=B.a.extract();o.on("entry",(function(e,t,n){var r="";t.on("data",(function(e){r+=e.toString()})),t.on("end",(function(){try{var e=JSON.parse(r);e.resourceType&&a.resourceArr.push(e)}catch(t){}n()})),t.resume()})),o.on("finish",(function(){e(a)})),r.statusCode<400?(r.pipe(G.a.createGunzip()).pipe(o),W.info("Downloaded ".concat(t,"#").concat(n))):("current"===n||"dev"===n?W.error('FSHOnline does not currently support "current" or "dev" package versions'):(W.error("Your dependency ".concat(t,"#").concat(n," could not be loaded. Your output may be invalid.")),a.emptyDependencies.push("".concat(t).concat(n))),e(a))})).on("error",(function(r){W.error("An error occurred while downloading FHIR packages. Your output may be invalid: ",r),a.emptyDependencies.push("".concat(t).concat(n)),e(a)}))}))}function _(e,t,n,a){return new Promise((function(r,o){var i=e.transaction(["".concat(n).concat(a)],"readwrite");i.oncomplete=function(){r()},i.onerror=function(e){o(e)};var c=i.objectStore("".concat(n).concat(a),{keyPath:["id","resourceType"]});t.forEach((function(e){e.id&&e.resourceType&&c.put(e)}))}))}function Z(e,t,n,a){return new Promise((function(r,o){var i=!1,c=t.transaction(["".concat(n).concat(a)],"readonly").objectStore("".concat(n).concat(a),{keyPath:["id","resourceType"]}).openCursor();c.onerror=function(){o("There is an error getting data out!")},c.onsuccess=function(){var t=c.result;t?(i=!0,e.add(t.value),t.continue()):(i&&W.info("Loaded package ".concat(n,"#").concat(a)),r(e))}}))}var $=D.utils.logger,Y=D.fhirdefs.FHIRDefinitions,K=D.sushiImport.FSHTank,X=D.sushiImport.importText;function Q(e,t){$.info("Importing FSH text...");var n=X(e);return new K(n,t)}function q(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(i.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(n);case 2:if(a=e.sent,r={defs:t,emptyDependencies:[]},!a.shouldUpdate){e.next=11;break}return e.next=7,ae(t,a.version+1,n);case 7:r=e.sent,t=r.defs,e.next=15;break;case 11:return e.next=13,ae(t,a.version,n);case 13:r=e.sent,t=r.defs;case 15:return e.next=17,te(r.emptyDependencies,a.version+2);case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FSH Playground Dependencies",a=Object(H.flatten)(e);return new Promise((function(e,r){var c=null,s=indexedDB.open(n,t);s.onsuccess=function(t){(c=t.target.result).close(),e()},s.onupgradeneeded=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target.result,n=c.objectStoreNames,r=Object(U.a)(n),e.prev=3,s=o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.value,e.next=3,new Promise((function(e){t.target.transaction.objectStore("".concat(n)).getAll().onsuccess=function(t){0!==t.target.result.length||a.includes(n)||a.push(n),e()}}));case 3:case"end":return e.stop()}}),e)})),r.s();case 6:if((i=r.n()).done){e.next=10;break}return e.delegateYield(s(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),r.e(e.t1);case 15:return e.prev=15,r.f(),e.finish(15);case 18:for(l=0;l<a.length;l++)n.contains(a[l])&&c.deleteObjectStore(a[l]);case 19:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),s.onerror=function(e){r(e)}}))}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FSH Playground Dependencies",n={shouldUpdate:!1,version:1};return new Promise((function(a,r){var o=null,i=indexedDB.open(t);i.onsuccess=function(t){var r=(o=t.target.result).objectStoreNames;if(n.version=o.version,0===r.length||0===e.length||r.contains("resources"))n.shouldUpdate=!0,o.close(),a(n);else{for(var i=0;i<e.length;i++){var c=e[i][0],s=e[i][1];r.contains("".concat(c).concat(s))||(n.shouldUpdate=!0)}o.close(),a(n)}},i.onupgradeneeded=function(e){o=e.target.result},i.onerror=function(e){r(e)}}))}function ae(e,t,n){return re.apply(this,arguments)}function re(){return re=Object(i.a)(o.a.mark((function e(t,n,a){var r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:"FSH Playground Dependencies",c=s.length>4&&void 0!==s[4]&&s[4],e.abrupt("return",new Promise((function(e,s){var l=null,u=[],p={defs:Y,emptyDependencies:[]},d=indexedDB.open(r,n);d.onsuccess=function(){var n=Object(i.a)(o.a.mark((function n(r){var i,s,d,m,f;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=r.target.result,i=0;case 2:if(!(i<a.length)){n.next=21;break}if(s=[],c=!1,d=a[i][0],m=a[i][1],u.includes("".concat(d).concat(m))&&(c=!0),!c){n.next=15;break}return n.next=11,J(s,d,m);case 11:return 0!==(f=n.sent).emptyDependencies.length&&p.emptyDependencies.push(f.emptyDependencies),n.next=15,_(l,f.resourceArr,d,m);case 15:return n.next=17,Z(t,l,d,m);case 17:p.defs=n.sent;case 18:i++,n.next=2;break;case 21:l.close(),e(p);case 23:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),d.onupgradeneeded=function(e){var t=(l=e.target.result).objectStoreNames;t.contains("resources")&&l.deleteObjectStore("resources");for(var n=0;n<a.length;n++){var r=a[n][0],o=a[n][1];t.contains("".concat(r).concat(o))||(l.createObjectStore("".concat(r).concat(o),{keyPath:["id","resourceType"]}),u.push("".concat(r).concat(o)))}},d.onerror=function(e){s(e)}})));case 3:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function oe(e){for(var t=[],n=e.split(","),a=0;a<n.length;a++)if(n[a]=n[a].trim(),""!==n[a]){var r=n[a].split("#");t.push([r[0],r[1]])}return t}var ie=D.sushiImport.FSHTank,ce=D.sushiImport.RawFSH,se=D.sushiExport.exportFHIR,le=D.utils.logger,ue=D.utils.stats,pe=D.utils.getRandomPun,de=D.utils.Type,me=D.fhirdefs.FHIRDefinitions;function fe(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(i.a)(o.a.mark((function e(t,n){var a,r,i,c,s,l,u,p,d,m,f,g,h,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue.reset(),i=[],t.forEach((function(e,t){var n="Input_".concat(t);try{e=JSON.parse(e)}catch(a){return void le.error("Could not parse ".concat(n," to JSON"))}L.utils.isProcessableContent(e,n)&&i.push(new L.processor.WildFHIR({content:e},n))})),c=new L.processor.LakeOfFHIR(i),s=new me,l=new L.utils.MasterFisher(c,s),u=new L.processor.FHIRProcessor(c,l),p=n.dependencies.map((function(e){return e.replace("#","@")})),d=u.processConfig(null!==p&&void 0!==p?p:[]),m=(null===d||void 0===d?void 0:d.config.dependencies)?null===d||void 0===d?void 0:d.config.dependencies.map((function(e){return"".concat(e.packageId,"#").concat(e.version)})):[],f=null!==(a=null===d||void 0===d?void 0:d.config.fhirVersion)&&void 0!==a?a:"4.0.1",g="".concat(Oe(f),"#").concat(f),m.some((function(e){return e===g}))||m.push(g),m=oe(m.join(",")),e.next=16,q(s,m);case 16:return s=e.sent,e.next=19,L.utils.getResources(u,d,{indent:n.indent});case 19:return h=e.sent,b=new L.gofshExport.FSHExporter(h).apiExport("string"),le.info("Done converting definitions"),xe(h),e.abrupt("return",{fsh:b,config:null!==(r=null===d||void 0===d?void 0:d.config)&&void 0!==r?r:{}});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return be.apply(this,arguments)}function be(){return be=Object(i.a)(o.a.mark((function e(t,n){var a,r,i,c,s,l,u,p,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:[],ue.reset(),r=new me,i=[Oe(n.fhirVersion[0]),n.fhirVersion[0]],Object(H.findIndex)(a,(function(e){return e[0]===i[0]&&e[1]===i[1]}))<0&&a.push(i),e.next=8,q(r,a);case 8:r=e.sent,c=ie,e.prev=10,s=[new ce(t)],c=Q(s,n),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(10),le.error("Something went wrong when importing the FSH definitions"),e.abrupt("return");case 19:if((null===(l=r.fishForFHIR("StructureDefinition",de.Resource))||void 0===l?void 0:l.version)===n.fhirVersion[0]){e.next=23;break}return le.error("StructureDefinition resource not found. The FHIR package in the browser cache may be corrupt. Clear cookies and site data on this webpage to reload the FHIR package."),e.abrupt("return");case 23:return le.info("Converting FSH to FHIR resources..."),u=se(c,r),p=u.profiles.length+u.extensions.length+u.logicals.length+u.resources.length+u.instances.filter((function(e){return"Inline"!==e._instanceMeta.usage})).length+u.valueSets.length+u.codeSystems.length,le.info("Exported ".concat(p," FHIR resources as JSON.")),console.log(" "),ve(u),u.profiles=u.profiles.map((function(e){return e.toJSON(!1)})),u.extensions=u.extensions.map((function(e){return e.toJSON(!1)})),u.logicals=u.logicals.map((function(e){return e.toJSON(!1)})),u.resources=u.resources.map((function(e){return e.toJSON(!1)})),u.instances=u.instances.filter((function(e){return"Inline"!==e._instanceMeta.usage})),e.abrupt("return",u);case 35:case"end":return e.stop()}}),e,null,[[10,15]])}))),be.apply(this,arguments)}function ve(e){var t=ue.numError,n=ue.numWarn,a=Object(H.pad)(e.profiles.length.toString(),13),r=Object(H.pad)(e.extensions.length.toString(),12),o=Object(H.pad)(e.logicals.length.toString(),12),i=Object(H.pad)(e.resources.length.toString(),13),c=Object(H.pad)(e.valueSets.length.toString(),18),s=Object(H.pad)(e.codeSystems.length.toString(),17),l=Object(H.pad)(e.instances.length.toString(),18),u=Object(H.pad)("".concat(t," Error").concat(1!==t?"s":""),13),p=Object(H.padStart)("".concat(n," Warning").concat(1!==n?"s":""),12),d=Object(H.padEnd)(pe(t,n),36);["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 SUSHI RESULTS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502    Profiles   \u2502  Extensions  \u2502   Logicals   \u2502   Resources   \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(a," \u2502 ").concat(r," \u2502 ").concat(o," \u2502 ").concat(i," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502      ValueSets     \u2502    CodeSystems    \u2502     Instances      \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(c," \u2502 ").concat(s," \u2502 ").concat(l," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551                                                                 \u2551","\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563","\u2551"+" ".concat(d," ").concat(u," ").concat(p," ")+"\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"].forEach((function(e){return console.log(e)}))}function xe(e){var t=Object(H.pad)(e.profiles.length.toString(),18),n=Object(H.pad)(e.extensions.length.toString(),17),a=Object(H.pad)(e.logicals.length.toString(),18),r=Object(H.pad)(e.resources.length.toString(),18),o=Object(H.pad)(e.valueSets.length.toString(),17),i=Object(H.pad)(e.codeSystems.length.toString(),18),c=Object(H.pad)(e.instances.length.toString(),18),s=Object(H.pad)(e.invariants.length.toString(),17),l=Object(H.pad)(e.mappings.length.toString(),18),u=Object(H.pad)("".concat(ue.numError," Error").concat(1!==ue.numError?"s":""),12),p=Object(H.padStart)("".concat(ue.numWarn," Warning").concat(1!==ue.numWarn?"s":""),12),d=Object(H.padEnd)(pe(ue.numError,ue.numWarn),37),m=["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 GoFSH RESULTS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502      Profiles      \u2502    Extensions     \u2502      Logicals      \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(t," \u2502 ").concat(n," \u2502 ").concat(a," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502     Resources      \u2502     ValueSets     \u2502     CodeSystems    \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(r," \u2502 ").concat(o," \u2502 ").concat(i," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502     Instances      \u2502    Invariants     \u2502      Mappings      \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(c," \u2502 ").concat(s," \u2502 ").concat(l," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551                                                                 \u2551","\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563","\u2551"+" ".concat(d," ").concat(u," ").concat(p," ")+"\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"];console.log(" "),m.forEach((function(e){return console.log(e)}))}function Oe(e){return/^4\.0\.1$/.test(e)?"hl7.fhir.r4.core":/^4\.3.\d+$/.test(e)?"hl7.fhir.r4b.core":/^5\.0.\d+$/.test(e)?"hl7.fhir.r5.core":"hl7.fhir.r4.core"}var ye=n(1501),Se=n(1495),Ee=n(166),je=Object(p.a)((function(e){return{box:{padding:e.spacing(1),color:e.palette.text.primary,background:e.palette.background.paper,display:"flex;",alignItems:"center",justifyContent:"center"},rightControls:{position:"absolute",right:"24px"},leftControls:{position:"absolute",left:"28px"},secondaryButton:{color:e.palette.success.main,"&:hover":{background:e.palette.common.lighterBlue}},progressContainer:{width:"24px",height:"24px"},progress:{height:"1em !important",width:"1em !important",verticalAlign:"middle",color:e.palette.common.white},button:{color:e.palette.common.white,background:e.palette.success.main,borderRadius:"0",paddingRight:"15px",paddingLeft:"15px","&:hover":{background:e.palette.success.dark}},buttonLeft:{float:"right",left:"-3.33px"},buttonRight:{float:"left",right:"-0.67px"},runIcon:{padding:"0px"},dialogPaper:{maxHeight:"80vh",minHeight:"80vh"}}}));function Ce(e,t){if("config"!==e)return t}function we(e){var t=je(),n=Object(s.useState)(!1),r=Object(c.a)(n,2),p=r[0],H=r[1],D=Object(s.useState)(!1),L=Object(c.a)(D,2),U=L[0],P=L[1],B=Object(s.useState)(""),A=Object(c.a)(B,2),G=A[0],M=A[1],V=Object(s.useState)(""),W=Object(c.a)(V,2),J=W[0],_=W[1],Z=Object(s.useState)(""),$=Object(c.a)(Z,2),Y=$[0],K=$[1],X=Object(s.useState)(""),Q=Object(c.a)(X,2),q=Q[0],ee=Q[1],te=Object(s.useState)(!1),ne=Object(c.a)(te,2),ae=ne[0],re=ne[1],ie=Object(s.useState)(!1),ce=Object(c.a)(ie,2),se=ce[0],le=ce[1],ue=Object(s.useState)(!1),pe=Object(c.a)(ue,2),de=pe[0],me=pe[1],ge=Object(s.useState)(!1),be=Object(c.a)(ge,2),ve=be[0],xe=be[1],Oe=Object(s.useState)(""),we=Object(c.a)(Oe,2),Re=we[0],ke=we[1],ze=Object(s.useState)(""),Ne=Object(c.a)(ze,2),Ie=Ne[0],Te=Ne[1];Object(s.useEffect)((function(){var t,n,a,r,o;M((null===(t=e.config)||void 0===t?void 0:t.canonical)||""),_((null===(n=e.config)||void 0===n?void 0:n.version)||""),K((null===(a=e.config)||void 0===a||null===(r=a.fhirVersion)||void 0===r?void 0:r.length)>0?e.config.fhirVersion.at(0):""),ee((null===(o=e.config)||void 0===o?void 0:o.dependencies)||"")}),[e.config]);var Fe=function(){H(!1),ke("")},He=function(){P(!1),e.onConfigChange({canonical:G,version:J,fhirVersion:[Y],dependencies:q,isGoFSHIndented:ae})};function De(){return(De=Object(i.a)(o.a.mark((function t(){var n,a,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isWaiting){t.next=2;break}return t.abrupt("return");case 2:return e.resetLogMessages(),e.onSUSHIClick(!0,[""],!0),le(!0),n=oe(q),a={canonical:G||"http://example.org",version:J||"1.0.0",FSHOnly:!0,fhirVersion:Y?[Y]:["4.0.1"]},t.next=9,he(e.fshText,a,n);case 9:r=t.sent,i=JSON.stringify(r,Ce,2),r&&r.codeSystems&&(r.codeSystems.length||r.extensions.length||r.instances.length||r.profiles.length||r.logicals.length||r.resources.length||r.valueSets.length)||(i=[""]),e.onSUSHIClick(!0,i,!1),le(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Le(){return(Le=Object(i.a)(o.a.mark((function t(){var n,r,i,c,s,l,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isWaiting){t.next=2;break}return t.abrupt("return");case 2:return e.resetLogMessages(),e.onGoFSHClick("",!0),me(!0),n=e.gofshText.map((function(e){return e.def})).filter((function(e){return e})),r=""===q?[]:q.split(","),(G||J||""!==Y)&&(i=Object(a.a)(Object(a.a)({resourceType:"ImplementationGuide",fhirVersion:Y?[Y]:["4.0.1"],id:"1"},G&&{url:"".concat(G,"/ImplementationGuide/1")}),J&&{version:J}),n.push(JSON.stringify(i,null,2))),c={dependencies:r,indent:ae},t.next=11,fe(n,c);case 11:s=t.sent,l=s.fsh,u=s.config,e.onGoFSHClick(l,!1),me(!1),""===G&&u.canonical&&M(u.canonical),""===J&&u.version&&_(u.version),""===Y&&u.fhirVersion&&K(u.fhirVersion.at(0));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ue(){return(Ue=Object(i.a)(o.a.mark((function t(n,a){var r,i,c,s,l,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.endsWith(".fsh")){t.next=2;break}return t.abrupt("return");case 2:return r=e.exampleMetadata[a],xe(!0),Te(r.name),i=new TextDecoder("utf-8"),t.next=8,fetch(r.path).then((function(e){return e.body.getReader()}));case 8:return c=t.sent,s="",t.next=12,c.read();case 12:l=t.sent,u=l.value,s+=i.decode(u),xe(!1),ke(s);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Pe=function n(a){return l.a.createElement(ye.a,{key:a.id,nodeId:a.id,label:a.name},a.children?a.children.map((function(a){return a.children?n(a):function(n){return l.a.createElement(x.a,{key:n.id,title:e.exampleMetadata[n.id]&&e.exampleMetadata[n.id].description?e.exampleMetadata[n.id].description:n.name,placement:"bottom",arrow:!0},l.a.createElement(ye.a,{key:n.id,nodeId:n.id,label:n.name,className:t.treeItem}))}(a)})):null)};return l.a.createElement(O.a,{className:t.box},l.a.createElement(y.a,{container:!0},l.a.createElement(y.a,{item:!0,xs:5},l.a.createElement(S.a,{className:Object(u.a)(t.button,t.buttonLeft),onClick:function(){return De.apply(this,arguments)},testid:"Button"},"Convert to JSON",se?l.a.createElement("div",{className:t.progressContainer},l.a.createElement(E.a,{className:t.progress})):l.a.createElement(d.a,{className:t.runIcon}))),l.a.createElement(y.a,{item:!0,xs:7},l.a.createElement(S.a,{className:Object(u.a)(t.button,t.buttonRight),onClick:function(){return Le.apply(this,arguments)},testid:"GoFSH-button"},de?l.a.createElement("div",{className:t.progressContainer},l.a.createElement(E.a,{className:t.progress})):l.a.createElement(d.a,{className:t.runIcon,style:{transform:"scaleX(-1)"}}),"Convert to FSH"))),l.a.createElement("div",{className:t.leftControls},l.a.createElement(S.a,{name:"Examples",className:t.button,onClick:function(){H(!0)}},l.a.createElement(m.a,null)," \xa0 FSH Examples")),l.a.createElement("div",{className:t.rightControls},l.a.createElement(S.a,{name:"SaveAll",className:t.secondaryButton,onClick:e.saveAll},l.a.createElement(f.a,null)," Save All"),l.a.createElement(S.a,{name:"Configuration",className:t.secondaryButton,onClick:function(){P(!0)}},l.a.createElement(g.a,null)," Configuration")),l.a.createElement(j.a,{open:U,onClose:He,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title"},"Configuration Settings"),l.a.createElement(w.a,null,l.a.createElement(R.a,null,"Change the Implementation Guide configuration to use when processing FSH and FHIR JSON"),l.a.createElement(k.a,{id:"canonical",margin:"dense",fullWidth:!0,label:"Canonical URL",helperText:"Default: http://example.org",defaultValue:G,onChange:function(e){var t=e.target.value;M(t)}}),l.a.createElement(k.a,{id:"version",margin:"dense",fullWidth:!0,label:"Version",helperText:"Default: 1.0.0",defaultValue:J,onChange:function(e){var t=e.target.value;_(t)}}),l.a.createElement(k.a,{id:"fhir-version-select",margin:"dense",fullWidth:!0,select:!0,label:"FHIR Version",helperText:"Default: 4.0.1 (R4)",value:Y,onChange:function(e){var t=e.target.value;K(t)}},l.a.createElement(z.a,{value:"4.0.1"},"4.0.1 (R4)"),l.a.createElement(z.a,{value:"4.3.0"},"4.3.0 (R4B)")),l.a.createElement(k.a,{id:"dependencies",margin:"dense",fullWidth:!0,label:"Dependencies",helperText:"Format: packageId#version, packageId#version (e.g., hl7.fhir.us.core#5.0.1)",defaultValue:q,onChange:function(e){var t=e.target.value;ee(t)}}),l.a.createElement(N.a,{id:"goFSHIndent",margin:"dense",control:l.a.createElement(I.a,{checked:ae,color:"primary"}),label:"Indent output of Convert to FSH",onChange:function(e){var t=e.target.checked;re(t)}}),l.a.createElement(T.a,null,"If set, Convert to FSH will output FSH using path rules")),l.a.createElement(F.a,null,l.a.createElement(S.a,{onClick:He,color:"primary"},"Done"))),l.a.createElement(j.a,{open:p,onClose:Fe,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0,scroll:"paper",classes:{paper:t.dialogPaper}},l.a.createElement(C.a,{id:"form-dialog-title"},"FSH Examples"),l.a.createElement(w.a,null,l.a.createElement(y.a,{container:!0,style:{overflow:"scroll",minHeight:"64vh"}},l.a.createElement(y.a,{item:!0,xs:4},l.a.createElement(Se.a,{className:t.treeView,defaultCollapseIcon:l.a.createElement(h.a,null),defaultExpandIcon:l.a.createElement(b.a,null),onNodeSelect:function(e,t){return Ue.apply(this,arguments)}},e.exampleConfig.map((function(e){return Pe(e)})))),l.a.createElement(y.a,{item:!0,xs:8},l.a.createElement(Ee.a,{name:Re?Ie:"",isExamples:!0,value:Re,initialText:Re,updateTextValue:function(e){ke(e)},mode:"fsh",placeholder:ve?"Fetching example...":"Select an example"})))),l.a.createElement(F.a,null,l.a.createElement(S.a,{onClick:function(){navigator.clipboard.writeText(Re)},color:"primary"},l.a.createElement(v.a,null)," Copy to clipboard"),l.a.createElement(S.a,{onClick:Fe,color:"secondary"},"Close"))))}},615:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n.n(a),o=n(395),i=n(1475),c=n(1477),s=n(621),l=n(276),u=n(201),p=n(1498),d=n(1478),m=n.p+"static/media/FSH-online-logo.1322e272.png",f=Object(o.a)((function(e){return{root:{background:e.palette.common.blue,position:"static",boxShadow:"0"},title:{fontSize:20,fontWeight:700},logo:{height:"55px",width:"63px"},toolbarBox:{alignItems:"center"},exitIcon:{paddingLeft:"3px",transform:"scaleX(-1)"},docButton:{color:e.palette.common.white,backgroundColor:e.palette.common.blue,fontSize:"0.875rem",fontWeight:700,"&:hover":{background:e.palette.common.lightBlue}},versionText:{color:e.palette.common.white,fontSize:"0.8rem",fontStyle:"italic",marginTop:"-5px"}}}));function g(){var e=f();return r.a.createElement(i.a,{className:e.root},r.a.createElement(c.a,null,r.a.createElement(s.a,{className:e.toolbarBox,display:"flex",flexGrow:1,flexDirection:"row"},r.a.createElement(s.a,{order:1,display:"flex",flexGrow:1,flexDirection:"row"},r.a.createElement(s.a,{order:1,alignSelf:"center",display:"flex"},r.a.createElement("img",{src:m,alt:"logo",className:e.logo})),r.a.createElement(s.a,{order:2,alignSelf:"center",m:1},r.a.createElement(p.b,{injectFirst:!0},r.a.createElement(l.a,{order:1,className:e.title},"FSH ONLINE"),r.a.createElement(l.a,{order:2,className:e.versionText},"Powered by SUSHI v2.10.1 and GoFSH v1.6.5")))),r.a.createElement(s.a,{order:1},r.a.createElement(p.b,{injectFirst:!0},r.a.createElement(u.a,{className:e.docButton,href:"https://fshschool.org/",target:"_blank"},r.a.createElement(d.a,{className:e.exitIcon,fontSize:"small"}),"Back to School"))))))}},637:function(e,t,n){},641:function(e,t){},643:function(e,t){},694:function(e,t,n){},745:function(e,t){},747:function(e,t){},761:function(e,t){},763:function(e,t){},773:function(e,t){},775:function(e,t){}},[[1430,1,2]]]);
//# sourceMappingURL=main.941a51a0.chunk.js.map