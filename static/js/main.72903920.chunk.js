(this["webpackJsonpfsh-online"]=this["webpackJsonpfsh-online"]||[]).push([[0],{386:function(e,t,n){e.exports=n(892)},391:function(e,t,n){},392:function(e,t,n){},396:function(e,t,n){},587:function(e,t){},589:function(e,t){},603:function(e,t){},605:function(e,t){},620:function(e,t){},622:function(e,t){},632:function(e,t){},634:function(e,t){},892:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(22),c=n.n(o),i=(n(391),n(66)),s=n(927),l=n(937),u=n(929),m=n(930),p=n(932),f=n(939),d=n(377),h=n(941),g=n(374),b=n(940),y=(n(392),Object(s.a)((function(e){return{root:{background:"#2c4f85",position:"static",height:"50%",boxShadow:"0"},title:{fontSize:20,marginLeft:e.spacing(-1.2),padding:2,fontWeight:700}}}))),S=Object(g.a)({typography:{fontFamily:"Open Sans"}});function x(){var e=y();return r.a.createElement(u.a,{theme:S},r.a.createElement(m.a,{className:e.root},r.a.createElement(p.a,null,r.a.createElement(f.a,{display:"flex",flexGrow:1,flexDirection:"row"},r.a.createElement(f.a,{order:1,display:"flex",flexGrow:1,flexDirection:"row"},r.a.createElement(f.a,{order:1,alignSelf:"center"},r.a.createElement(d.a,{className:e.title},"FSH ONLINE")),r.a.createElement(f.a,{order:2,alignSelf:"center",m:1},r.a.createElement(u.a,{theme:S},r.a.createElement(b.b,{injectFirst:!0},r.a.createElement(d.a,{order:2,classes:{root:"versionText"}},"Powered by SUSHI v1.0.1"))))),r.a.createElement(f.a,{order:2},r.a.createElement(u.a,{theme:S},r.a.createElement(b.b,{injectFirst:!0},r.a.createElement(h.a,{classes:{root:"docButton"},href:"https://fshschool.org/",target:"_blank"},"Back to School"))))))))}var v=n(371),E=n.n(v),k=Object(s.a)((function(e){return{box:{padding:e.spacing(.2,2),color:e.palette.text.primary,background:e.palette.background.paper,height:"100%",noWrap:!1}}})),w=Object(g.a)({typography:{fontFamily:"Open Sans"}});function O(e){var t=k(),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0)return r.a.createElement(u.a,{theme:w},r.a.createElement("span",null,r.a.createElement(d.a,{variant:"subtitle2"},"Errors and Warnings"),e.map((function(e,t){return r.a.createElement("pre",{key:t},e)}))))}(e.errorsAndWarnings),a=function(e,t,n){if(e&&t&&n){var a=JSON.parse(t);return r.a.createElement(u.a,{theme:w},r.a.createElement("span",null,r.a.createElement(d.a,{variant:"subtitle2"},"Results"),r.a.createElement(E.a,{src:a,displayDataTypes:!1,collapsed:!1,name:!1})))}return e&&t?r.a.createElement("pre",null,t):""}(e.displaySUSHI,e.text,e.isObject);return r.a.createElement(u.a,{theme:w},r.a.createElement(f.a,{className:t.box,border:1,overflow:"scroll"},r.a.createElement(d.a,{variant:"subtitle1"},"SUSHI Output"),n,a))}var j=Object(s.a)((function(e){return{box:{padding:e.spacing(2),color:e.palette.common.white,background:e.palette.common.black,height:"200%"},pre:{margin:"0px"}}})),I=Object(g.a)({typography:{fontFamily:"Open Sans"}});function T(e){var t=j();return r.a.createElement(u.a,{theme:I},r.a.createElement(f.a,{className:t.box,overflow:"scroll"},r.a.createElement(d.a,{variant:"subtitle1"},"Console"),e.consoleMessages.map((function(e,n){return r.a.createElement("pre",{key:n,className:t.pre},e)}))))}var F=n(372),H=n(104),N=n.n(H);n(396),n(397),n(398);n(399),n(400),n(401),N.a.defineSimpleMode("fsh",{start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"atom"},{regex:/\b(Alias|CodeSystem|Expression|Extension|Description|Id|Instance|InstanceOf|Invariant|Mapping|Mixins|Parent|Profile|RuleSet|Severity|Source|Target|Title|Usage|ValueSet|XPath)(?=\s*:)\b/,token:"keyword"},{regex:/\b(and|codes|contains|exclude|from|includes|is-a|is-not-a|named|obeys|only|or|system|units|valueset|where|D|MS|N|SU|TU|\\?!)\b/,token:"def"},{regex:/(\(\s*)(exactly|example|extensible|preferred|required)(\s*\))/,token:"def"},{regex:/\*|->|=|:/,token:"def"},{regex:/\b(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*))\b/,token:"atom"},{regex:/\b(true|false)\b/,token:"string"},{regex:/#[^\s]*/,token:"string"},{regex:/\/\/.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}]});var C=Object(s.a)((function(e){return{box:{height:"100%"}}}));function W(e){var t=C();return r.a.createElement(f.a,{className:t.box,borderTop:1},r.a.createElement(F.UnControlled,{className:"react-codemirror2",value:"Edit FSH here!",options:{mode:"fsh",theme:"material",lineNumbers:!0},onChange:function(t,n,a){var r;r=a,e.updateTextValue(r)}}))}var D=n(37),R=n.n(D),P=n(92),U=n(938),L=n(943),B=n(936),J=n(934),M=n(935),V=n(933),A=n(27),Y=n(43),z=n(373),_=n.n(z),G=n(227),Z=n.n(G),$=n(120),q=n.n($);function X(e){return new Promise((function(t){q.a.get("https://packages.fhir.org/hl7.fhir.r4.core/4.0.1",(function(n){var a=_.a.extract();a.on("entry",(function(t,n,a){var r="";n.on("data",(function(e){r+=e.toString()})),n.on("end",(function(){try{var t=JSON.parse(r);t.resourceType&&e.push(t)}catch(n){}a()})),n.resume()})),a.on("finish",(function(){t(e)})),n.pipe(Z.a.createGunzip()).pipe(a)}))}))}function K(e,t){return new Promise((function(n,a){var r=e.transaction(["resources"],"readwrite");r.oncomplete=function(){n()},r.onerror=function(e){a(e)};var o=r.objectStore("resources",{keyPath:["id","resourceType"]});t.forEach((function(e){o.add(e)}))}))}function Q(e,t){return new Promise((function(n,a){var r=t.transaction(["resources"],"readonly").objectStore("resources",{keyPath:["id","resourceType"]}).openCursor();r.onerror=function(){a("There is an error getting data out!")},r.onsuccess=function(){var t=r.result;t?(e.add(t.value),t.continue()):n(e)}}))}var ee=Y.utils.logger,te=Y.fhirdefs.FHIRDefinitions,ne=Y.sushiImport.FSHTank,ae=Y.sushiImport.importText;function re(e,t){ee.info("Importing FSH text...");var n=ae(e);return new ne(n,t)}function oe(e,t){return ce.apply(this,arguments)}function ce(){return(ce=Object(P.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var r=null,o=!1,c=te,i=indexedDB.open("FSH Playground Dependencies",n);i.onsuccess=function(){var n=Object(P.a)(R.a.mark((function n(a){var i;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a.target.result,i=[],!o){n.next=7;break}return n.next=5,X(i);case 5:return n.next=7,K(r,i);case 7:return n.next=9,Q(t,r);case 9:c=n.sent,e(c);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),i.onupgradeneeded=function(e){o=!0,(r=e.target.result).createObjectStore("resources",{keyPath:["id","resourceType"]})},i.onerror=function(e){a(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=Y.sushiImport.FSHTank,se=Y.sushiImport.RawFSH,le=Y.sushiExport.exportFHIR,ue=Y.utils.logger,me=Y.utils.stats,pe=Y.utils.Type,fe=Y.fhirdefs.FHIRDefinitions,de=0,he=0;function ge(e,t){return be.apply(this,arguments)}function be(){return(be=Object(P.a)(R.a.mark((function e(t,n){var a,r,o,c,i,s,l,u;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new fe,1,e.next=4,oe(a,1);case 4:a=e.sent,r=ie,e.prev=6,o=[new se(t)],r=re(o,n),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),ue.error("Something went wrong when importing the FSH definitions"),e.abrupt("return");case 15:if("4.0.1"===(null===(c=a.fishForFHIR("StructureDefinition",pe.Resource))||void 0===c?void 0:c.version)){e.next=19;break}return ue.error("StructureDefinition resource not found for v4.0.1. The FHIR R4 package in local cache may be corrupt. Local FHIR cache can be found at <home-directory>/.fhir/packages. For more information, see https://wiki.hl7.org/FHIR_Package_Cache#Location."),e.abrupt("return");case 19:return ue.info("Converting FSH to FHIR resources..."),i=le(r,a),console.log(" "),s=ye(i,de,he),l=s.errors,u=s.warns,de=l,he=u,i.profiles=i.profiles.map((function(e){return e.toJSON(!1)})),i.extensions=i.extensions.map((function(e){return e.toJSON(!1)})),e.abrupt("return",i);case 28:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}function ye(e,t,n){var a,r=me.numError-t,o=me.numWarn-n,c=Object(A.pad)(e.profiles.length.toString(),8),i=Object(A.pad)(e.extensions.length.toString(),10),s=Object(A.pad)(e.valueSets.length.toString(),9),l=Object(A.pad)(e.codeSystems.length.toString(),11),u=Object(A.pad)(e.instances.length.toString(),9),m=Object(A.pad)("".concat(r," Error").concat(1!==r?"s":""),13),p=Object(A.padStart)("".concat(o," Warning").concat(1!==o?"s":""),12);a=0===r&&0===o?"clean":r>0?"errors":"warnings";var f=Object(A.padEnd)(Object(A.sample)(Se[a]),36);xe[a];return["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 SUSHI RESULTS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502 Profiles \u2502 Extensions \u2502 ValueSets \u2502 CodeSystems \u2502 Instances \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(c," \u2502 ").concat(i," \u2502 ").concat(s," \u2502 ").concat(l," \u2502 ").concat(u," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551                                                                 \u2551","\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563","\u2551"+" ".concat(f," ").concat(m," ").concat(p," ")+"\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"].forEach((function(e){return console.log(e)})),{errors:r,warns:o}}var Se={clean:["That went swimmingly!","O-fish-ally error free!","Nice! You're totally krilling it!","Cool and So-fish-ticated!","Well hooked and landed!","You earned a PhD in Ichthyology!","You rock, lobster!","Everything is ship-shape!","Ex-clam-ation point!","Ac-clam-ations!","Fin-tastic job!","You're dolphinitely doing great!"],warnings:["Not bad, but you cod do batter!","Something smells fishy...","Warnings... Water those about?","Looks like you are casting about.","A bit pitchy, but tuna-ble."],errors:["Ick! Errors!","Some-fin went wrong...","Unfor-tuna-tely, there are errors.","That really smelt.","You spawned some errors.","Just keep swimming, Dory.","This is the one that got away.","The docs might be bene-fish-al.","This was a turtle disaster.","Something went eely wrong there.","Documentation may be kelp-ful."]},xe={clean:"green",warnings:"#b36200",errors:"red"},ve=Object(s.a)((function(e){return{box:{padding:e.spacing(1),color:e.palette.text.primary,background:e.palette.background.paper,height:"4vh",display:"flex;",alignItems:"center",justifyContent:"center"},button:{color:e.palette.common.white,background:e.palette.success.dark,textTransform:"none",fontWeight:"bold","&:hover":{background:e.palette.success.main}},secondaryButton:{color:e.palette.common.white,background:"#2c4f85",textTransform:"none",fontWeight:"bold",marginLeft:"5px","&:hover":{background:"#385f9c"}}}})),Ee=Object(g.a)({typography:{fontFamily:"Open Sans"}});function ke(e,t){if("config"!==e)return t}function we(e){var t=ve(),n=Object(a.useState)(!1),o=Object(i.a)(n,2),c=o[0],s=o[1],l=Object(a.useState)("http://example.org"),m=Object(i.a)(l,2),p=m[0],d=m[1],g=Object(a.useState)("1.0.0"),b=Object(i.a)(g,2),y=b[0],S=b[1],x=function(){s(!1)};function v(){return(v=Object(P.a)(R.a.mark((function t(){var n,a,r,o;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.resetLogMessages(),e.onClick(!0,"Loading...",!1),n=!0,a={canonical:p,version:y,FSHOnly:!0,fhirVersion:["4.0.1"]},t.next=6,ge(e.text,a);case 6:r=t.sent,o=JSON.stringify(r,ke,2),r&&r.codeSystems&&(r.codeSystems.length||r.extensions.length||r.instances.length||r.profiles.length||r.valueSets.length)||(n=!1,o=""),e.onClick(!0,o,n);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement(u.a,{theme:Ee},r.a.createElement(f.a,{className:t.box,borderRight:1,borderLeft:1},r.a.createElement(h.a,{className:t.button,onClick:function(){return v.apply(this,arguments)},testid:"Button"},"Run"),r.a.createElement(h.a,{className:t.secondaryButton,onClick:function(){s(!0)}},"Configuration"),r.a.createElement(L.a,{open:c,onClose:x,"aria-labelledby":"form-dialog-title"},r.a.createElement(V.a,{id:"form-dialog-title"},"SUSHI Configuration Settings"),r.a.createElement(J.a,null,r.a.createElement(M.a,null,"Change the configuration options to use when running SUSHI on your FSH"),r.a.createElement(U.a,{id:"canonical",margin:"dense",fullWidth:!0,label:"Canonical URL",defaultValue:p,onChange:function(e){var t=e.target.value;d(t)}}),r.a.createElement(U.a,{id:"version",margin:"dense",fullWidth:!0,label:"Version",defaultValue:y,onChange:function(e){var t=e.target.value;S(t)}}),r.a.createElement(U.a,{id:"dependencies",disabled:!0,margin:"dense",label:"Dependencies",helperText:"(Not yet supported) dependencyA#id, dependencyB#id",defaultValue:"dependency#id",fullWidth:!0})),r.a.createElement(B.a,null,r.a.createElement(h.a,{onClick:x,color:"primary"},"Done")))))}var Oe=Object(s.a)((function(e){return{container:{flexGrow:1},itemTop:{height:"75vh"},itemBottom:{height:"25vh"}}})),je=(console.log,[]),Ie=[];function Te(){var e=Oe(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)("Edit FSH here!"),u=Object(i.a)(s,2),m=u[0],p=u[1],f=Object(a.useState)("Your JSON Output Will Display Here: "),d=Object(i.a)(f,2),h=d[0],g=d[1],b=Object(a.useState)(!1),y=Object(i.a)(b,2),S=y[0],v=y[1];return r.a.createElement("div",{className:"root"},r.a.createElement(x,null),r.a.createElement(we,{onClick:function(e,t,n){c(e),g(t),v(n)},text:m,resetLogMessages:function(){je=[],Ie=[]}}),r.a.createElement(l.a,{className:e.container,container:!0},r.a.createElement(l.a,{className:e.itemTop,item:!0,xs:6},r.a.createElement(W,{value:m,updateTextValue:function(e){p(e)}})),r.a.createElement(l.a,{className:e.itemTop,item:!0,xs:6},r.a.createElement(O,{displaySUSHI:o,text:h,isObject:S,errorsAndWarnings:Ie})),r.a.createElement(l.a,{className:e.itemBottom,item:!0,xs:12},r.a.createElement(T,{consoleMessages:je}))))}console.log=function(e){je.push(e),e&&(e.startsWith("error")||e.startsWith("warn"))&&Ie.push(e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[386,1,2]]]);
//# sourceMappingURL=main.72903920.chunk.js.map