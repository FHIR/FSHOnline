{"version":3,"sources":["../node_modules/gofsh/dist/optimizer sync","utils/AppRouter.js","serviceWorker.js","index.js","components/ShareLink.js","components/CodeMirrorComponent.js","utils/BitlyWorker.js","components/DeleteConfirmationModal.js","components/JSONOutput.js","components/FSHOutput.js","components/ConsoleComponent.js","utils/logger.js","utils/Load.js","utils/Processing.js","utils/helpers.js","utils/FSHHelpers.js","components/FSHControls.js","style/FSH-online-logo.png","components/TopBar.js","App.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","AppRouter","props","_jsxs","Switch","children","_jsx","Route","path","component","App","exact","Boolean","window","location","hostname","match","ReactDOM","render","React","StrictMode","HashRouter","basename","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","useStyles","makeStyles","theme","iconButton","color","palette","common","white","padding","textArea","width","text","primary","fontWeight","copyBox","backgroundColor","lightGrey","borderRadius","display","justifyContent","alignItems","paddingLeft","textOverflow","ShareLink","classes","openShare","setOpenShare","useState","shareError","setShareError","openGist","setOpenGist","openGistError","setOpenGistError","copyTip","setCopyTip","fshCopied","fshCopyButton","setFshCopied","link","setLink","gistLink","setGistLink","showCreateGistButton","setshowCreateGistButton","handleOpenGist","handleCloseGist","handleCloseGistError","handleCloseShare","_Fragment","Tooltip","title","placement","arrow","IconButton","name","className","onClick","async","_props$config","_props$config2","_props$config3","_props$config4","encoded","_props$config5","_props$config6","_props$config7","_props$config8","config","canonical","version","fhirVersion","length","dependencies","deflateSync","JSON","stringify","c","v","f","d","shareText","toString","longLink","bitlyLink","generateLink","errorNeeded","bitlySlice","slice","LinkIcon","fontSize","style","transform","Dialog","open","onClose","maxWidth","fullWidth","DialogTitle","DialogContent","DialogContentText","Box","overflow","CopyToClipboard","onCopy","FileCopy","DialogActions","Button","align","flex","hidden","red","Link","href","target","TextField","label","onChange","event","_event$target$value$m","gistId","value","bottom","right","handleFSHcopy","handleGenerateGistLink","autoFocus","require","CodeMirror","defineSimpleMode","meta","lineComment","start","regex","token","push","sol","next","closingParen","pop","comment","drawerWidth","box","height","header","fontFamily","background","darkerGrey","transition","transitions","create","easing","sharp","duration","leavingScreen","headerShift","easeOut","enteringScreen","marginRight","headerLabel","lineHeight","float","whiteSpace","headerActionGroup","paddingRight","headerActions","drawer","flexShrink","drawerPaper","border","top","drawerPaperExpandedConsole","drawerHeader","minHeight","drawerHeaderIcon","success","main","light","minWidth","content","flexGrow","contentShift","CodeMirrorComponent","expandedConsoleContext","useContext","ExpandedConsoleContext","drawerOpen","setDrawerOpen","handleDrawerOpen","handleDrawerClose","renderActionIcon","Icon","arguments","undefined","upperFirst","clsx","renderDrawer","mode","isExamples","copy","save","SaveAlt","delete","Delete","ChevronLeft","ReactCodeMirror","initialText","options","placeholder","scrollbarStyle","autoCloseBrackets","lineNumbers","foldGutter","readOnly","gutters","extraKeys","Tab","cm","replaceSelection","foldCode","getCursor","lineWrapping","isLineWrapped","editor","data","updateTextValue","Drawer","variant","anchor","paper","ChevronRight","bitly","BitlyClient","process","Promise","shorten","result","expandLink","encodedFsh","bitlyURL","expand","DeleteConfirmationModal","isOpen","handleCloseModal","item","handleDelete","fileTreeContent","overflowY","button","dark","list","paddingBottom","listItemError","paddingTop","margin","listItem","lightestGrey","marginTop","marginBottom","listItemSelected","editorGrey","darkestGrey","listHeader","listIcon","verticalAlign","listIconError","blankIcon","checkFshType","def","resourceType","derivation","kind","type","includes","checkIdToDisplay","substring","lastIndexOf","getIterablePackage","defsPackage","profiles","extensions","logicals","resources","instances","valueSets","codeSystems","map","JSONOutput","setInitialText","fhirDefinitions","setFhirDefinitions","setShowNewText","propsUpdateText","currentDef","setCurrentDef","defsWithErrors","setDefsWithErrors","openDeleteConfirmation","setOpenDeleteConfirmation","useEffect","showNewText","isEqual","packageJSON","parse","iterablePackage","isWaiting","addDefinition","updatedDefs","handleCloseAndDelete","index","splice","newCurrentDef","newCurrentDefText","newErrors","indexOf","shiftedErrors","i","handleCloseDeleteConfirmation","renderFileTreeView","order","grouped","groupBy","val","Object","sort","a","b","key","List","aId","bId","toLowerCase","currentIndex","isError","ListItem","ErrorOutline","displayValue","latestJSON","startIcon","Add","handleOpenDeleteConfirmation","handleSave","defaultName","_resourceObj","_resourceObj2","resourceObj","FileSaver","saveAs","Blob","renderDeleteModal","defToDelete","FSHOutput","openDeleteModal","setOpenDeleteModal","handleOpenDeleteModal","consoleControls","boxSizing","textTransform","problemsButton","expandIcon","pre","circle","marginLeft","Console","problemsView","setProblemsView","problemCount","setExpandConsole","toggleExpandConsole","expandConsole","ExpandMore","ExpandLess","setMessagesConsole","borderBottom","setProblemsConsole","problemColor","borderColor","problemMessages","consoleMessages","fshOnlineLogger","sushiUtils","logger","setCurrentLogger","loggerName","gofshUtils","unzipDependencies","dependency","returnPackage","resourceArr","emptyDependencies","https","get","res","extract","tarStream","on","stream","buf","chunk","resource","resume","statusCode","pipe","zlib","createGunzip","info","loadDependenciesInStorage","database","reject","transaction","oncomplete","onerror","objectStore","keyPath","forEach","put","loadAsFHIRDefs","FHIRdefs","displayLoaded","getData","openCursor","onsuccess","iterator","add","continue","FHIRDefinitions","fhirdefs","FSHTank","sushiImport","importText","loadAndCleanDatabase","defs","resolvedDependencies","all","packageId","updatedVersion","isAutomatic","body","_parsedBody$distTags","_parsedBody$distTags$","parsedBody","latest","getLatestVersionNumber","latestId","replaceLatestVersion","dep","filter","resolveDependencies","helperUpdate","databaseName","helperReturn","shouldUpdate","OpenIDBRequest","indexedDB","existingObjectStores","objectStoreNames","contains","close","onupgradeneeded","checkForDatabaseUpgrade","loadExternalDependenciesReturn","loadExternalDependencies","mergedEmpties","flatten","getAll","deleteObjectStore","cleanDatabase","shouldUnzip","newDependencies","unzipReturn","createObjectStore","sliceDependency","split","trimmedDep","trim","RawFSH","exportFHIR","sushiExport","sushiStats","utils","stats","gofshStats","getRandomPun","Type","runGoFSH","input","_configuration$config","_configuration$config2","reset","docs","_resource$id","isProcessableContent","processor","WildFHIR","lake","LakeOfFHIR","fisher","MasterFisher","fhirProcessor","FHIRProcessor","goFSHDependencies","replace","configuration","processConfig","join","dependenciesToAdd","addCoreFHIRVersionAndAutomaticDependencies","pkg","getResources","indent","fsh","gofshExport","FSHExporter","apiExport","proNum","pad","extNum","logNum","resNum","vsNum","csNum","instNum","invNum","invariants","mapNum","mappings","errNumMsg","numError","wrnNumMsg","padStart","numWarn","aWittyMessageInvolvingABadFishPun","padEnd","results","log","r","printGoFSHresults","runSUSHI","tank","rawFSHes","fillTank","structDef","fishForFHIR","Resource","outPackage","count","_instanceMeta","usage","profileNum","extentNum","logiclNum","resourcNum","valueSetsNumber","codeSystemsNum","instancesNumber","errorNumMsg","wrNumMsg","printSUSHIResults","p","toJSON","l","coreFHIRVersion","coreFHIRPackage","getCoreFHIRPackageIdentifier","hasDependency","AUTOMATIC_DEPENDENCIES","fhirVersions","some","startsWith","dependencyToAdd","dependenciesList","currentDependency","ignoreVersion","test","spacing","rightControls","position","leftControls","left","secondaryButton","lighterBlue","progressContainer","progress","buttonLeft","buttonRight","runIcon","dialogPaper","maxHeight","dialogActions","dialogActionsMessage","fontStyle","replacer","FSHControls","openExamples","setOpenExamples","openConfig","setOpenConfig","setCanonical","setVersion","setFhirVersion","setDependencies","isGoFSHIndented","setIsGoFSHIndented","isSUSHIRunning","setIsSUSHIRunning","isGoFSHRunning","setIsGoFSHRunning","isFetchingExample","setIsFetchingExample","currentExample","setCurrentExample","currentExampleName","setCurrentExampleName","_props$config3$fhirVe","at","handleCloseExamples","handleCloseConfig","onConfigChange","renderTree","nodes","TreeItem","nodeId","node","exampleMetadata","description","treeItem","renderItem","Grid","container","xs","resetLogMessages","onSUSHIClick","parsedDependencies","FSHOnly","fshText","jsonOutput","testid","CircularProgress","PlayArrow","onGoFSHClick","gofshInputStrings","gofshText","igResource","url","handleOpenExamples","LibraryBooksIcon","saveAll","handleOpenConfig","Settings","helperText","defaultValue","newCanonical","newVersion","select","newFhirVersion","MenuItem","dependencyString","FormControlLabel","control","Checkbox","checked","isIndented","FormHelperText","isLineWrappedChecked","setIsLineWrapped","scroll","TreeView","treeView","defaultCollapseIcon","ExpandMoreIcon","defaultExpandIcon","ChevronRightIcon","onNodeSelect","endsWith","utf8Decoder","TextDecoder","responseReader","fetch","response","getReader","fshString","read","decode","exampleConfig","category","clipboard","writeText","AssignmentOutlinedIcon","root","blue","boxShadow","logo","toolbarBox","exitIcon","docButton","lightBlue","versionText","TopBar","AppBar","Toolbar","flexDirection","alignSelf","src","alt","m","StylesProvider","injectFirst","Typography","ExitToApp","fullHeightGrid","editorPane","resize","cursor","colors","resizeBlue","resizeCursor","collapsedMain","expandedMain","collapsedConsole","expandedConsole","darkerBlue","grey","createTheme","typography","overrides","MuiTooltip","tooltip","MuiButton","MuiIconButton","githubURL","defaultInfoMessage","defaultProblemMessage","infoMessages","convertManifest","childrenArr","element","replaceAll","getManifestFromGit","manifestJSON","json","createContext","urlParam","showNewFHIRText","setShowNewFHIRText","inputFSHText","setInputFSHText","inputFHIRText","setInputFHIRText","isWaitingForFHIROutput","setIsWaitingForFHIROutput","isWaitingForFSHOutput","setIsWaitingForFSHOutput","setExampleConfig","exampleFilePaths","setExampleFilePaths","leftWidth","setLeftWidth","isDragging","setIsDragging","configToShare","setConfigToShare","sharedConfig","setSharedConfig","onMouseUp","preventDefault","debouncedMove","clientX","newPercentage","innerWidth","getFileName","nameMap","nameWithCount","set","encodedFSH","promisedURL","sliced64","long_url","inflateSync","Buffer","from","decodeFSH","params","splitIndex","parsedConfig","fshContent","rawConfig","gistContent","values","files","truncated","raw_url","getGistContent","waitForFSH","fetchExamples","ThemeProvider","sushiOutput","fshOutput","Map","zip","JSZip","file","defWithId","defWithUntitledId","partition","_def$def","_def$id","_def$def2","generateAsync","blob","wrapSelected","Provider","onTouchMove","touches","debounce","onMouseMove","onMouseLeave","flexBasis","onTouchStart","onTouchEnd","onMouseDown","onDoubleClick","ConsoleComponent"],"mappings":"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","file":"static/js/main.57d4bb7f.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1202;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport App from '../App';\n\nexport default function AppRouter(props) {\n  return (\n    <Switch>\n      <Route path=\"/share/:text\" component={App} />\n      <Route path=\"/gist/:id\" component={App} />\n      <Route path=\"\" exact component={App} />\n    </Switch>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppRouter from './utils/AppRouter';\nimport * as serviceWorker from './serviceWorker';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter basename=\"/\">\n      <AppRouter />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useState } from 'react';\nimport { deflateSync } from 'browserify-zlib';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link as LinkIcon, FileCopy } from '@material-ui/icons';\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  Tooltip,\n  Link,\n  TextField,\n  Box\n} from '@material-ui/core';\nimport { generateLink } from '../utils/BitlyWorker';\nimport { theme } from '../App';\n\nconst useStyles = makeStyles((theme) => ({\n  iconButton: {\n    color: theme.palette.common.white,\n    padding: '3px'\n  },\n  textArea: {\n    width: '100%',\n    color: theme.palette.text.primary,\n    fontWeight: 'bold'\n  },\n  copyBox: {\n    backgroundColor: theme.palette.common.lightGrey,\n    borderRadius: 2,\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingLeft: '3%',\n    textOverflow: 'ellipsis'\n  }\n}));\n\nexport default function ShareLink(props) {\n  const classes = useStyles();\n  const [openShare, setOpenShare] = useState(false);\n  const [shareError, setShareError] = useState(false);\n  const [openGist, setOpenGist] = useState(false);\n  const [openGistError, setOpenGistError] = useState(false);\n  const [copyTip, setCopyTip] = useState('Copy to Clipboard');\n  const [{ fshCopied, fshCopyButton }, setFshCopied] = useState({\n    fshCopied: false,\n    fshCopyButton: 'Copy FSH to Clipboard'\n  });\n  const [link, setLink] = useState();\n  const [gistLink, setGistLink] = useState();\n  const [showCreateGistButton, setshowCreateGistButton] = useState(true);\n\n  const updateGistLink = (event) => {\n    const gistId = event.target.value.match(/gist\\.github\\.com\\/[^/]+\\/(.+)/)?.[1];\n    if (gistId) {\n      setGistLink(`https://fshschool.org/FSHOnline/#/gist/${gistId}`);\n    }\n  };\n\n  const handleShareError = () => {\n    setShareError(true);\n    handleOpenGist();\n  };\n\n  const handleOpenGist = () => {\n    setOpenShare(false);\n    setOpenGist(true);\n    setGistLink('');\n    setFshCopied({ fshCopied: false, fshCopyButton: 'Copy FSH to Clipboard' });\n  };\n\n  const handleCloseGist = () => {\n    setOpenGist(false);\n    setShareError(false);\n  };\n\n  const handleGenerateGistLink = () => {\n    if (gistLink) {\n      handleCloseGist();\n      setLink(gistLink);\n      setOpenShare(true);\n      setCopyTip('Copy to Clipboard');\n      setshowCreateGistButton(false);\n    } else {\n      setOpenGistError(true);\n    }\n  };\n\n  const handleCloseGistError = () => {\n    setOpenGistError(false);\n  };\n\n  const handleOpenShare = async () => {\n    let encoded;\n    if (\n      props.config?.canonical ||\n      props.config?.version ||\n      props.config?.fhirVersion.length > 0 ||\n      props.config?.dependencies\n    ) {\n      encoded = deflateSync(\n        JSON.stringify({\n          c: props.config?.canonical,\n          v: props.config?.version,\n          f: props.config?.fhirVersion,\n          d: props.config?.dependencies\n        }) +\n          '\\n' +\n          props.shareText\n      ).toString('base64');\n    } else {\n      encoded = deflateSync(props.shareText).toString('base64');\n    }\n    const longLink = `https://fshschool.org/FSHOnline/#/share/${encoded}`;\n    const bitlyLink = await generateLink(longLink);\n    if (bitlyLink.errorNeeded === true) {\n      handleShareError();\n    } else {\n      // Removes the encoded data from the end of the url, starting at index 15\n      const bitlySlice = bitlyLink.link.slice(15);\n      const displayLink = `https://fshschool.org/FSHOnline/#/share/${bitlySlice}`;\n      setLink(displayLink);\n      setOpenShare(true);\n      setCopyTip('Copy to Clipboard');\n      setshowCreateGistButton(true);\n    }\n  };\n\n  const handleCloseShare = () => {\n    setOpenShare(false);\n    setShareError(false);\n  };\n\n  const handleFSHcopy = () => {\n    setFshCopied({ fshCopied: true, fshCopyButton: 'FSH Copied to Clipboard' });\n  };\n\n  return (\n    <>\n      <Tooltip title=\"Share FSH\" placement=\"top\" arrow>\n        <IconButton name=\"Share FSH\" className={classes.iconButton} onClick={handleOpenShare}>\n          <LinkIcon fontSize=\"small\" style={{ transform: 'rotate(-45deg)' }} />\n        </IconButton>\n      </Tooltip>\n      <Dialog open={openShare} onClose={handleCloseShare} aria-labelledby=\"form-dialog-title\" maxWidth=\"md\" fullWidth>\n        <DialogTitle id=\"form-dialog-title\">Share</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Use this link to share your FSH with others!</DialogContentText>\n          <Box className={classes.copyBox}>\n            <Box maxWidth=\"90%\" textOverflow=\"ellipsis\" overflow=\"hidden\">\n              {link}\n            </Box>\n            <Tooltip title={copyTip} placement=\"top\" arrow>\n              <CopyToClipboard text={link} onCopy={() => setCopyTip('Link Copied')}>\n                <IconButton style={{ borderRadius: '0%' }}>\n                  <FileCopy />\n                </IconButton>\n              </CopyToClipboard>\n            </Tooltip>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          {showCreateGistButton && (\n            <Button onClick={handleOpenGist} color=\"primary\" style={{ align: 'left' }}>\n              Create Link with Gist\n            </Button>\n          )}\n          <Box style={{ flex: '1 0 0', hidden: true }} />\n          <Button onClick={handleCloseShare} color=\"primary\">\n            Done\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={openGist} onClose={handleCloseGist} aria-labelledby=\"alert-dialog-title\" maxWidth=\"md\" fullWidth>\n        <DialogTitle id=\"alert-dialog-title\">Share with Gist</DialogTitle>\n        {shareError && (\n          <DialogContent style={{ color: theme.palette.common.red }}>\n            Your FSH content is too long to share directly. Please use a Gist to share.\n          </DialogContent>\n        )}\n        <DialogContent>\n          Create a{' '}\n          <Link id=\"gistURL\" href=\"https://gist.github.com/\" target=\"_blank\">\n            Gist\n          </Link>{' '}\n          and paste the URL below to generate a shareable FSH Online link.\n          <TextField id=\"gistURLText\" label=\"Gist URL\" fullWidth onChange={updateGistLink} />\n        </DialogContent>\n        <DialogActions style={{ bottom: 0, right: 0 }}>\n          <Button onClick={handleCloseGist} color=\"primary\">\n            Cancel\n          </Button>\n          <Box style={{ flex: '1 0 0', hidden: true }} />\n          <CopyToClipboard text={props.shareText} onCopy={handleFSHcopy} style={{ align: 'left' }}>\n            <Button color={fshCopied ? 'secondary' : 'primary'}>{fshCopyButton}</Button>\n          </CopyToClipboard>\n          <Button color=\"primary\" onClick={handleGenerateGistLink} style={{ align: 'left' }}>\n            Generate Link from Gist\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={openGistError} onClose={handleCloseGistError} aria-labelledby=\"alert-dialog-title\" maxWidth=\"lg\">\n        <DialogTitle id=\"alert-dialog-title\">Error Creating Gist Link</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Could not generate a link from your Gist URL. Ensure the URL is valid.</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseGistError} color=\"primary\" autoFocus>\n            Keep Swimming!\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { useState, useContext } from 'react';\nimport clsx from 'clsx';\nimport { upperFirst } from 'lodash';\nimport { Button, Box, Drawer, IconButton, Tooltip } from '@material-ui/core';\nimport { ChevronLeft, ChevronRight, Delete, FileCopy, SaveAlt } from '@material-ui/icons';\nimport { UnControlled as ReactCodeMirror } from 'react-codemirror2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CodeMirror from 'codemirror';\nimport { ExpandedConsoleContext } from '../App';\nimport ShareLink from './ShareLink';\nimport '../style/CodeMirrorComponent.css';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\nrequire('codemirror/addon/mode/simple');\nrequire('codemirror/addon/edit/closebrackets');\nrequire('codemirror/addon/display/placeholder');\nrequire('codemirror/addon/comment/comment');\nrequire('codemirror/addon/fold/foldgutter');\nrequire('codemirror/addon/fold/brace-fold');\nrequire('codemirror/mode/xml/xml');\nrequire('codemirror/mode/javascript/javascript');\nrequire('codemirror/addon/scroll/simplescrollbars');\n\n// Define FSH syntax highlighting\n// Regular expressions from https://github.com/standardhealth/vscode-language-fsh/blob/master/syntaxes/fsh.tmLanguage.json\nCodeMirror.defineSimpleMode('fsh', {\n  meta: {\n    lineComment: '//'\n  },\n  start: [\n    // The regex matches the token, the token property contains the type\n    {\n      regex: /\"(?:[^\\\\]|\\\\.)*?(?:\"|$)/,\n      token: 'atom'\n    },\n    {\n      regex:\n        /\\b(Alias|Characteristics|Context|CodeSystem|Expression|Extension|Description|Id|Instance|InstanceOf|Invariant|Logical|Mapping|Mixins|Parent|Profile|Resource|RuleSet|Severity|Source|Target|Title|Usage|ValueSet|XPath)(?=\\s*:)\\b/,\n      token: 'keyword'\n    },\n    {\n      // NOTE: Original regex has (?<=\\s|^) at start and (?=\\s) at the end, and (?<=\\\\bfrom\\\\s*) before 'system'.\n      // However, there are known shortcomings with look ahead/look behind with the simple mode approach\n      // NOTE: \"from system\" must come before \"from\" in order to properly match the full phrase.\n      regex:\n        /(\\s|^)(and|codes|contains|descendent-of|exclude|exists|from system|from|generalizes|include|in|insert|is-a|is-not-a|named|not-in|obeys|only|or|regex|units|valueset|where|D|MS|N|SU|TU|\\\\?!)(\\s|$)/,\n      token: 'def'\n    },\n    {\n      regex: /(\\(\\s*)(exactly|example|extensible|preferred|required)(\\s*\\))/,\n      token: 'def'\n    },\n    {\n      regex: /\\b(CodeableReference|Reference|Canonical)\\s*\\(/,\n      push: 'closingParen', // Matches the closing parenthesis while not highlighting the content between ( )\n      token: 'atom'\n    },\n    {\n      regex: /\\*|->|=|\\+|:/,\n      token: 'def'\n    },\n    {\n      regex: /\\b(https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*))\\b/,\n      token: 'atom'\n    },\n    {\n      // NOTE: Original regex has (?<=\\s|^) at start and (?=\\s) at end\n      regex: /(\\s|^)(true|false)(\\s|$)/,\n      token: 'string'\n    },\n    {\n      // NOTE: Original regex has (?<=\\s|^) and (?=\\s) at end\n      regex: /(\\s|^)(-?\\d+(\\.\\d+)?)(\\s|^)/, // numbers\n      token: 'string'\n    },\n    {\n      regex: /#\"(?:\\\\.|[^\\\\\"])*\"/, // #\"quoted code\"\n      token: 'string'\n    },\n    {\n      regex: /#[^\\s]*/, // #code\n      token: 'string'\n    },\n    {\n      regex: /'.*'/, // 'ucum'\n      token: 'string'\n    },\n    // The following two regex should be combined into: /(\\s|^)\\/\\/.*/\n    // However, the ^ doesn't work as expected. See sol section: https://codemirror.net/demo/simplemode.html\n    // Instead, we break them into two separate cases:\n    // the comment is preceded by whitespace and the comment is at the start of a line.\n    { regex: /\\s\\/\\/.*/, token: 'comment' },\n    { regex: /\\/\\/.*/, token: 'comment', sol: true },\n    // Start of multiline comment\n    { regex: /\\/\\*/, token: 'comment', next: 'comment' }\n  ],\n  closingParen: [\n    {\n      regex: /\\)/,\n      pop: true,\n      token: 'atom'\n    }\n  ],\n  comment: [\n    { regex: /.*?\\*\\//, token: 'comment', next: 'start' },\n    { regex: /.*/, token: 'comment' }\n  ]\n});\n\nconst drawerWidth = 200;\n\nconst useStyles = makeStyles((theme) => ({\n  box: {\n    height: '100%'\n  },\n  header: {\n    fontFamily: 'Open Sans',\n    color: theme.palette.common.white,\n    background: theme.palette.common.darkerGrey,\n    padding: '0px',\n    paddingLeft: '29px', // width of code mirror gutter\n    height: '34px', // 24px + 10px of padding is total height\n    display: 'flex',\n    justifyContent: 'space-between',\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  headerShift: {\n    width: `calc(100% - ${drawerWidth}px - 29px)`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: drawerWidth\n  },\n  headerLabel: {\n    lineHeight: '34px',\n    float: 'left',\n\n    // Ellipse for long resource ids\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  headerActionGroup: {\n    paddingRight: '10px'\n  },\n  headerActions: {\n    alignItems: 'center',\n    display: 'flex'\n  },\n  iconButton: {\n    color: theme.palette.common.white,\n    padding: '3px'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    border: 'none',\n    // necessary for content to be TopBar and in line with editor\n    height: 'calc(100vh - 116px - 34px)',\n    top: '116px'\n  },\n  drawerPaperExpandedConsole: {\n    height: 'calc(100vh - 116px - 300px)'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    // Color to match header\n    color: theme.palette.common.white,\n    background: theme.palette.common.darkerGrey,\n    height: '34px', // Same height as headers on CodeMirror editors\n    minHeight: '34px'\n  },\n  drawerHeaderIcon: {\n    padding: '0px',\n    color: theme.palette.common.white,\n    background: theme.palette.success.main,\n    '&:hover': {\n      background: theme.palette.success.light\n    },\n    borderRadius: 0,\n    height: '100%',\n    width: '34px',\n    minWidth: '34px' // width and minWidth match the height so button is a square\n  },\n  content: {\n    flexGrow: 1,\n    width: '100%',\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  contentShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: 0\n  }\n}));\n\nexport default function CodeMirrorComponent(props) {\n  const classes = useStyles();\n  const expandedConsoleContext = useContext(ExpandedConsoleContext);\n  const [drawerOpen, setDrawerOpen] = useState(true);\n\n  const handleDrawerOpen = () => {\n    setDrawerOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setDrawerOpen(false);\n  };\n\n  //Updates both the text state with the codemirror value\n  function updateText(text) {\n    props.updateTextValue(text);\n  }\n\n  const renderActionIcon = (Icon, label, onClick, style = {}) => {\n    return (\n      <Tooltip title={upperFirst(label)} placement=\"top\" arrow>\n        <IconButton name={label} className={classes.iconButton} aria-label={label} onClick={onClick}>\n          <Icon fontSize=\"small\" style={style} />\n        </IconButton>\n      </Tooltip>\n    );\n  };\n\n  const renderActionIcons = () => {\n    // Render only specified actions\n    return (\n      <div className={classes.headerActions}>\n        <div className={classes.headerActionGroup}>\n          {props.mode === 'fsh' && !props.isExamples && <ShareLink shareText={props.value} config={props.config} />}\n          {props.copy && renderActionIcon(FileCopy, 'copy', () => {})}\n          {props.save && renderActionIcon(SaveAlt, 'save', props.save)}\n          {props.delete && renderActionIcon(Delete, 'delete', props.delete)}\n        </div>\n        {props.renderDrawer && !drawerOpen && (\n          <IconButton name=\"expand\" className={classes.drawerHeaderIcon} aria-label=\"expand\" onClick={handleDrawerOpen}>\n            <ChevronLeft />\n          </IconButton>\n        )}\n      </div>\n    );\n  };\n\n  const renderDrawer = () => {\n    return (\n      <Drawer\n        className={classes.drawer}\n        data-testid={'editor-drawer'}\n        variant=\"persistent\"\n        anchor=\"right\"\n        open={drawerOpen}\n        classes={{\n          paper: clsx(classes.drawerPaper, expandedConsoleContext && classes.drawerPaperExpandedConsole)\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <Button\n            name=\"collapse\"\n            aria-label=\"collapse\"\n            className={classes.drawerHeaderIcon}\n            onClick={handleDrawerClose}\n          >\n            <ChevronRight />\n          </Button>\n        </div>\n        {props.renderDrawer()}\n      </Drawer>\n    );\n  };\n\n  return (\n    <Box className={classes.box}>\n      <div\n        className={clsx(classes.header, {\n          [classes.headerShift]: props.renderDrawer && drawerOpen\n        })}\n      >\n        <div title={props.name} className={classes.headerLabel}>\n          {props.name}\n        </div>\n        {renderActionIcons()}\n      </div>\n      <ReactCodeMirror\n        className={clsx('react-codemirror2', props.renderDrawer && classes.content, {\n          [classes.contentShift]: props.renderDrawer && drawerOpen\n        })}\n        value={props.initialText}\n        options={{\n          mode: props.mode,\n          theme: 'material',\n          placeholder: props.placeholder,\n          scrollbarStyle: 'overlay',\n          autoCloseBrackets: true,\n          lineNumbers: true,\n          foldGutter: true,\n          readOnly: props.isExamples,\n          gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n          extraKeys: {\n            Tab: (cm) => {\n              // Replace tab character with two spaces\n              // Example described here: https://codemirror.net/doc/manual.html#keymaps\n              cm.replaceSelection('  ');\n            },\n            'Ctrl-/': 'toggleComment',\n            'Cmd-/': 'toggleComment',\n            'Ctrl-Q': (cm) => {\n              cm.foldCode(cm.getCursor());\n            }\n          },\n          lineWrapping: props.isLineWrapped\n        }}\n        onChange={(editor, data, value) => {\n          updateText(value);\n        }}\n      />\n      {props.renderDrawer && renderDrawer()}\n    </Box>\n  );\n}\n","const BitlyClient = require('bitly').BitlyClient;\nconst bitly = new BitlyClient(process.env.REACT_APP_BITLY_KEY);\n\nexport async function generateLink(longLink) {\n  return new Promise((resolve) => {\n    bitly\n      .shorten(longLink)\n      .then(function (result) {\n        resolve({ link: result.link, errorNeeded: false });\n      })\n      .catch(function (error) {\n        if (process.env.REACT_APP_BITLY_KEY == null) {\n          console.error(\n            'Error: REACT_APP_BITLY_KEY needs to be set as an environment variable in order to share FSH Online links.'\n          );\n          resolve({ link: undefined, errorNeeded: true });\n        } else {\n          resolve({ link: undefined, errorNeeded: true });\n        }\n      });\n  });\n}\n\nexport async function expandLink(encodedFsh) {\n  const bitlyURL = `https://bit.ly/${encodedFsh.text}`;\n  return new Promise((resolve) => {\n    bitly\n      .expand(bitlyURL)\n      .then(function (result) {\n        resolve(result);\n      })\n      .catch(function (error) {\n        console.error(error);\n      });\n  });\n}\n","import React from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core';\n\nexport default function DeleteConfirmationModal(props) {\n  return (\n    <Dialog open={props.isOpen} onClose={props.handleCloseModal} aria-labelledby=\"delete-confirmation-dialog\">\n      <DialogTitle id=\"delete-confirmation-dialog-title\">Delete {props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to delete {props.item}? This action cannot be undone.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={props.handleCloseModal} color=\"primary\" autoFocus>\n          Cancel\n        </Button>\n        <Button onClick={props.handleDelete} color=\"secondary\">\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport FileSaver from 'file-saver';\nimport { groupBy, isEqual } from 'lodash';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { Button, List, ListItem, Tooltip } from '@material-ui/core';\nimport { Add, ErrorOutline } from '@material-ui/icons';\nimport CodeMirrorComponent from './CodeMirrorComponent';\nimport DeleteConfirmationModal from './DeleteConfirmationModal';\n\nconst useStyles = makeStyles((theme) => ({\n  fileTreeContent: {\n    overflowY: 'scroll',\n    height: '100%'\n  },\n  button: {\n    color: theme.palette.common.white,\n    background: theme.palette.success.main,\n    '&:hover': {\n      background: theme.palette.success.dark\n    },\n    border: '8px solid white',\n    fontSize: '13px',\n    width: '100%'\n  },\n  list: {\n    padding: '8px',\n    paddingLeft: '0px',\n    paddingBottom: '0px',\n    fontSize: '13px'\n  },\n  listItemError: {\n    paddingTop: '5px',\n    paddingBottom: '5px',\n    margin: 0\n  },\n  listItem: {\n    background: theme.palette.common.lightestGrey,\n    paddingTop: '5px',\n    paddingBottom: '5px',\n    marginTop: '5px',\n    marginBottom: '5px',\n    paddingLeft: '5px',\n    // paddingRight is driven by ListItem (16px)\n    margin: 0,\n    '&:hover': {\n      background: theme.palette.common.lightGrey\n    },\n\n    // Ellipse for long resource ids\n    display: 'block',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  listItemSelected: {\n    background: theme.palette.common.editorGrey, // editor background color\n    color: theme.palette.common.white,\n    '&:hover': {\n      background: theme.palette.common.darkestGrey\n    }\n  },\n  listHeader: {\n    padding: '5px',\n    paddingLeft: '15px'\n  },\n  listIcon: {\n    color: theme.palette.success.main,\n    verticalAlign: 'middle',\n    fontSize: '13px',\n    paddingLeft: '3px',\n    paddingRight: '3px'\n  },\n  listIconError: {\n    color: theme.palette.common.red\n  },\n  blankIcon: {\n    paddingLeft: '19px' // width of icon\n  }\n}));\n\nconst checkFshType = (def) => {\n  // The criteria in this function is based on isSDForInstance in GoFSH (LakeOfFHIR.ts)\n  // A Profile has kind \"resource\", \"complex-type\", or \"primitive-type\" and derivation \"constraint\".\n  // An Extension has kind \"complex-type\", derivation \"constraint\", and type \"Extension\". It's a special case of Profile.\n  // A Logical has kind \"logical\" and derivation \"specialization\".\n  // A Resource has kind \"resource\" and derivation \"specialization\".\n  // Any other combination of values for kind and derivation represents an Instance.\n  if (def.resourceType === 'ValueSet' || def.resourceType === 'CodeSystem') {\n    return def.resourceType;\n  } else if (def.resourceType === 'StructureDefinition') {\n    if (def.derivation === 'specialization') {\n      if (def.kind === 'resource') {\n        return 'Resource';\n      } else if (def.kind === 'logical') {\n        return 'Logical Model';\n      }\n    } else if (def.derivation === 'constraint') {\n      if (def.kind === 'complex-type' && def.type === 'Extension') {\n        return 'Extension';\n      } else if (['resource', 'complex-type', 'primitive-type', 'logical'].includes(def.kind)) {\n        return 'Profile';\n      }\n    }\n  }\n\n  // We could have an instance of a SD that can't be a Profile, Extension, Logical, or Resource\n  // So we want to check for any resource that hasn't already been categorized\n  if (def.resourceType != null) {\n    return 'Instance';\n  }\n\n  // Otherwise we don't know the type. This will default to 'Unknown Type' if it is missing.\n  return null;\n};\n\nconst checkIdToDisplay = (def) => {\n  if (def.id) {\n    return def.id;\n  }\n  if (def.resourceType) {\n    // Logical Model instances don't always have an id, so fall back to last part of the resourceType\n    // All other definitions are StructureDefinitions/ValueSets/CodeSystems, which are guaranteed to have id\n    // so the only time this case is reached is through Logical Model Instances or someone typing/removing an id\n    return `Instance of ${def.resourceType.substring(def.resourceType.lastIndexOf('/') + 1)}`;\n  }\n  // If can't determine an id or a best guess from the resourceType, just return 'Untitled'\n  return 'Untitled';\n};\n\n// Flatten the package so we can render and navigate it more easily,\n// but keep high level attributes we'll need accessible\nconst getIterablePackage = (defsPackage) => {\n  const defArray = [\n    ...defsPackage.profiles,\n    ...defsPackage.extensions,\n    ...defsPackage.logicals,\n    ...defsPackage.resources,\n    ...defsPackage.instances,\n    ...defsPackage.valueSets,\n    ...defsPackage.codeSystems\n  ];\n  return defArray.map((def) => ({\n    resourceType: checkFshType(def),\n    id: checkIdToDisplay(def),\n    def: JSON.stringify(def, null, 2)\n  }));\n};\n\nexport default function JSONOutput(props) {\n  const classes = useStyles();\n  const [initialText, setInitialText] = useState('');\n  const [fhirDefinitions, setFhirDefinitions] = useState([{ resourceType: null, id: 'Untitled', def: null }]);\n  const { setShowNewText, updateTextValue: propsUpdateText } = props;\n  const [currentDef, setCurrentDef] = useState(0);\n  const [defsWithErrors, setDefsWithErrors] = useState([]);\n  const [openDeleteConfirmation, setOpenDeleteConfirmation] = useState(false);\n\n  useEffect(() => {\n    // This case represents when we receive a new Package from SUSHI\n    if (props.showNewText && !isEqual(props.text, [''])) {\n      setShowNewText(false); // Indicate that we no longer have new data we need to load so we don't come back here too early\n      let packageJSON;\n      try {\n        packageJSON = JSON.parse(props.text);\n      } catch (e) {\n        packageJSON = {\n          profiles: [],\n          extensions: [],\n          logicals: [],\n          resources: [],\n          instances: [],\n          valueSets: [],\n          codeSystems: []\n        };\n      }\n      const iterablePackage = getIterablePackage(packageJSON);\n      setFhirDefinitions(iterablePackage);\n      setCurrentDef(0);\n      setInitialText(iterablePackage.length > 0 ? iterablePackage[0].def : '');\n      propsUpdateText(iterablePackage); // The value of text kept on props should be the iterable and stringified package\n    } else if (props.isWaiting) {\n      setInitialText(null); // Reset the text to null when loading to reset the editor and display placeholder text\n      setFhirDefinitions([]); // Reset FHIR definitions to clear out file tree\n    }\n  }, [props.text, props.showNewText, props.isWaiting, propsUpdateText, setShowNewText]);\n\n  const updateTextValue = (text) => {\n    // We're waiting for a new package to load, so we don't want the editor to update yet\n    if (props.isWaiting) return;\n\n    // Update the definition we're currently editing\n    const updatedDefs = [...fhirDefinitions];\n\n    // Check if there is a JSON syntax error in the editor\n    try {\n      // If the editor is blank, we want to consider it an empty JSON object so that it is valid JSON\n      const latestJSON = text === '' ? {} : JSON.parse(text);\n      // If there was an error, mark it as resolved\n      if (defsWithErrors.includes(currentDef)) {\n        const newErrors = [...defsWithErrors];\n        newErrors.splice(defsWithErrors.indexOf(currentDef), 1);\n        setDefsWithErrors(newErrors);\n      }\n\n      // If it's new, set metadata (definition text is set below)\n      if (!fhirDefinitions[currentDef]) {\n        updatedDefs[currentDef] = {\n          resourceType: checkFshType(latestJSON),\n          id: checkIdToDisplay(latestJSON)\n        };\n      }\n\n      // Update resource type if it has changed\n      if (!fhirDefinitions[currentDef] || latestJSON.resourceType !== fhirDefinitions[currentDef].resourceType) {\n        updatedDefs[currentDef].resourceType = checkFshType(latestJSON);\n      }\n\n      // Update id if it has changed or it is new\n      if (!fhirDefinitions[currentDef] || latestJSON.id !== fhirDefinitions[currentDef].id) {\n        updatedDefs[currentDef].id = checkIdToDisplay(latestJSON);\n      }\n    } catch (e) {\n      // Invalid JSON typed. Keep track of index.\n      if (!defsWithErrors.includes(currentDef)) {\n        const newErrors = [...defsWithErrors];\n        newErrors.push(currentDef);\n        setDefsWithErrors(newErrors);\n      }\n    }\n\n    // Update the text - regardless if it was valid JSON\n    if (updatedDefs[currentDef]) {\n      updatedDefs[currentDef].def = text;\n    }\n    setFhirDefinitions(updatedDefs);\n    props.updateTextValue(updatedDefs);\n\n    // This is a bit of a hack to make sure the editor can be reset by a setInitialText(null)\n    if (initialText === null) {\n      setInitialText(text);\n    }\n  };\n\n  const addDefinition = () => {\n    const updatedDefs = [...fhirDefinitions];\n    updatedDefs.push({ resourceType: null, id: 'Untitled', def: null });\n    setCurrentDef(updatedDefs.length - 1);\n    setFhirDefinitions(updatedDefs);\n    setInitialText(null);\n    props.updateTextValue(updatedDefs);\n  };\n\n  const handleCloseAndDelete = () => {\n    const index = currentDef;\n    const updatedDefs = [...fhirDefinitions];\n    updatedDefs.splice(index, 1); // Remove definition to be deleted\n    if (updatedDefs.length === 0) {\n      // Ensure list is not empty so there is always a definition in the file tree\n      updatedDefs.push({ resourceType: null, id: 'Untitled', def: null });\n    }\n    setFhirDefinitions(updatedDefs);\n\n    // If we deleted the currently viewed definition or any before it, update it\n    if (index <= currentDef) {\n      let newCurrentDef = 0;\n      if (index < currentDef) {\n        newCurrentDef = currentDef - 1;\n      }\n      setCurrentDef(newCurrentDef);\n      const newCurrentDefText = updatedDefs.length > 0 ? updatedDefs[newCurrentDef].def : null;\n      setInitialText(newCurrentDefText);\n    }\n\n    // Update error tracking\n    const newErrors = [...defsWithErrors];\n    if (defsWithErrors.includes(index)) {\n      // If the definition had an error, remove it from the list\n      newErrors.splice(defsWithErrors.indexOf(index), 1);\n    }\n    // Shift any indices that came after the deleted definition to properly track errors\n    const shiftedErrors = newErrors.map((i) => (i < index ? i : i - 1));\n    setDefsWithErrors(shiftedErrors);\n\n    setOpenDeleteConfirmation(false);\n    props.updateTextValue(updatedDefs);\n  };\n\n  const handleOpenDeleteConfirmation = () => {\n    setOpenDeleteConfirmation(true);\n  };\n\n  const handleCloseDeleteConfirmation = () => {\n    setOpenDeleteConfirmation(false);\n  };\n\n  const handleSave = (def, defaultName) => {\n    let resourceObj;\n    try {\n      resourceObj = JSON.parse(def);\n    } catch {\n      /* Ignore errors and just default to name without resourceType */\n    }\n    FileSaver.saveAs(\n      new Blob([def]),\n      resourceObj?.resourceType && resourceObj?.id\n        ? `${resourceObj.resourceType}-${resourceObj.id}.json`\n        : `${name}.json`\n    );\n  };\n\n  const renderDeleteModal = () => {\n    const defToDelete = fhirDefinitions[currentDef];\n    if (!defToDelete) {\n      return;\n    }\n    const type = defToDelete.resourceType || 'Unknown Type';\n    const id = defToDelete.id || 'Untitled';\n    return (\n      <DeleteConfirmationModal\n        title={'FHIR JSON'}\n        item={`${type} ${id}`}\n        isOpen={openDeleteConfirmation}\n        handleCloseModal={handleCloseDeleteConfirmation}\n        handleDelete={handleCloseAndDelete}\n      />\n    );\n  };\n\n  const renderFileTreeView = () => {\n    const order = [\n      'Profiles',\n      'Extensions',\n      'Logical Models',\n      'Resources',\n      'ValueSets',\n      'CodeSystems',\n      'Instances',\n      'Unknown Type'\n    ];\n    const grouped = groupBy(fhirDefinitions, (val) => {\n      if (val && val.resourceType) return `${val.resourceType}s`;\n      return 'Unknown Type';\n    });\n\n    return Object.keys(grouped)\n      .sort((a, b) => order.indexOf(a) - order.indexOf(b)) // Sort so we keep a defined order of types in the tree\n      .map((key) => {\n        return (\n          <List component=\"nav\" key={key} className={classes.list}>\n            <div className={classes.listHeader}>{key}</div>\n            {grouped[key]\n              .sort((a, b) => {\n                const aId = a.id ? a.id : 'Untitled'; // Treat missing or blank ids as \"Untitled\"\n                const bId = b.id ? b.id : 'Untitled';\n                return aId.toLowerCase() < bId.toLowerCase() ? -1 : aId.toLowerCase() > bId.toLowerCase() ? 1 : 0;\n              }) // Sort ids alphabetically\n              .map((def, i) => {\n                const currentIndex = fhirDefinitions.indexOf(def);\n                const isError = defsWithErrors.includes(currentIndex);\n                return (\n                  <ListItem\n                    button\n                    key={i}\n                    title={def?.id || 'Untitled'}\n                    data-testid={`${key}-defId`}\n                    className={clsx(\n                      classes.listItem,\n                      isError && classes.listItemError,\n                      currentIndex === currentDef && classes.listItemSelected\n                    )}\n                    onClick={() => {\n                      setCurrentDef(currentIndex);\n                      setInitialText(def.def);\n                    }}\n                  >\n                    {defsWithErrors.includes(currentIndex) ? (\n                      <Tooltip title=\"Invalid JSON\" placement=\"top\" arrow>\n                        <ErrorOutline className={clsx(classes.listIcon, classes.listIconError)} />\n                      </Tooltip>\n                    ) : (\n                      <span className={classes.blankIcon} />\n                    )}\n                    {def?.id || 'Untitled'}\n                  </ListItem>\n                );\n              })}\n          </List>\n        );\n      });\n  };\n\n  const renderDrawer = () => {\n    return (\n      <>\n        <Button className={classes.button} startIcon={<Add />} onClick={addDefinition}>\n          New JSON Editor\n        </Button>\n        <div className={classes.fileTreeContent}>{renderFileTreeView()}</div>\n      </>\n    );\n  };\n\n  const displayValue = fhirDefinitions.length > 0 ? fhirDefinitions[currentDef].def : null;\n  const name = `${fhirDefinitions.length > 0 ? fhirDefinitions[currentDef].id : 'Untitled'}`;\n\n  return (\n    <>\n      <CodeMirrorComponent\n        name={`FHIR JSON: ${name}`}\n        value={displayValue}\n        initialText={initialText}\n        updateTextValue={updateTextValue}\n        mode={'application/json'}\n        placeholder={\n          props.isWaiting\n            ? 'Loading...'\n            : 'Paste or edit single FHIR JSON artifact here... \\nCreate additional FHIR JSON artifacts to the right.'\n        }\n        renderDrawer={renderDrawer}\n        isExamples={false}\n        delete={handleOpenDeleteConfirmation}\n        save={() => handleSave(displayValue, name)}\n        isLineWrapped={props.isLineWrapped}\n      />\n      {openDeleteConfirmation && renderDeleteModal()}\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport FileSaver from 'file-saver';\nimport CodeMirrorComponent from './CodeMirrorComponent';\nimport DeleteConfirmationModal from './DeleteConfirmationModal';\n\nexport default function FSHOutput(props) {\n  const [openDeleteModal, setOpenDeleteModal] = useState(false);\n\n  const handleOpenDeleteModal = () => {\n    setOpenDeleteModal(!openDeleteModal);\n  };\n\n  const handleCloseAndDelete = () => {\n    setOpenDeleteModal(false);\n    props.setInitialText('');\n  };\n\n  const handleSave = () => {\n    FileSaver.saveAs(new Blob([props.text]), 'FSH.fsh');\n  };\n\n  return (\n    <>\n      <CodeMirrorComponent\n        name={'FSH'}\n        isExamples={false}\n        value={props.text}\n        initialText={props.initialText}\n        updateTextValue={props.updateTextValue}\n        mode={'fsh'}\n        placeholder={props.isWaiting ? 'Loading...' : 'Paste or edit FSH here...'}\n        delete={handleOpenDeleteModal}\n        save={handleSave}\n        config={props.config}\n        isLineWrapped={props.isLineWrapped}\n      />\n      {openDeleteModal && (\n        <DeleteConfirmationModal\n          title={'FHIR Shorthand'}\n          item={'all FSH'}\n          isOpen={openDeleteModal}\n          handleCloseModal={handleOpenDeleteModal}\n          handleDelete={handleCloseAndDelete}\n        />\n      )}\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Box, Button, IconButton } from '@material-ui/core';\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme) => ({\n  consoleControls: {\n    background: theme.palette.common.darkestGrey,\n    height: '34px',\n    boxSizing: 'border-box',\n    display: 'flex;',\n    alignItems: 'center',\n    justifyContent: 'left'\n  },\n  box: {\n    paddingLeft: '29px', // Same padding as header of code mirror\n    color: theme.palette.common.white,\n    background: theme.palette.common.darkestGrey,\n    height: 'calc(100% - 34px)',\n    overflow: 'scroll',\n    boxSizing: 'border-box'\n  },\n  button: {\n    marginRight: '10px',\n    color: theme.palette.common.white,\n    textTransform: 'none',\n    padding: 0\n  },\n  problemsButton: {\n    padding: 0,\n    color: theme.palette.common.white,\n    textTransform: 'none'\n  },\n  expandIcon: {\n    width: '29px', // Lines up with padding,\n    color: theme.palette.common.white,\n    padding: 0\n  },\n  pre: {\n    margin: '0px'\n  },\n  circle: {\n    'border-radius': '50%',\n    'border-style': 'solid',\n    'border-width': '2px',\n    'min-width': '20px',\n    height: '20px',\n    paddingLeft: 1,\n    paddingRight: 1,\n    background: '#263238',\n    'align-items': 'center',\n    display: 'flex',\n    marginLeft: 4,\n    'justify-content': 'center',\n    padding: 0\n  }\n}));\n\nexport default function Console(props) {\n  const classes = useStyles();\n  const [problemsView, setProblemsView] = useState(false);\n  const { problemCount, setExpandConsole } = props;\n\n  useEffect(() => {\n    // When props.problemCount changes and if there is a problem, make sure to open the console.\n    // If the problemCount is 0, we don't need to open it.\n    // The console should be able to be closed, so don't track whether the props.expandConsole value has changed.\n    if (problemCount) {\n      setExpandConsole(true);\n    }\n  }, [problemCount, setExpandConsole]);\n\n  const toggleExpandConsole = () => {\n    props.setExpandConsole(!props.expandConsole);\n  };\n\n  const setMessagesConsole = () => {\n    setProblemsView(false);\n    props.setExpandConsole(true);\n  };\n\n  const setProblemsConsole = () => {\n    setProblemsView(true);\n    props.setExpandConsole(true);\n  };\n\n  return (\n    <>\n      <Box className={classes.consoleControls}>\n        <IconButton\n          onClick={toggleExpandConsole}\n          aria-label={props.expandConsole ? 'collapse console' : 'expand console'}\n          className={classes.expandIcon}\n        >\n          {props.expandConsole ? <ExpandMore /> : <ExpandLess />}\n        </IconButton>\n        <Button onClick={setMessagesConsole} className={classes.button}>\n          <p\n            style={{\n              borderBottom: props.expandConsole && !problemsView ? '1px solid white' : 'none',\n              margin: '0'\n            }}\n          >\n            Console\n          </p>\n        </Button>\n        <Button onClick={setProblemsConsole} className={classes.problemsButton}>\n          <p\n            style={{\n              borderBottom:\n                props.expandConsole && problemsView\n                  ? `1px solid ${!props.problemCount ? 'white' : props.problemColor}`\n                  : 'none',\n              margin: '0'\n            }}\n          >\n            Problems\n          </p>\n          <div\n            className={classes.circle}\n            style={{ borderColor: `${!props.problemCount ? 'white' : props.problemColor}` }}\n          >\n            {props.problemCount}\n          </div>\n        </Button>\n      </Box>\n      <Box style={{ display: props.expandConsole ? 'block' : 'none' }} className={classes.box}>\n        {problemsView\n          ? props.problemMessages.map((message, i) => {\n              return (\n                <pre key={i} className={classes.pre}>\n                  {message}\n                </pre>\n              );\n            })\n          : props.consoleMessages.map((message, i) => {\n              return (\n                <pre key={i} className={classes.pre}>\n                  {message}\n                </pre>\n              );\n            })}\n      </Box>\n    </>\n  );\n}\n","import { utils as sushiUtils } from 'fsh-sushi';\nimport { utils as gofshUtils } from 'gofsh';\n\n// Default the logger to SUSHI's logger, but support switching\n// between the loggers so that any file can import one logger\n// and have the stats tracked correctly\nexport let fshOnlineLogger = sushiUtils.logger;\nexport function setCurrentLogger(loggerName) {\n  if (loggerName === 'sushi') {\n    fshOnlineLogger = sushiUtils.logger;\n  } else if (loggerName === 'gofsh') {\n    fshOnlineLogger = gofshUtils.logger;\n  }\n}\n","import tarStream from 'tar-stream';\nimport zlib from 'zlib';\nimport https from 'https';\nimport { fshOnlineLogger as logger } from './logger';\n\nexport function unzipDependencies(resources, dependency, id) {\n  let returnPackage = { resourceArr: resources, emptyDependencies: [] };\n  return new Promise((resolve) => {\n    https\n      .get(`https://packages.fhir.org/${dependency}/${id}`, function (res) {\n        const extract = tarStream.extract();\n        // Unzip files\n        extract.on('entry', function (header, stream, next) {\n          let buf = '';\n          stream.on('data', function (chunk) {\n            buf += chunk.toString();\n          });\n          stream.on('end', function () {\n            try {\n              const resource = JSON.parse(buf);\n              if (resource.resourceType) {\n                returnPackage.resourceArr.push(resource);\n              }\n            } catch {} //eslint-disable-line no-empty\n            next();\n          });\n          stream.resume();\n        });\n        extract.on('finish', function () {\n          resolve(returnPackage);\n        });\n        if (res.statusCode < 400) {\n          res.pipe(zlib.createGunzip()).pipe(extract);\n          logger.info(`Downloaded ${dependency}#${id}`);\n        } else {\n          if (id === 'current' || id === 'dev') {\n            logger.error(`FSHOnline does not currently support \"current\" or \"dev\" package versions`);\n          } else {\n            logger.error(`Your dependency ${dependency}#${id} could not be loaded. Your output may be invalid.`);\n            returnPackage.emptyDependencies.push(`${dependency}${id}`);\n          }\n          resolve(returnPackage);\n        }\n      })\n      .on('error', (e) => {\n        logger.error('An error occurred while downloading FHIR packages. Your output may be invalid: ', e);\n        returnPackage.emptyDependencies.push(`${dependency}${id}`);\n        resolve(returnPackage);\n      });\n  });\n}\n\nexport function loadDependenciesInStorage(database, resources, dependency, id) {\n  return new Promise((resolve, reject) => {\n    // Loads parsed json into indexDB\n    const transaction = database.transaction([`${dependency}${id}`], 'readwrite');\n    transaction.oncomplete = () => {\n      resolve();\n    };\n    transaction.onerror = (event) => {\n      reject(event);\n    };\n    const objectStore = transaction.objectStore(`${dependency}${id}`, { keyPath: ['id', 'resourceType'] });\n    resources.forEach((res) => {\n      if (res.id && res.resourceType) {\n        objectStore.put(res);\n      }\n    });\n  });\n}\n\nexport function loadAsFHIRDefs(FHIRdefs, database, dependency, id) {\n  // Convert database data into FHIR Definitions\n  return new Promise((resolve, reject) => {\n    let displayLoaded = false;\n    const getData = database\n      .transaction([`${dependency}${id}`], 'readonly')\n      .objectStore(`${dependency}${id}`, { keyPath: ['id', 'resourceType'] })\n      .openCursor();\n    getData.onerror = function () {\n      reject('There is an error getting data out!');\n    };\n    getData.onsuccess = function () {\n      const iterator = getData.result;\n      if (iterator) {\n        displayLoaded = true;\n        FHIRdefs.add(iterator.value);\n        iterator.continue();\n      } else {\n        if (displayLoaded) {\n          logger.info(`Loaded package ${dependency}#${id}`);\n        }\n        resolve(FHIRdefs);\n      }\n    };\n  });\n}\n\nexport function getLatestVersionNumber(dependency) {\n  return new Promise((resolve, reject) => {\n    const { packageId, isAutomatic } = dependency;\n    https.get(`https://packages.fhir.org/${packageId}`, function (res) {\n      let body = '';\n      res.on('data', function (chunk) {\n        body += chunk;\n      });\n      res.on('end', function () {\n        const parsedBody = JSON.parse(body);\n        if (parsedBody?.['dist-tags']?.latest?.length) {\n          resolve(parsedBody['dist-tags'].latest);\n        } else {\n          logger.error(\n            `Could not determine latest released version of ${\n              isAutomatic ? 'automatically-loaded dependency ' : ''\n            }${packageId}.`\n          );\n          reject('no latest version found');\n        }\n      });\n    });\n  });\n}\n","import { flatten } from 'lodash';\nimport { fhirdefs, sushiImport } from 'fsh-sushi';\nimport { getLatestVersionNumber, loadAsFHIRDefs, loadDependenciesInStorage, unzipDependencies } from './Load';\nimport { fshOnlineLogger as logger } from './logger';\n\nconst FHIRDefinitions = fhirdefs.FHIRDefinitions;\nconst FSHTank = sushiImport.FSHTank;\nconst importText = sushiImport.importText;\n\nexport function fillTank(rawFSHes, config) {\n  logger.info('Importing FSH text...');\n  const docs = importText(rawFSHes);\n  return new FSHTank(docs, config);\n}\n\nexport async function loadAndCleanDatabase(defs, dependencies) {\n  dependencies = await resolveDependencies(dependencies);\n\n  let helperUpdate = await checkForDatabaseUpgrade(dependencies);\n  let loadExternalDependenciesReturn = { defs, emptyDependencies: [] };\n\n  if (helperUpdate.shouldUpdate) {\n    loadExternalDependenciesReturn = await loadExternalDependencies(defs, helperUpdate.version + 1, dependencies);\n    defs = loadExternalDependenciesReturn.defs;\n  } else {\n    loadExternalDependenciesReturn = await loadExternalDependencies(defs, helperUpdate.version, dependencies);\n    defs = loadExternalDependenciesReturn.defs;\n  }\n\n  // Cleans out database of any empty objectStores\n  await cleanDatabase(loadExternalDependenciesReturn.emptyDependencies, helperUpdate.version + 2);\n  return defs;\n}\n\nexport function cleanDatabase(emptyDependencies, version, databaseName = 'FSH Playground Dependencies') {\n  const mergedEmpties = flatten(emptyDependencies);\n  return new Promise((resolve, reject) => {\n    let database = null;\n    const OpenIDBRequest = indexedDB.open(databaseName, version);\n    OpenIDBRequest.onsuccess = function (event) {\n      database = event.target.result;\n      database.close();\n      resolve();\n    };\n    OpenIDBRequest.onupgradeneeded = async function (event) {\n      database = event.target.result;\n      let existingObjectStores = database.objectStoreNames;\n\n      // Checks existing objectStores to see if any are empty - failsafe for users who previously had blank objectStores created\n      for (let objectStore of existingObjectStores) {\n        await new Promise((resolve) => {\n          let transaction = event.target.transaction;\n          const objStore = transaction.objectStore(`${objectStore}`).getAll();\n          objStore.onsuccess = (event) => {\n            let items = event.target.result;\n            if (items.length === 0 && !mergedEmpties.includes(objectStore)) {\n              mergedEmpties.push(objectStore);\n            }\n            resolve();\n          };\n        });\n      }\n      // Deletes objectStores that are empty\n      for (let i = 0; i < mergedEmpties.length; i++) {\n        if (existingObjectStores.contains(mergedEmpties[i])) {\n          database.deleteObjectStore(mergedEmpties[i]);\n        }\n      }\n    };\n    OpenIDBRequest.onerror = function (event) {\n      reject(event);\n    };\n  });\n}\n\nexport function checkForDatabaseUpgrade(dependencies, databaseName = 'FSH Playground Dependencies') {\n  let helperReturn = { shouldUpdate: false, version: 1 };\n  return new Promise((resolve, reject) => {\n    let database = null;\n    const OpenIDBRequest = indexedDB.open(databaseName);\n    OpenIDBRequest.onsuccess = function (event) {\n      database = event.target.result;\n      let existingObjectStores = database.objectStoreNames;\n      helperReturn.version = database.version;\n      if (\n        existingObjectStores.length === 0 ||\n        dependencies.length === 0 ||\n        existingObjectStores.contains('resources')\n      ) {\n        helperReturn.shouldUpdate = true;\n        database.close();\n        resolve(helperReturn);\n      } else {\n        dependencies.forEach((dep) => {\n          const { packageId, version } = dep;\n          if (!existingObjectStores.contains(`${packageId}${version}`)) {\n            helperReturn.shouldUpdate = true;\n          }\n        });\n        database.close();\n        resolve(helperReturn);\n      }\n    };\n    OpenIDBRequest.onupgradeneeded = function (event) {\n      database = event.target.result;\n    };\n    OpenIDBRequest.onerror = function (event) {\n      reject(event);\n    };\n  });\n}\n\nexport async function loadExternalDependencies(\n  FHIRdefs,\n  version,\n  dependencies,\n  databaseName = 'FSH Playground Dependencies',\n  shouldUnzip = false\n) {\n  return new Promise((resolve, reject) => {\n    let database = null;\n    let newDependencies = [];\n    let returnPackage = { defs: FHIRDefinitions, emptyDependencies: [] };\n    const OpenIDBRequest = indexedDB.open(databaseName, version);\n\n    // If successful the database exists\n    OpenIDBRequest.onsuccess = async function (event) {\n      database = event.target.result;\n      for (let i = 0; i < dependencies.length; i++) {\n        let resources = [];\n        shouldUnzip = false;\n        const { packageId, version } = dependencies[i];\n        if (newDependencies.includes(`${packageId}${version}`)) {\n          shouldUnzip = true;\n        }\n        if (shouldUnzip) {\n          let unzipReturn = await unzipDependencies(resources, packageId, version);\n          if (unzipReturn.emptyDependencies.length !== 0) {\n            returnPackage.emptyDependencies.push(unzipReturn.emptyDependencies);\n          }\n          await loadDependenciesInStorage(database, unzipReturn.resourceArr, packageId, version);\n        }\n        returnPackage.defs = await loadAsFHIRDefs(FHIRdefs, database, packageId, version);\n      }\n      database.close();\n      resolve(returnPackage);\n    };\n\n    // If upgrade is needed to the version, the database does not yet exist\n    OpenIDBRequest.onupgradeneeded = function (event) {\n      database = event.target.result;\n      let existingObjectStores = database.objectStoreNames;\n      if (existingObjectStores.contains('resources')) {\n        database.deleteObjectStore('resources');\n      }\n      for (let i = 0; i < dependencies.length; i++) {\n        const { packageId, version } = dependencies[i];\n        if (!existingObjectStores.contains(`${packageId}${version}`)) {\n          database.createObjectStore(`${packageId}${version}`, {\n            keyPath: ['id', 'resourceType']\n          });\n          newDependencies.push(`${packageId}${version}`);\n        }\n      }\n    };\n\n    // Checks if there is an error\n    OpenIDBRequest.onerror = function (event) {\n      reject(event);\n    };\n  });\n}\n\nexport async function resolveDependencies(dependencies) {\n  // Replace any 'latest' versions with the latest version number\n  const resolvedDependencies = await Promise.all(dependencies.map(async (dep) => replaceLatestVersion(dep)));\n\n  // Remove any dependencies that can't identify a latest version\n  const filteredResolvedDependencies = resolvedDependencies.filter((d) => d.version !== null);\n\n  return filteredResolvedDependencies;\n}\n\nasync function replaceLatestVersion(dependency) {\n  const { packageId, version } = dependency;\n  let updatedVersion = version;\n  if (version === 'latest') {\n    await getLatestVersionNumber(dependency)\n      .then((latestId) => {\n        updatedVersion = latestId;\n      })\n      .catch(() => {\n        // No 'latest' version could be found, so mark\n        // this to be filtered out of the list to be loaded\n        updatedVersion = null;\n      });\n  }\n  return { packageId, version: updatedVersion };\n}\n","export function sliceDependency(dependencies) {\n  const dependenciesArray = dependencies.split(',');\n  return dependenciesArray\n    .map((dependency) => {\n      const trimmedDep = dependency.trim();\n      if (trimmedDep === '') {\n        return trimmedDep;\n      }\n      const [packageId, version] = trimmedDep.split('#');\n      return { packageId, version };\n    })\n    .filter((d) => d); // filter out any empty strings\n}\n","import { pad, padStart, padEnd } from 'lodash';\nimport { fhirdefs, sushiExport, sushiImport, utils } from 'fsh-sushi';\nimport { gofshExport, processor, utils as gofshUtils } from 'gofsh';\nimport { fillTank, loadAndCleanDatabase } from './Processing';\nimport { sliceDependency } from './helpers';\nimport { fshOnlineLogger as logger, setCurrentLogger } from './logger';\n\nconst FSHTank = sushiImport.FSHTank;\nconst RawFSH = sushiImport.RawFSH;\nconst exportFHIR = sushiExport.exportFHIR;\nconst sushiStats = utils.stats;\nconst gofshStats = gofshUtils.stats;\nconst getRandomPun = utils.getRandomPun;\nconst Type = utils.Type;\nconst FHIRDefinitions = fhirdefs.FHIRDefinitions;\n\n/**\n * Run GoFSH\n * Note: This function is very similar to FhirToFsh in GoFSH.\n * The only difference is that FSH Online must load dependencies into IndexedDB.\n * If FhirToFsh ever supports a way to load dependencies in the browser,\n * we can update this to simply use that function.\n * @param {array} input array of JSON definitions to be processed\n * @param {object} options config options for GoFSH based on user input and defaults\n * dependencies: user set, defaults to []\n * indent: user set, defaults to false\n * @returns {string} the FSH\n */\nexport async function runGoFSH(input, options) {\n  gofshStats.reset();\n  setCurrentLogger('gofsh');\n\n  // Read in the resources as strings\n  const docs = [];\n  input.forEach((resource, i) => {\n    const location = `Input_${i}`;\n    try {\n      resource = JSON.parse(resource);\n      if (!resource.resourceType) {\n        logger.error(`FHIR JSON ${resource.id ?? location} is missing the required \"resourceType\" property`);\n      }\n    } catch (e) {\n      logger.error(`Could not parse ${location} to JSON`);\n      return;\n    }\n    if (gofshUtils.isProcessableContent(resource, location)) {\n      docs.push(new processor.WildFHIR({ content: resource }, location));\n    }\n  });\n\n  // Set up the FHIRProcessor\n  const lake = new processor.LakeOfFHIR(docs);\n  let defs = new FHIRDefinitions();\n  const fisher = new gofshUtils.MasterFisher(lake, defs);\n  const fhirProcessor = new processor.FHIRProcessor(lake, fisher);\n\n  // Process the configuration\n  const goFSHDependencies = options.dependencies.map((d) => d.replace('#', '@')); // GoFSH expects a different format\n  const configuration = fhirProcessor.processConfig(goFSHDependencies ?? []); // The created IG files includes the user specified FHIR Version\n\n  // Load dependencies, including those inferred from an IG file, and those given as input\n  let dependencies = configuration?.config.dependencies\n    ? configuration?.config.dependencies.map((dep) => `${dep.packageId}#${dep.version}`)\n    : [];\n  dependencies = sliceDependency(dependencies.join(','));\n\n  const coreFhirVersion = configuration?.config.fhirVersion[0] ?? '4.0.1';\n  const dependenciesToAdd = addCoreFHIRVersionAndAutomaticDependencies(dependencies, coreFhirVersion);\n  dependencies.push(...dependenciesToAdd);\n\n  defs = await loadAndCleanDatabase(defs, dependencies);\n\n  // Process the FHIR to rules, and then export to FSH\n  const pkg = await gofshUtils.getResources(fhirProcessor, configuration, { indent: options.indent });\n\n  // Return the string of FSH definitions\n  const fsh = new gofshExport.FSHExporter(pkg).apiExport('string');\n  logger.info('Done converting definitions');\n  printGoFSHresults(pkg);\n  return { fsh, config: configuration?.config ?? {} };\n}\n\n/**\n * Load dependencies (FHIR R4) and run SUSHI on provided text\n *\n * @param {string} input - string containing FSH text\n * @param {object} config - Configuration for SUSHI based on user input and defaults\n * config.canonical: user set, defaults to http://example.org\n * config.version: user set, defaults to 1.0.0\n * config.FSHOnly: true\n * config.fhirVersion: [4.0.1] - NOTE fhirVersion array will only have one item in it\n *\n * @returns Package with FHIR resources\n */\nexport async function runSUSHI(input, config, dependencies = []) {\n  sushiStats.reset();\n  setCurrentLogger('sushi');\n\n  // Load dependencies\n  let defs = new FHIRDefinitions();\n  const dependenciesToAdd = addCoreFHIRVersionAndAutomaticDependencies(dependencies, config.fhirVersion[0]);\n  dependencies.push(...dependenciesToAdd);\n  defs = await loadAndCleanDatabase(defs, dependencies);\n\n  // Load and fill FSH Tank\n  let tank = FSHTank;\n  try {\n    const rawFSH = [new RawFSH(input)];\n    tank = fillTank(rawFSH, config);\n  } catch (e) {\n    logger.error('Something went wrong when importing the FSH definitions');\n    return;\n  }\n\n  // Check for StructureDefinition\n  const structDef = defs.fishForFHIR('StructureDefinition', Type.Resource);\n  if (structDef?.version !== config.fhirVersion[0]) {\n    logger.error(\n      'StructureDefinition resource not found. The FHIR package in the browser cache' +\n        ' may be corrupt. Clear cookies and site data on this webpage to reload the FHIR package.'\n    );\n    return;\n  }\n\n  logger.info('Converting FSH to FHIR resources...');\n  const outPackage = exportFHIR(tank, defs);\n\n  const count =\n    outPackage.profiles.length +\n    outPackage.extensions.length +\n    outPackage.logicals.length +\n    outPackage.resources.length +\n    // Don't count the inline instances that won't have their own JSON output\n    // but do include them in the SUSHI Results box (so don't filter out of outPackage here)\n    outPackage.instances.filter((i) => i._instanceMeta.usage !== 'Inline').length +\n    outPackage.valueSets.length +\n    outPackage.codeSystems.length;\n\n  logger.info(`Exported ${count} FHIR resources as JSON.`);\n\n  console.log(' ');\n  printSUSHIResults(outPackage);\n\n  // Remove snapshots\n  outPackage.profiles = outPackage.profiles.map((p) => p.toJSON(false));\n  outPackage.extensions = outPackage.extensions.map((e) => e.toJSON(false));\n  outPackage.logicals = outPackage.logicals.map((l) => l.toJSON(false));\n  outPackage.resources = outPackage.resources.map((r) => r.toJSON(false));\n\n  // Filter out inline instances\n  outPackage.instances = outPackage.instances.filter((i) => i._instanceMeta.usage !== 'Inline');\n\n  return outPackage;\n}\n\nfunction printSUSHIResults(pkg) {\n  const numError = sushiStats.numError;\n  const numWarn = sushiStats.numWarn;\n  // NOTE: These variables are creatively names to align well in the strings below while keeping prettier happy\n  const profileNum = pad(pkg.profiles.length.toString(), 13);\n  const extentNum = pad(pkg.extensions.length.toString(), 12);\n  const logiclNum = pad(pkg.logicals.length.toString(), 12);\n  const resourcNum = pad(pkg.resources.length.toString(), 13);\n  const valueSetsNumber = pad(pkg.valueSets.length.toString(), 18);\n  const codeSystemsNum = pad(pkg.codeSystems.length.toString(), 17);\n  const instancesNumber = pad(pkg.instances.length.toString(), 18);\n  const errorNumMsg = pad(`${numError} Error${numError !== 1 ? 's' : ''}`, 13);\n  const wrNumMsg = padStart(`${numWarn} Warning${numWarn !== 1 ? 's' : ''}`, 12);\n\n  const aWittyMessageInvolvingABadFishPun = padEnd(getRandomPun(numError, numWarn), 36);\n  const color = numError > 0 ? 'red' : numWarn > 0 ? '#b36200' : 'green'; // eslint-disable-line no-unused-vars\n\n  /* eslint-disable no-useless-concat */\n  // NOTE: Doing some funky things w/ strings on some lines to keep overall alignment in the code\n  const results = [\n    '' + ' SUSHI RESULTS ' + '',\n    '' + '  ' + '',\n    '' + '     Profiles     Extensions     Logicals      Resources    ' + '',\n    '' + '  ' + '',\n    '' + `  ${profileNum}  ${extentNum}  ${logiclNum}  ${resourcNum}  ` + '',\n    '' + '  ' + '',\n    '' + '  ' + '',\n    '' + '       ValueSets         CodeSystems         Instances       ' + '',\n    '' + '  ' + '',\n    '' + `  ${valueSetsNumber}  ${codeSystemsNum}  ${instancesNumber}  ` + '',\n    '' + '  ' + '',\n    '' + '                                                                 ' + '',\n    '' + '' + '',\n    '' + ` ${aWittyMessageInvolvingABadFishPun} ${errorNumMsg} ${wrNumMsg} ` + '',\n    '' + '' + ''\n  ];\n  results.forEach((r) => console.log(r));\n  // results.forEach((r) => console.log(`%c${r}`, `color:${clr}`)); // Color formatting for browser console\n}\n\nfunction printGoFSHresults(pkg) {\n  const proNum = pad(pkg.profiles.length.toString(), 18);\n  const extNum = pad(pkg.extensions.length.toString(), 17);\n  const logNum = pad(pkg.logicals.length.toString(), 18);\n  const resNum = pad(pkg.resources.length.toString(), 18);\n  const vsNum = pad(pkg.valueSets.length.toString(), 17);\n  const csNum = pad(pkg.codeSystems.length.toString(), 18);\n  const instNum = pad(pkg.instances.length.toString(), 18);\n  const invNum = pad(pkg.invariants.length.toString(), 17);\n  const mapNum = pad(pkg.mappings.length.toString(), 18);\n  const errNumMsg = pad(`${gofshStats.numError} Error${gofshStats.numError !== 1 ? 's' : ''}`, 12);\n  const wrnNumMsg = padStart(`${gofshStats.numWarn} Warning${gofshStats.numWarn !== 1 ? 's' : ''}`, 12);\n  const aWittyMessageInvolvingABadFishPun = padEnd(getRandomPun(gofshStats.numError, gofshStats.numWarn), 37);\n\n  // prettier-ignore\n  const results = [\n    '' + ' GoFSH RESULTS ' + '',\n    '' + '  ' + '',\n    '' + '       Profiles          Extensions           Logicals       ' + '',\n    '' + '  ' + '',\n    '' + `  ${    proNum     }  ${    extNum    }  ${    logNum     }  ` + '',\n    '' + '  ' + '',\n    '' + '  ' + '',\n    '' + '      Resources           ValueSets          CodeSystems     ' + '',\n    '' + '  ' + '',\n    '' + `  ${    resNum     }  ${    vsNum     }  ${     csNum     }  ` + '',\n    '' + '  ' + '',\n    '' + '  ' + '',\n    '' + '      Instances          Invariants           Mappings       ' + '',\n    '' + '  ' + '',\n    '' + `  ${    instNum    }  ${    invNum    }  ${    mapNum     }  ` + '',\n    '' + '  ' + '',\n    '' + '                                                                 ' + '',\n    '' + '' + '',\n    '' + ` ${aWittyMessageInvolvingABadFishPun } ${errNumMsg} ${wrnNumMsg} ` + '',\n    '' + '' + ''\n  ];\n\n  console.log(' ');\n  results.forEach((r) => console.log(r));\n}\n\nfunction addCoreFHIRVersionAndAutomaticDependencies(dependencies, coreFHIRVersion) {\n  const dependenciesToAdd = [];\n  const coreFHIRPackage = {\n    packageId: getCoreFHIRPackageIdentifier(coreFHIRVersion),\n    version: coreFHIRVersion\n  };\n  const hasCoreFHIR = hasDependency(dependencies, coreFHIRPackage);\n  if (!hasCoreFHIR) {\n    dependenciesToAdd.push(coreFHIRPackage);\n  }\n  AUTOMATIC_DEPENDENCIES.filter(\n    (dep) => dep.fhirVersions == null || dep.fhirVersions.some((v) => coreFHIRPackage.version.startsWith(v))\n  ).forEach((dep) => {\n    const dependencyToAdd = { packageId: dep.packageId, version: dep.version, isAutomatic: true };\n    if (!hasDependency(dependencies, dependencyToAdd, true)) {\n      dependenciesToAdd.push(dependencyToAdd);\n    }\n  });\n  return dependenciesToAdd;\n}\n\nfunction hasDependency(dependenciesList, currentDependency, ignoreVersion = false) {\n  return dependenciesList.some(\n    (dep) =>\n      dep.packageId === currentDependency.packageId && (ignoreVersion || dep.version === currentDependency.version)\n  );\n}\n\nexport function getCoreFHIRPackageIdentifier(fhirVersion) {\n  if (/^4\\.0\\.1$/.test(fhirVersion)) {\n    return `hl7.fhir.r4.core`;\n  } else if (/^4\\.3\\.\\d+$/.test(fhirVersion)) {\n    return `hl7.fhir.r4b.core`;\n  } else if (/^5\\.0\\.\\d+$/.test(fhirVersion)) {\n    return `hl7.fhir.r5.core`;\n  } else {\n    return `hl7.fhir.r4.core`;\n  }\n}\n\nconst AUTOMATIC_DEPENDENCIES = [\n  {\n    packageId: 'hl7.fhir.uv.tools',\n    version: 'latest'\n  },\n  {\n    packageId: 'hl7.terminology.r4',\n    version: 'latest',\n    fhirVersions: ['4.0', '4.3']\n  },\n  {\n    packageId: 'hl7.terminology.r5',\n    version: 'latest',\n    fhirVersions: ['5.0']\n  },\n  {\n    packageId: 'hl7.fhir.uv.extensions.r4',\n    version: 'latest',\n    fhirVersions: ['4.0', '4.3']\n  },\n  {\n    packageId: 'hl7.fhir.uv.extensions.r5',\n    version: 'latest',\n    fhirVersions: ['5.0']\n  }\n];\n","import React, { useState, useEffect } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  AssignmentOutlined as AssignmentOutlinedIcon,\n  ChevronRight as ChevronRightIcon,\n  ExpandMore as ExpandMoreIcon,\n  LibraryBooks as LibraryBooksIcon,\n  PlayArrow,\n  SaveAlt,\n  Settings\n} from '@material-ui/icons';\nimport {\n  Box,\n  Button,\n  Checkbox,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControlLabel,\n  FormHelperText,\n  Grid,\n  Link,\n  MenuItem,\n  Tooltip,\n  TextField\n} from '@material-ui/core';\nimport { runSUSHI, runGoFSH } from '../utils/FSHHelpers';\nimport { sliceDependency } from '../utils/helpers';\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport CodeMirrorComponent from './CodeMirrorComponent';\n\nconst useStyles = makeStyles((theme) => ({\n  box: {\n    padding: theme.spacing(1),\n    color: theme.palette.text.primary,\n    background: theme.palette.background.paper,\n    display: 'flex;',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  rightControls: {\n    position: 'absolute',\n    right: '24px'\n  },\n  leftControls: {\n    position: 'absolute',\n    left: '28px'\n  },\n  secondaryButton: {\n    color: theme.palette.success.main,\n    '&:hover': {\n      background: theme.palette.common.lighterBlue\n    }\n  },\n  progressContainer: {\n    width: '24px',\n    height: '24px'\n  },\n  progress: {\n    height: '1em !important',\n    width: '1em !important',\n    verticalAlign: 'middle',\n    color: theme.palette.common.white\n  },\n  button: {\n    color: theme.palette.common.white,\n    background: theme.palette.success.main,\n    borderRadius: '0',\n    paddingRight: '15px',\n    paddingLeft: '15px',\n    '&:hover': {\n      background: theme.palette.success.dark\n    }\n  },\n  buttonLeft: {\n    float: 'right',\n    left: '-3.33px'\n  },\n  buttonRight: {\n    float: 'left',\n    right: '-0.67px'\n  },\n  runIcon: {\n    padding: '0px'\n  },\n  dialogPaper: {\n    maxHeight: '80vh',\n    minHeight: '80vh'\n  },\n  dialogActions: {\n    justifyContent: 'space-between'\n  },\n  dialogActionsMessage: {\n    fontStyle: 'italic',\n    padding: '6px 8px'\n  }\n}));\n\nfunction replacer(key, value) {\n  if (key === 'config') {\n    return undefined;\n  }\n  return value;\n}\n\nexport default function FSHControls(props) {\n  const classes = useStyles();\n  const [openExamples, setOpenExamples] = useState(false);\n  const [openConfig, setOpenConfig] = useState(false);\n  const [canonical, setCanonical] = useState('');\n  const [version, setVersion] = useState('');\n  const [fhirVersion, setFhirVersion] = useState('');\n  const [dependencies, setDependencies] = useState('');\n  const [isGoFSHIndented, setIsGoFSHIndented] = useState(false);\n  const [isSUSHIRunning, setIsSUSHIRunning] = useState(false);\n  const [isGoFSHRunning, setIsGoFSHRunning] = useState(false);\n  const [isFetchingExample, setIsFetchingExample] = useState(false);\n  const [currentExample, setCurrentExample] = useState('');\n  const [currentExampleName, setCurrentExampleName] = useState('');\n\n  useEffect(() => {\n    setCanonical(props.config?.canonical || '');\n    setVersion(props.config?.version || '');\n    setFhirVersion(props.config?.fhirVersion?.length > 0 ? props.config.fhirVersion.at(0) : '');\n    setDependencies(props.config?.dependencies || '');\n  }, [props.config]);\n\n  const handleOpenExamples = () => {\n    setOpenExamples(true);\n  };\n\n  const handleCloseExamples = () => {\n    setOpenExamples(false);\n    setCurrentExample('');\n  };\n\n  const handleOpenConfig = () => {\n    setOpenConfig(true);\n  };\n\n  const handleCloseConfig = () => {\n    setOpenConfig(false);\n    props.onConfigChange({ canonical, version, fhirVersion: [fhirVersion], dependencies, isGoFSHIndented });\n  };\n\n  const updateCanonical = (event) => {\n    const newCanonical = event.target.value;\n    setCanonical(newCanonical);\n  };\n\n  const updateVersion = (event) => {\n    const newVersion = event.target.value;\n    setVersion(newVersion);\n  };\n\n  const updateFhirVersion = (event) => {\n    const newFhirVersion = event.target.value;\n    setFhirVersion(newFhirVersion);\n  };\n\n  const updateDependencyString = (event) => {\n    const dependencyString = event.target.value;\n    setDependencies(dependencyString);\n  };\n\n  const updateIsGoFSHIndented = (event) => {\n    const isIndented = event.target.checked;\n    setIsGoFSHIndented(isIndented);\n  };\n\n  const updateLineWrapping = (event) => {\n    const isLineWrappedChecked = event.target.checked;\n    props.setIsLineWrapped(isLineWrappedChecked);\n  };\n\n  async function handleSUSHIClick() {\n    if (props.isWaiting) {\n      // If SUSHI or GoFSH is in the middle of processes, don't do anything\n      return;\n    }\n\n    props.resetLogMessages();\n    props.onSUSHIClick(true, [''], true);\n    setIsSUSHIRunning(true);\n    const parsedDependencies = sliceDependency(dependencies);\n    const config = {\n      canonical: canonical ? canonical : 'http://example.org',\n      version: version ? version : '1.0.0',\n      FSHOnly: true,\n      fhirVersion: fhirVersion ? [fhirVersion] : ['4.0.1']\n    };\n    const outPackage = await runSUSHI(props.fshText, config, parsedDependencies);\n    let jsonOutput = JSON.stringify(outPackage, replacer, 2);\n    if (outPackage && outPackage.codeSystems) {\n      if (\n        !outPackage.codeSystems.length &&\n        !outPackage.extensions.length &&\n        !outPackage.instances.length &&\n        !outPackage.profiles.length &&\n        !outPackage.logicals.length &&\n        !outPackage.resources.length &&\n        !outPackage.valueSets.length\n      ) {\n        jsonOutput = [''];\n      }\n    } else {\n      jsonOutput = [''];\n    }\n\n    props.onSUSHIClick(true, jsonOutput, false);\n    setIsSUSHIRunning(false);\n  }\n\n  async function handleGoFSHClick() {\n    if (props.isWaiting) {\n      // If SUSHI or GoFSH is in the middle of processes, don't do anything\n      return;\n    }\n\n    props.resetLogMessages();\n    props.onGoFSHClick('', true);\n    setIsGoFSHRunning(true);\n    const gofshInputStrings = props.gofshText.map((def) => def.def).filter((d) => d);\n    const parsedDependencies = dependencies === '' ? [] : dependencies.split(',');\n    // Create small ImplementationGuide resource to send canonical and version information\n    if (canonical || version || fhirVersion !== '') {\n      const igResource = {\n        resourceType: 'ImplementationGuide',\n        fhirVersion: fhirVersion ? [fhirVersion] : ['4.0.1'],\n        id: '1',\n        ...(canonical && { url: `${canonical}/ImplementationGuide/1` }),\n        ...(version && { version: version })\n      };\n      gofshInputStrings.push(JSON.stringify(igResource, null, 2));\n    }\n\n    const options = { dependencies: parsedDependencies, indent: isGoFSHIndented };\n    const { fsh, config } = await runGoFSH(gofshInputStrings, options);\n    props.onGoFSHClick(fsh, false);\n    setIsGoFSHRunning(false);\n    if (canonical === '' && config.canonical) setCanonical(config.canonical);\n    if (version === '' && config.version) setVersion(config.version);\n    if (fhirVersion === '' && config.fhirVersion) setFhirVersion(config.fhirVersion.at(0));\n  }\n\n  async function fetchExampleFSH(event, value) {\n    if (!value.endsWith('.fsh')) return;\n    const exampleMetadata = props.exampleMetadata[value];\n    setIsFetchingExample(true);\n    setCurrentExampleName(exampleMetadata.name);\n    const utf8Decoder = new TextDecoder('utf-8');\n    let responseReader = await fetch(exampleMetadata.path).then((response) => response.body.getReader());\n    let fshString = '';\n    const { value: chunk } = await responseReader.read();\n    fshString += utf8Decoder.decode(chunk);\n    setIsFetchingExample(false);\n    setCurrentExample(fshString);\n  }\n\n  function updateExampleValue(text) {\n    setCurrentExample(text);\n  }\n\n  function handleCopyToClipboard() {\n    navigator.clipboard.writeText(currentExample);\n  }\n\n  const renderItem = (node) => (\n    <Tooltip\n      key={node.id}\n      title={\n        props.exampleMetadata[node.id] && props.exampleMetadata[node.id].description\n          ? props.exampleMetadata[node.id].description\n          : node.name\n      }\n      placement=\"bottom\"\n      arrow\n    >\n      <TreeItem key={node.id} nodeId={node.id} label={node.name} className={classes.treeItem}></TreeItem>\n    </Tooltip>\n  );\n\n  const renderTree = (nodes) => (\n    <TreeItem key={nodes.id} nodeId={nodes.id} label={nodes.name}>\n      {nodes.children ? nodes.children.map((node) => (node.children ? renderTree(node) : renderItem(node))) : null}\n    </TreeItem>\n  );\n\n  return (\n    <Box className={classes.box}>\n      <Grid container>\n        <Grid item xs={5}>\n          <Button className={clsx(classes.button, classes.buttonLeft)} onClick={handleSUSHIClick} testid=\"Button\">\n            Convert to JSON\n            {isSUSHIRunning ? (\n              <div className={classes.progressContainer}>\n                <CircularProgress className={classes.progress} />\n              </div>\n            ) : (\n              <PlayArrow className={classes.runIcon} />\n            )}\n          </Button>\n        </Grid>\n        <Grid item xs={7}>\n          <Button\n            className={clsx(classes.button, classes.buttonRight)}\n            onClick={handleGoFSHClick}\n            testid=\"GoFSH-button\"\n          >\n            {isGoFSHRunning ? (\n              <div className={classes.progressContainer}>\n                <CircularProgress className={classes.progress} />\n              </div>\n            ) : (\n              <PlayArrow className={classes.runIcon} style={{ transform: 'scaleX(-1)' }} />\n            )}\n            Convert to FSH\n          </Button>\n        </Grid>\n      </Grid>\n\n      <div className={classes.leftControls}>\n        <Button name=\"Examples\" className={classes.button} onClick={handleOpenExamples}>\n          <LibraryBooksIcon /> &nbsp; FSH Examples\n        </Button>\n      </div>\n\n      <div className={classes.rightControls}>\n        <Button name=\"SaveAll\" className={classes.secondaryButton} onClick={props.saveAll}>\n          <SaveAlt /> Save All\n        </Button>\n        <Button name=\"Configuration\" className={classes.secondaryButton} onClick={handleOpenConfig}>\n          <Settings /> Configuration\n        </Button>\n      </div>\n\n      <Dialog open={openConfig} onClose={handleCloseConfig} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Configuration Settings</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Change the Implementation Guide configuration to use when processing FSH and FHIR JSON\n          </DialogContentText>\n          <TextField\n            id=\"canonical\"\n            margin=\"dense\"\n            fullWidth\n            label=\"Canonical URL\"\n            helperText=\"Default: http://example.org\"\n            defaultValue={canonical}\n            onChange={updateCanonical}\n          />\n          <TextField\n            id=\"version\"\n            margin=\"dense\"\n            fullWidth\n            label=\"Version\"\n            helperText=\"Default: 1.0.0\"\n            defaultValue={version}\n            onChange={updateVersion}\n          />\n          <TextField\n            id=\"fhir-version-select\"\n            margin=\"dense\"\n            fullWidth\n            select\n            label=\"FHIR Version\"\n            helperText=\"Default: 4.0.1 (R4)\"\n            value={fhirVersion}\n            onChange={updateFhirVersion}\n          >\n            <MenuItem value={'4.0.1'}>4.0.1 (R4)</MenuItem>\n            <MenuItem value={'4.3.0'}>4.3.0 (R4B)</MenuItem>\n            <MenuItem value={'5.0.0'}>5.0.0 (R5)</MenuItem>\n          </TextField>\n          <TextField\n            id=\"dependencies\"\n            margin=\"dense\"\n            fullWidth\n            label=\"Dependencies\"\n            helperText=\"Format: packageId#version, packageId#version (e.g., hl7.fhir.us.core#6.0.0)\"\n            defaultValue={dependencies}\n            onChange={updateDependencyString}\n          />\n          <FormControlLabel\n            id=\"goFSHIndent\"\n            margin=\"dense\"\n            control={<Checkbox checked={isGoFSHIndented} color=\"primary\" />}\n            label=\"Indent output of Convert to FSH\"\n            onChange={updateIsGoFSHIndented}\n          />\n          <FormHelperText>If set, Convert to FSH will output FSH using path rules</FormHelperText>\n          <FormControlLabel\n            id=\"lineWrap\"\n            margin=\"dense\"\n            control={<Checkbox checked={props.isLineWrapped} color=\"primary\" />}\n            label=\"Line wrap within code editors\"\n            onChange={updateLineWrapping}\n          />\n          <FormHelperText>If set, FSH Online will display code with line wrapping</FormHelperText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseConfig} color=\"primary\">\n            Done\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={openExamples}\n        onClose={handleCloseExamples}\n        aria-labelledby=\"form-dialog-title\"\n        maxWidth=\"lg\"\n        fullWidth\n        scroll=\"paper\"\n        classes={{ paper: classes.dialogPaper }}\n      >\n        <DialogTitle id=\"form-dialog-title\">FSH Examples</DialogTitle>\n        <DialogContent>\n          <Grid container style={{ overflow: 'scroll', minHeight: '64vh' }}>\n            <Grid item xs={4}>\n              <TreeView\n                className={classes.treeView}\n                defaultCollapseIcon={<ExpandMoreIcon />}\n                defaultExpandIcon={<ChevronRightIcon />}\n                onNodeSelect={fetchExampleFSH}\n              >\n                {props.exampleConfig.map((category) => renderTree(category))}\n              </TreeView>\n            </Grid>\n            <Grid item xs={8}>\n              <CodeMirrorComponent\n                name={currentExample ? currentExampleName : ''}\n                isExamples={true}\n                value={currentExample}\n                initialText={currentExample}\n                updateTextValue={updateExampleValue}\n                mode={'fsh'}\n                placeholder={isFetchingExample ? 'Fetching example...' : 'Select an example'}\n                isLineWrapped={props.isLineWrapped}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions className={classes.dialogActions}>\n          <div className={classes.dialogActionsMessage}>\n            Have an example that might be bene-fish-al? Seas the day and add to our collection on{' '}\n            <Link href=\"https://github.com/FSHSchool/FSHOnline-Examples#readme\">GitHub</Link>!\n          </div>\n          <div>\n            <Button onClick={handleCopyToClipboard} color=\"primary\">\n              <AssignmentOutlinedIcon></AssignmentOutlinedIcon> Copy to clipboard\n            </Button>\n            <Button onClick={handleCloseExamples} color=\"secondary\">\n              Close\n            </Button>\n          </div>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/FSH-online-logo.1322e272.png\";","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppBar, Toolbar, Button, Typography, Box } from '@material-ui/core';\nimport { StylesProvider } from '@material-ui/core/styles';\nimport { ExitToApp } from '@material-ui/icons';\nimport logo from '../style/FSH-online-logo.png';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: theme.palette.common.blue,\n    position: 'static',\n    boxShadow: '0'\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 700\n  },\n  logo: {\n    height: '55px',\n    width: '63px'\n  },\n  toolbarBox: {\n    alignItems: 'center'\n  },\n  exitIcon: {\n    paddingLeft: '3px',\n    transform: 'scaleX(-1)'\n  },\n  docButton: {\n    color: theme.palette.common.white,\n    backgroundColor: theme.palette.common.blue,\n    fontSize: '0.875rem',\n    fontWeight: 700,\n    '&:hover': {\n      background: theme.palette.common.lightBlue\n    }\n  },\n  versionText: {\n    color: theme.palette.common.white,\n    fontSize: '0.8rem',\n    fontStyle: 'italic',\n    marginTop: '-5px'\n  }\n}));\n\nexport default function TopBar() {\n  const classes = useStyles();\n  return (\n    <AppBar className={classes.root}>\n      <Toolbar>\n        <Box className={classes.toolbarBox} display=\"flex\" flexGrow={1} flexDirection=\"row\">\n          <Box order={1} display=\"flex\" flexGrow={1} flexDirection=\"row\">\n            <Box order={1} alignSelf=\"center\" display=\"flex\">\n              <img src={logo} alt=\"logo\" className={classes.logo} />\n            </Box>\n            <Box order={2} alignSelf=\"center\" m={1}>\n              <StylesProvider injectFirst>\n                <Typography order={1} className={classes.title}>\n                  FSH ONLINE\n                </Typography>\n                <Typography order={2} className={classes.versionText}>\n                  Powered by SUSHI v3.9.0 and GoFSH v2.3.1\n                </Typography>\n              </StylesProvider>\n            </Box>\n          </Box>\n          <Box order={1}>\n            <StylesProvider injectFirst>\n              <Button className={classes.docButton} href=\"https://fshschool.org/\" target=\"_blank\">\n                <ExitToApp className={classes.exitIcon} fontSize=\"small\" />\n                Back to School\n              </Button>\n            </StylesProvider>\n          </Box>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  );\n}\n","import React, { createContext, useState, useEffect } from 'react';\nimport { inflateSync } from 'browserify-zlib';\nimport FileSaver from 'file-saver';\nimport JSZip from 'jszip';\nimport { debounce, partition } from 'lodash';\nimport clsx from 'clsx';\nimport { createTheme, makeStyles } from '@material-ui/core/styles';\nimport { Grid, ThemeProvider } from '@material-ui/core';\nimport { expandLink } from './utils/BitlyWorker';\nimport TopBar from './components/TopBar';\nimport JSONOutput from './components/JSONOutput';\nimport FSHOutput from './components/FSHOutput';\nimport ConsoleComponent from './components/ConsoleComponent';\nimport FSHControls from './components/FSHControls';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    height: '100%',\n    flexGrow: 1\n  },\n  fullHeightGrid: {\n    height: '100%'\n  },\n  editorPane: {\n    // From MaterialUI Grid:\n    flexGrow: '0'\n    // maxWidth and flexBasis set inline based on state\n  },\n  resize: {\n    height: '100%',\n    width: '4px',\n    cursor: 'col-resize',\n    '&:hover': {\n      background: colors.lightBlue\n    }\n  },\n  resizeBlue: {\n    background: '#487AA2'\n  },\n  resizeCursor: {\n    cursor: 'col-resize'\n  },\n  collapsedMain: {\n    width: '100%',\n    height: 'calc(100vh - 116px - 300px)'\n  },\n  expandedMain: {\n    width: '100%',\n    height: 'calc(100vh - 116px - 34px)'\n  },\n  collapsedConsole: {\n    height: '25px',\n    width: '100%'\n  },\n  expandedConsole: {\n    height: '300px',\n    width: '100%'\n  },\n  top: {\n    height: '116px'\n  }\n}));\n\nconst colors = {\n  lighterBlue: '#D8E2EA',\n  lightBlue: '#487AA2',\n  blue: '#30638e',\n  darkerBlue: '#143E61',\n  editorGrey: '#263238',\n  lightestGrey: '#E7ECEE',\n  lightGrey: '#D0D9DD',\n  grey: '#575B5C',\n  darkerGrey: '#3D4345',\n  darkestGrey: '#121D21',\n  red: '#FD6668'\n};\n\nexport const theme = createTheme({\n  palette: {\n    success: {\n      main: colors.blue,\n      dark: colors.darkerBlue,\n      light: colors.lightBlue\n    },\n    common: colors\n  },\n  typography: {\n    fontFamily: 'Open Sans'\n  },\n  overrides: {\n    MuiTooltip: {\n      tooltip: {\n        backgroundColor: colors.darkestGrey,\n        fontSize: '13px'\n      },\n      arrow: {\n        color: colors.darkestGrey\n      }\n    },\n    MuiButton: {\n      text: {\n        textTransform: 'none',\n        fontWeight: 600\n      }\n    },\n    MuiIconButton: {\n      root: {\n        '&:hover': {\n          backgroundColor: colors.grey\n        }\n      }\n    }\n  }\n});\n\nconst githubURL = 'https://raw.githubusercontent.com/FSHSchool/FSHOnline-Examples/main/';\nconst log = console.log; //eslint-disable-line no-unused-vars\nconst defaultInfoMessage = 'There are no messages to display in the console.';\nconst defaultProblemMessage = 'There are no problems to display in the console.';\nlet infoMessages = [defaultInfoMessage];\nlet problemMessages = [defaultProblemMessage];\nlet problemCount = 0;\nlet problemColor = '#FDD835'; // Default yellow color for warnings\nlet exampleMetadata = {};\nconsole.log = function getMessages(message) {\n  if (message && (message.startsWith('error') || message.startsWith('warn'))) {\n    if (problemMessages[0] === defaultProblemMessage) {\n      problemMessages = [];\n    }\n    problemCount++;\n    problemMessages.push(message);\n    if (message.startsWith('error')) {\n      problemColor = '#FD6668';\n    }\n  }\n  if (infoMessages[0] === defaultInfoMessage) {\n    infoMessages = [];\n  }\n  infoMessages.push(message);\n};\n\n/* \nParses metadata into a seperate object and converts the manifest into a form that can\nbe consumed by the TreeView component\n*/\nfunction convertManifest(childrenArr) {\n  childrenArr.forEach((element) => {\n    if (element.type === 'category') {\n      convertManifest(element.children);\n    }\n    element.id = element.path.replaceAll('%20', '-'); // Spaces in file names are replaced with '%20' in Github urls\n    if (element.type === 'file') {\n      exampleMetadata[element.id] = {\n        path: `${githubURL}/Examples/${element.path}`,\n        description: element.description,\n        name: element.name\n      };\n    }\n    delete element.type;\n    delete element.path;\n  });\n}\n\nasync function getManifestFromGit() {\n  let manifestJSON = await fetch(`${githubURL}/index.json`).then((response) => response.json());\n  convertManifest(manifestJSON.children);\n  return [...manifestJSON.children];\n}\n\nexport async function decodeFSH(encodedFSH) {\n  if (encodedFSH.text === undefined) {\n    return '';\n  } else {\n    const promisedURL = await expandLink(encodedFSH);\n\n    // Removes the encoded data from the end of the url, starting at index 38\n    const sliced64 = promisedURL.long_url.slice(40);\n    if (!promisedURL.long_url.includes('https://fshschool.org/FSHOnline/#/share/') || sliced64.length === 0) {\n      return '';\n    } else {\n      const displayText = inflateSync(Buffer.from(sliced64, 'base64')).toString('utf-8');\n      return displayText;\n    }\n  }\n}\n\nasync function getGistContent(gistId) {\n  const gistContent = await fetch(`https://api.github.com/gists/${gistId}`).then((res) => res.json());\n  let fshContent = '';\n  for (let f of Object.values(gistContent?.files || {})) {\n    if (f.truncated) {\n      fshContent += await fetch(f.raw_url).then((res) => res.text());\n    } else {\n      fshContent += f.content;\n    }\n    fshContent += '\\n\\n';\n  }\n  return fshContent.trim();\n}\n\nexport const ExpandedConsoleContext = createContext(false);\n\nexport default function App(props) {\n  const classes = useStyles();\n  const urlParam = props.match;\n  const [showNewFHIRText, setShowNewFHIRText] = useState(false);\n  const [inputFSHText, setInputFSHText] = useState('');\n  const [inputFHIRText, setInputFHIRText] = useState(['']);\n  const [initialText, setInitialText] = useState('');\n  const [isWaitingForFHIROutput, setIsWaitingForFHIROutput] = useState(false);\n  const [isWaitingForFSHOutput, setIsWaitingForFSHOutput] = useState(false);\n  const [expandConsole, setExpandConsole] = useState(false);\n  const [exampleConfig, setExampleConfig] = useState([]);\n  const [exampleFilePaths, setExampleFilePaths] = useState({});\n  const [leftWidth, setLeftWidth] = useState(41.666667); // Initial width based off grid item xs={5} size to align with FSHControls\n  const [isDragging, setIsDragging] = useState(false);\n  const [configToShare, setConfigToShare] = useState({ canonical: '', version: '', fhirVersion: [], dependencies: '' });\n  const [sharedConfig, setSharedConfig] = useState({});\n  const [isLineWrapped, setIsLineWrapped] = useState(false);\n\n  useEffect(() => {\n    async function waitForFSH() {\n      if (/\\/share/.test(urlParam.path)) {\n        const text = await decodeFSH(urlParam.params);\n        const splitIndex = text.indexOf('\\n');\n        const config = text.slice(0, splitIndex);\n        let parsedConfig;\n        let fshContent = text;\n        try {\n          const rawConfig = JSON.parse(config);\n          if (rawConfig.c != null && rawConfig.v != null && rawConfig.d != null) {\n            parsedConfig = {\n              canonical: rawConfig.c,\n              version: rawConfig.v,\n              fhirVersion: rawConfig.f || [], // Need to support old share links that did not have fhirVersion\n              dependencies: rawConfig.d\n            };\n            // If the config is successfully parsed and has the expected properties,\n            // we can assume the true FSH content begins on the next line\n            fshContent = text.slice(splitIndex + 1);\n          }\n        } catch (e) {\n          // If parse fails, it is likely decoding a legacy link in which all content is FSH, so just don't\n          // set the parsedConfig, and set fshContent to all of the text\n        }\n        setSharedConfig(parsedConfig || {});\n        setInitialText(fshContent);\n      } else if (/\\/gist/.test(urlParam.path)) {\n        const fshContent = await getGistContent(urlParam.params.id);\n        setInitialText(fshContent);\n      }\n    }\n    async function fetchExamples() {\n      setExampleConfig(await getManifestFromGit());\n      setExampleFilePaths(exampleMetadata);\n    }\n    waitForFSH();\n    fetchExamples();\n  }, [urlParam]);\n\n  function resetLogMessages() {\n    infoMessages = [defaultInfoMessage];\n    problemMessages = [defaultProblemMessage];\n    problemCount = 0;\n    problemColor = '#FDD835';\n  }\n\n  function handleSUSHIControls(showNewText, sushiOutput, isWaiting) {\n    setShowNewFHIRText(showNewText);\n    setInputFHIRText(sushiOutput); // JSONOutput component handles resetting initial text, so don't reset here\n    setIsWaitingForFHIROutput(isWaiting);\n  }\n\n  function handleGoFSHControls(fshOutput, isWaiting) {\n    setIsWaitingForFSHOutput(isWaiting);\n    setInitialText(fshOutput === '' ? null : fshOutput); // Reset initial text to null if empty in order to display placeholder text\n  }\n\n  function updateInputFSHTextValue(text) {\n    // This is a bit of a hack to make sure the editor can be reset by a setInitialText(null)\n    if (initialText === '' || initialText === null) {\n      setInitialText(text);\n    }\n    setInputFSHText(text);\n  }\n\n  function updateInputFHIRTextValue(text) {\n    setInputFHIRText(text);\n  }\n\n  function handleConfigChange(config) {\n    setConfigToShare(config);\n  }\n\n  function handleResetWidth() {\n    setLeftWidth(41.666667);\n  }\n\n  function onMouseDown(e) {\n    e.preventDefault();\n    setIsDragging(true);\n  }\n\n  function onMouseUp(e) {\n    e.preventDefault();\n    setIsDragging(false);\n  }\n\n  function onTouchStart() {\n    setIsDragging(true);\n  }\n\n  function onTouchEnd() {\n    setIsDragging(false);\n  }\n\n  function setLineWrap(wrapSelected) {\n    setIsLineWrapped(wrapSelected);\n  }\n\n  function debouncedMove(clientX) {\n    if (isDragging) {\n      const newPercentage = (clientX / window.innerWidth) * 100;\n      if (newPercentage > 10 && newPercentage < 76) {\n        setLeftWidth(newPercentage);\n      }\n    }\n  }\n\n  function onMouseMove(e) {\n    const clientX = e.clientX;\n    if (isDragging) {\n      debounce(() => debouncedMove(clientX), 10)();\n    }\n  }\n\n  function onTouchMove(e) {\n    const clientX = e.touches[0].clientX;\n    if (isDragging) {\n      debounce(() => debouncedMove(clientX), 10)();\n    }\n  }\n\n  function getFileName(name, nameMap) {\n    if (nameMap.get(name)) {\n      let count = nameMap.get(name);\n      let nameWithCount = `${name}-${count}`;\n      while (nameMap.get(nameWithCount)) {\n        count = count + 1;\n        nameWithCount = `${name}-${count}`;\n      }\n      nameMap.set(name, count + 1); // Keep track of how many times the name has been used in this zip file\n      name = nameWithCount; // Append a number if the file name has been used already\n      nameMap.set(nameWithCount, 1); // Keep track of the new file name we created so we don't use it again\n    } else {\n      nameMap.set(name, 1);\n    }\n    return name;\n  }\n\n  function saveAll() {\n    const nameMap = new Map();\n\n    // Build zip file\n    const zip = new JSZip();\n    zip.file('FSH.fsh', inputFSHText);\n\n    // Prioritize FHIR definitions that have a provided id when naming files\n    const [defWithId, defWithUntitledId] = partition(inputFHIRText, (def) => def.id && def.id !== 'Untitled');\n    defWithId.forEach((def) => {\n      let resourceObj;\n      try {\n        resourceObj = JSON.parse(def.def);\n      } catch {\n        /* Ignore errors and just default to name without resourceType */\n      }\n      const name = getFileName(resourceObj?.resourceType ? `${resourceObj.resourceType}-${def.id}` : def.id, nameMap);\n      const value = def.def ?? null;\n      zip.file(`${name}.json`, value);\n    });\n    defWithUntitledId.forEach((def) => {\n      let resourceObj;\n      try {\n        resourceObj = JSON.parse(def.def);\n      } catch {\n        /* Ignore errors and just default to name without resourceType */\n      }\n      const id = def.id ?? 'Untitled';\n      const name = getFileName(resourceObj.resourceType ? `${resourceObj.resourceType}-${id}` : id, nameMap);\n      const value = def.def ?? null;\n      zip.file(`${name}.json`, value);\n    });\n\n    // Generate blob of zip and save\n    zip.generateAsync({ type: 'blob' }).then((blob) => {\n      FileSaver.saveAs(blob, 'fshonline.zip');\n    });\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"root\" style={{ height: '100vh' }}>\n        <div className={classes.top}>\n          <TopBar />\n          <FSHControls\n            onSUSHIClick={handleSUSHIControls}\n            onGoFSHClick={handleGoFSHControls}\n            onConfigChange={handleConfigChange}\n            config={sharedConfig}\n            fshText={inputFSHText}\n            gofshText={inputFHIRText}\n            resetLogMessages={resetLogMessages}\n            exampleConfig={exampleConfig}\n            exampleMetadata={exampleFilePaths}\n            isWaiting={isWaitingForFSHOutput || isWaitingForFHIROutput}\n            saveAll={saveAll}\n            setIsLineWrapped={setLineWrap}\n            isLineWrapped={isLineWrapped}\n          />\n        </div>\n        <div className={expandConsole ? classes.collapsedMain : classes.expandedMain}>\n          <ExpandedConsoleContext.Provider value={expandConsole}>\n            <Grid\n              className={clsx(classes.container, isDragging && classes.resizeCursor)}\n              container\n              onTouchMove={onTouchMove}\n              onMouseMove={onMouseMove}\n              onMouseUp={onMouseUp}\n              onMouseLeave={onMouseUp}\n            >\n              <Grid\n                item\n                className={clsx(classes.fullHeightGrid, classes.editorPane)}\n                style={{ maxWidth: `calc(${leftWidth}% - 2px)`, flexBasis: `calc(${leftWidth}% - 2px)` }}\n              >\n                <FSHOutput\n                  text={inputFSHText}\n                  initialText={initialText}\n                  updateTextValue={updateInputFSHTextValue}\n                  isWaiting={isWaitingForFSHOutput}\n                  setInitialText={setInitialText}\n                  config={configToShare}\n                  isLineWrapped={isLineWrapped}\n                />\n              </Grid>\n              <Grid\n                item\n                className={clsx(classes.resize, isDragging && classes.resizeBlue)}\n                onTouchStart={onTouchStart}\n                onTouchEnd={onTouchEnd}\n                onMouseDown={onMouseDown}\n                onDoubleClick={handleResetWidth}\n              />\n              <Grid\n                item\n                className={clsx(classes.fullHeightGrid, classes.editorPane)}\n                style={{\n                  maxWidth: `calc(${100 - leftWidth}% - 2px)`,\n                  flexBasis: `calc(${100 - leftWidth}% - 2px)`\n                }}\n              >\n                <JSONOutput\n                  text={inputFHIRText}\n                  showNewText={showNewFHIRText}\n                  setShowNewText={setShowNewFHIRText}\n                  isWaiting={isWaitingForFHIROutput}\n                  updateTextValue={updateInputFHIRTextValue}\n                  isLineWrapped={isLineWrapped}\n                />\n              </Grid>\n            </Grid>\n          </ExpandedConsoleContext.Provider>\n        </div>\n        <div className={expandConsole ? classes.expandedConsole : classes.collapsedConsole}>\n          <ConsoleComponent\n            consoleMessages={infoMessages}\n            problemMessages={problemMessages}\n            problemCount={problemCount}\n            problemColor={problemColor}\n            expandConsole={expandConsole}\n            setExpandConsole={setExpandConsole}\n          />\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n}\n"],"sourceRoot":""}