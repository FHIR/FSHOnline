(this["webpackJsonpfsh-playground"]=this["webpackJsonpfsh-playground"]||[]).push([[0],{339:function(e,t,n){e.exports=n(829)},344:function(e,t,n){},349:function(e,t,n){},505:function(e,t){},507:function(e,t){},521:function(e,t){},523:function(e,t){},538:function(e,t){},540:function(e,t){},550:function(e,t){},552:function(e,t){},829:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(87),c=n.n(o),i=(n(344),n(144)),u=n(844),s=n(847),l=n(851),p=n(845),f=n(846),m=n(849),h=Object(u.a)((function(e){return{root:{flexGrow:1,color:e.palette.text.primary,background:e.palette.warning.dark,position:"static"},docButton:{margin:e.spacing(2)},title:{flexGrow:1,edge:"start",fontFamily:"Consolas"}}}));function d(){var e=h();return a.a.createElement(l.a,{className:e.root},a.a.createElement(p.a,null,a.a.createElement(f.a,{className:e.title,variant:"h6"},"FSH Playground"),a.a.createElement(m.a,{className:e.docButton,variant:"outlined"},"Documentation")))}var g=n(848),v=Object(u.a)((function(e){return{box:{padding:e.spacing(0,2),color:e.palette.text.primary,background:e.palette.grey[400],height:"100%",fontFamily:"Consolas",noWrap:!1}}}));function b(e){var t=v();return e.displaySUSHI&&e.text?a.a.createElement(g.a,{className:t.box,border:1,overflow:"scroll"},a.a.createElement("h4",null,"Your Output: "),a.a.createElement("pre",null,e.text)):a.a.createElement(g.a,{className:t.box,border:1},a.a.createElement("h4",null,"Your JSON Output Will Display Here: "))}var x=Object(u.a)((function(e){return{box:{padding:e.spacing(2),color:e.palette.common.white,background:e.palette.common.black,height:"100%",fontFamily:"Consolas"}}}));function y(){var e=x();return a.a.createElement(g.a,{className:e.box},a.a.createElement("h1",null,"Console is here"))}var w=n(332);n(349),n(350),n(351);n(352),n(353);var S=Object(u.a)((function(e){return{box:{height:"100%"}}}));function k(e){var t=S();return a.a.createElement(g.a,{className:t.box},a.a.createElement(w.UnControlled,{className:"react-codemirror2",value:e.value,options:{theme:"material",lineNumbers:!0},onChange:function(t,n,r){var a;a=r,e.updateTextValue(a),e.updateDoRunSUSHI(!1)}}))}var E=n(37),O=n.n(E),H=n(75),j=n(66),F=n(197),N=n(21),T=n(143),I=n(333),R=n.n(I),C=n(196),D=n.n(C),P=n(104),B=n.n(P);function J(e){return new Promise((function(t){B.a.get("http://packages.fhir.org/hl7.fhir.r4.core/4.0.1",(function(n){var r=R.a.extract();r.on("entry",(function(t,n,r){var a="";n.on("data",(function(e){a+=e.toString()})),n.on("end",(function(){try{var t=JSON.parse(a);t.resourceType&&e.push(t)}catch(n){}r()})),n.resume()})),r.on("finish",(function(){t(e)})),n.pipe(D.a.createGunzip()).pipe(r)}))}))}function U(e,t){return new Promise((function(n,r){var a=e.transaction(["resources"],"readwrite");a.oncomplete=function(){n()},a.onerror=function(e){r(e)};var o=a.objectStore("resources",{keyPath:["id","resourceType"]});t.forEach((function(e){o.add(e)}))}))}function W(e,t){return new Promise((function(n,r){var a=t.transaction(["resources"],"readonly").objectStore("resources",{keyPath:["id","resourceType"]}).openCursor();a.onerror=function(){r("There is an error getting data out!")},a.onsuccess=function(){var t=a.result;t?(e.add(t.value),t.continue()):n(e)}}))}function G(e,t){N.logger.info("Importing FSH text...");var n=Object(j.importText)(e);return new j.FSHTank(n,t)}function Y(e,t){return L.apply(this,arguments)}function L(){return(L=Object(H.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=null,o=!1,c=T.FHIRDefinitions,i=indexedDB.open("FSH Playground Dependencies",n);i.onsuccess=function(){var n=Object(H.a)(O.a.mark((function n(r){var i;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.target.result,i=[],!o){n.next=7;break}return n.next=5,J(i);case 5:return n.next=7,U(a,i);case 7:return n.next=9,W(t,a);case 9:c=n.sent,e(c);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),i.onupgradeneeded=function(e){o=!0,(a=e.target.result).createObjectStore("resources",{keyPath:["id","resourceType"]})},i.onerror=function(e){r(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return _.apply(this,arguments)}function _(){return(_=Object(H.a)(O.a.mark((function e(t){var n,r,a,o,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={canonical:"http://default.org"},r=new T.FHIRDefinitions,1,e.next=5,Y(r,1);case 5:r=e.sent,a=j.FSHTank,e.prev=7,o=[new j.RawFSH(t)],a=G(o,n),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),N.logger.error("Something went wrong when importing the FSH definitions"),e.abrupt("return");case 16:if("4.0.1"===(null===(c=r.fishForFHIR("StructureDefinition",N.Type.Resource))||void 0===c?void 0:c.version)){e.next=20;break}return N.logger.error("StructureDefinition resource not found for v4.0.1. The FHIR R4 package in local cache may be corrupt. Local FHIR cache can be found at <home-directory>/.fhir/packages. For more information, see https://wiki.hl7.org/FHIR_Package_Cache#Location."),e.abrupt("return");case 20:return i=Object(F.exportFHIR)(a,r),e.abrupt("return",i);case 22:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}var z=Object(u.a)((function(e){return{box:{padding:e.spacing(1),color:e.palette.text.primary,background:e.palette.grey[400],height:"4vh",display:"flex;",alignItems:"center",justifyContent:"center"},button:{color:e.palette.common.white,background:e.palette.success.dark}}}));function M(e,t){if("config"!==e)return t}function $(e){var t=z();function n(){return(n=Object(H.a)(O.a.mark((function t(){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e.text);case 2:n=t.sent,r=JSON.stringify(n,M,2),n.codeSystems&&(n.codeSystems.length||n.extensions.length||n.instances.length||n.profiles.length||n.valueSets.length)||(r="Your FSH is invalid. Just keep swimming!"),e.onClick(!0,r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.createElement(g.a,{className:t.box},a.a.createElement(m.a,{className:t.button,onClick:function(){return n.apply(this,arguments)},testid:"Button"},"Run"))}var q=Object(u.a)((function(e){return{container:{flexGrow:1},itemTop:{height:"75vh"},itemBottom:{height:"25vh"}}}));function A(){var e=q(),t=Object(r.useState)(!1),n=Object(i.a)(t,2),o=n[0],c=n[1],u=Object(r.useState)("Edit FSH Here!"),l=Object(i.a)(u,2),p=l[0],f=l[1],m=Object(r.useState)("Your JSON Output Will Display Here: "),h=Object(i.a)(m,2),g=h[0],v=h[1];function x(e,t){c(e),v(t)}return a.a.createElement("div",{className:"root"},a.a.createElement(d,null),a.a.createElement($,{onClick:x,text:p}),a.a.createElement(s.a,{className:e.container,container:!0},a.a.createElement(s.a,{className:e.itemTop,item:!0,xs:6},a.a.createElement(k,{value:p,updateTextValue:function(e){f(e)},updateDoRunSUSHI:x})),a.a.createElement(s.a,{className:e.itemTop,item:!0,xs:6},a.a.createElement(b,{displaySUSHI:o,text:g})),a.a.createElement(s.a,{className:e.itemBottom,item:!0,xs:12},a.a.createElement(y,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[339,1,2]]]);
//# sourceMappingURL=main.0ac8b97f.chunk.js.map