(this["webpackJsonpfsh-online"]=this["webpackJsonpfsh-online"]||[]).push([[0],{352:function(e,t,n){e.exports=n(857)},357:function(e,t,n){},362:function(e,t,n){},554:function(e,t){},556:function(e,t){},570:function(e,t){},572:function(e,t){},587:function(e,t){},589:function(e,t){},599:function(e,t){},601:function(e,t){},857:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(88),c=n.n(o),s=(n(357),n(110)),i=n(872),u=n(875),l=n(879),m=n(873),f=n(874),p=n(877),h=Object(i.a)((function(e){return{root:{flexGrow:1,color:"white",background:"#30638E",position:"static",height:"50%"},docButton:{margin:e.spacing(1),color:"white",textTransform:"none",fontWeight:"bold"},title:{flexGrow:1,edge:"start",fontWeight:"bold"}}}));function g(){var e=h();return a.a.createElement(l.a,{className:e.root},a.a.createElement(m.a,null,a.a.createElement(f.a,{className:e.title,variant:"h6"},"FSH Online"),a.a.createElement(p.a,{className:e.docButton,href:"https://fshschool.org/",target:"_blank"},"Documentation")))}var d=n(876),b=n(344),x=n.n(b),v=Object(i.a)((function(e){return{box:{padding:e.spacing(0,2),color:e.palette.text.primary,background:e.palette.grey[400],height:"100%",noWrap:!1}}}));function y(e){var t=v(),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0)return a.a.createElement("span",null,a.a.createElement("h4",null,"Errors and Warnings"),e.map((function(e,t){return a.a.createElement("pre",{key:t},e)})))}(e.errorsAndWarnings),r=function(e,t,n){if(e&&t&&n){var r=JSON.parse(t);return a.a.createElement("span",null,a.a.createElement("h4",null,"Results"),a.a.createElement(x.a,{src:r,displayDataTypes:!1,collapsed:!1,name:!1}))}return e&&t?a.a.createElement("pre",null,t):""}(e.displaySUSHI,e.text,e.isObject);return a.a.createElement(d.a,{className:t.box,border:1,overflow:"scroll"},a.a.createElement("h3",null,"SUSHI Output"),n,r)}var S=Object(i.a)((function(e){return{box:{padding:e.spacing(2),color:e.palette.common.white,background:e.palette.common.black,height:"200%"},pre:{margin:"0px"}}}));function w(e){var t=S();return a.a.createElement(d.a,{className:t.box,overflow:"scroll"},a.a.createElement("h3",null,"Console"),e.consoleMessages.map((function(e,n){return a.a.createElement("pre",{key:n,className:t.pre},e)})))}var k=n(345),E=n(87),O=n.n(E);n(362),n(363),n(364);n(365),n(366),n(367),O.a.defineSimpleMode("fsh",{start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"atom"},{regex:/\b(Alias|CodeSystem|Expression|Extension|Description|Id|Instance|InstanceOf|Invariant|Mapping|Mixins|Parent|Profile|RuleSet|Severity|Source|Target|Title|Usage|ValueSet|XPath)(?=\s*:)\b/,token:"keyword"},{regex:/\b(and|codes|contains|exclude|from|includes|is-a|is-not-a|named|obeys|only|or|system|units|valueset|where|D|MS|N|SU|TU|\\?!)\b/,token:"def"},{regex:/(\(\s*)(exactly|example|extensible|preferred|required)(\s*\))/,token:"def"},{regex:/\*|->|=|:/,token:"def"},{regex:/\b(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*))\b/,token:"atom"},{regex:/\b(true|false)\b/,token:"string"},{regex:/#[^\s]*/,token:"string"},{regex:/\/\/.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}]});var j=Object(i.a)((function(e){return{box:{height:"100%"}}}));function T(e){var t=j();return a.a.createElement(d.a,{className:t.box},a.a.createElement(k.UnControlled,{className:"react-codemirror2",value:"Edit FSH here!",options:{mode:"fsh",theme:"material",lineNumbers:!0},onChange:function(t,n,r){var a;a=r,e.updateTextValue(a)}}))}var I=n(43),N=n.n(I),H=n(76),F=n(22),W=n(36),R=n(346),C=n.n(R),D=n(205),P=n.n(D),U=n(105),J=n.n(U);function M(e){return new Promise((function(t){J.a.get("https://packages.fhir.org/hl7.fhir.r4.core/4.0.1",(function(n){var r=C.a.extract();r.on("entry",(function(t,n,r){var a="";n.on("data",(function(e){a+=e.toString()})),n.on("end",(function(){try{var t=JSON.parse(a);t.resourceType&&e.push(t)}catch(n){}r()})),n.resume()})),r.on("finish",(function(){t(e)})),n.pipe(P.a.createGunzip()).pipe(r)}))}))}function B(e,t){return new Promise((function(n,r){var a=e.transaction(["resources"],"readwrite");a.oncomplete=function(){n()},a.onerror=function(e){r(e)};var o=a.objectStore("resources",{keyPath:["id","resourceType"]});t.forEach((function(e){o.add(e)}))}))}function A(e,t){return new Promise((function(n,r){var a=t.transaction(["resources"],"readonly").objectStore("resources",{keyPath:["id","resourceType"]}).openCursor();a.onerror=function(){r("There is an error getting data out!")},a.onsuccess=function(){var t=a.result;t?(e.add(t.value),t.continue()):n(e)}}))}var L=W.utils.logger,Y=W.fhirdefs.FHIRDefinitions,_=W.sushiImport.FSHTank,z=W.sushiImport.importText;function G(e,t){L.info("Importing FSH text...");var n=z(e);return new _(n,t)}function V(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(H.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=null,o=!1,c=Y,s=indexedDB.open("FSH Playground Dependencies",n);s.onsuccess=function(){var n=Object(H.a)(N.a.mark((function n(r){var s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.target.result,s=[],!o){n.next=7;break}return n.next=5,M(s);case 5:return n.next=7,B(a,s);case 7:return n.next=9,A(t,a);case 9:c=n.sent,e(c);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onupgradeneeded=function(e){o=!0,(a=e.target.result).createObjectStore("resources",{keyPath:["id","resourceType"]})},s.onerror=function(e){r(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=W.sushiImport.FSHTank,q=W.sushiImport.RawFSH,X=W.sushiExport.exportFHIR,K=W.utils.logger,Q=W.utils.stats,ee=W.utils.Type,te=W.fhirdefs.FHIRDefinitions,ne=0,re=0;function ae(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(H.a)(N.a.mark((function e(t){var n,r,a,o,c,s,i,u,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={canonical:"http://default.org"},r=new te,1,e.next=5,V(r,1);case 5:r=e.sent,a=$,e.prev=7,o=[new q(t)],a=G(o,n),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),K.error("Something went wrong when importing the FSH definitions"),e.abrupt("return");case 16:if("4.0.1"===(null===(c=r.fishForFHIR("StructureDefinition",ee.Resource))||void 0===c?void 0:c.version)){e.next=20;break}return K.error("StructureDefinition resource not found for v4.0.1. The FHIR R4 package in local cache may be corrupt. Local FHIR cache can be found at <home-directory>/.fhir/packages. For more information, see https://wiki.hl7.org/FHIR_Package_Cache#Location."),e.abrupt("return");case 20:return K.info("Converting FSH to FHIR resources..."),s=X(a,r),console.log(" "),i=ce(s,ne,re),u=i.errors,l=i.warns,ne=u,re=l,s.profiles=s.profiles.map((function(e){return e.toJSON(!1)})),s.extensions=s.extensions.map((function(e){return e.toJSON(!1)})),e.abrupt("return",s);case 29:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function ce(e,t,n){var r,a=Q.numError-t,o=Q.numWarn-n,c=Object(F.pad)(e.profiles.length.toString(),8),s=Object(F.pad)(e.extensions.length.toString(),10),i=Object(F.pad)(e.valueSets.length.toString(),9),u=Object(F.pad)(e.codeSystems.length.toString(),11),l=Object(F.pad)(e.instances.length.toString(),9),m=Object(F.pad)("".concat(a," Error").concat(1!==a?"s":""),13),f=Object(F.padStart)("".concat(o," Warning").concat(1!==o?"s":""),12);r=0===a&&0===o?"clean":a>0?"errors":"warnings";var p=Object(F.padEnd)(Object(F.sample)(se[r]),36);ie[r];return["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 SUSHI RESULTS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502 Profiles \u2502 Extensions \u2502 ValueSets \u2502 CodeSystems \u2502 Instances \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(c," \u2502 ").concat(s," \u2502 ").concat(i," \u2502 ").concat(u," \u2502 ").concat(l," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551                                                                 \u2551","\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563","\u2551"+" ".concat(p," ").concat(m," ").concat(f," ")+"\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"].forEach((function(e){return console.log(e)})),{errors:a,warns:o}}var se={clean:["That went swimmingly!","O-fish-ally error free!","Nice! You're totally krilling it!","Cool and So-fish-ticated!","Well hooked and landed!","You earned a PhD in Ichthyology!","You rock, lobster!","Everything is ship-shape!","Ex-clam-ation point!","Ac-clam-ations!","Fin-tastic job!","You're dolphinitely doing great!"],warnings:["Not bad, but you cod do batter!","Something smells fishy...","Warnings... Water those about?","Looks like you are casting about.","A bit pitchy, but tuna-ble."],errors:["Ick! Errors!","Some-fin went wrong...","Unfor-tuna-tely, there are errors.","That really smelt.","You spawned some errors.","Just keep swimming, Dory.","This is the one that got away.","The docs might be bene-fish-al.","This was a turtle disaster.","Something went eely wrong there.","Documentation may be kelp-ful."]},ie={clean:"green",warnings:"#b36200",errors:"red"},ue=Object(i.a)((function(e){return{box:{padding:e.spacing(1),color:e.palette.text.primary,background:e.palette.grey[400],height:"4vh",display:"flex;",alignItems:"center",justifyContent:"center"},button:{color:e.palette.common.white,background:e.palette.success.dark,textTransform:"none",fontWeight:"bold"}}}));function le(e,t){if("config"!==e)return t}function me(e){var t=ue();function n(){return(n=Object(H.a)(N.a.mark((function t(){var n,r,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.resetLogMessages(),e.onClick(!0,"Loading...",!1),n=!0,t.next=5,ae(e.text);case 5:r=t.sent,a=JSON.stringify(r,le,2),r&&r.codeSystems&&(r.codeSystems.length||r.extensions.length||r.instances.length||r.profiles.length||r.valueSets.length)||(n=!1,a=""),e.onClick(!0,a,n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.createElement(d.a,{className:t.box},a.a.createElement(p.a,{className:t.button,onClick:function(){return n.apply(this,arguments)},testid:"Button"},"Run"))}var fe=Object(i.a)((function(e){return{container:{flexGrow:1},itemTop:{height:"75vh"},itemBottom:{height:"25vh"}}})),pe=(console.log,[]),he=[];function ge(){var e=fe(),t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)("Edit FSH here!"),l=Object(s.a)(i,2),m=l[0],f=l[1],p=Object(r.useState)("Your JSON Output Will Display Here: "),h=Object(s.a)(p,2),d=h[0],b=h[1],x=Object(r.useState)(!1),v=Object(s.a)(x,2),S=v[0],k=v[1];return a.a.createElement("div",{className:"root"},a.a.createElement(g,null),a.a.createElement(me,{onClick:function(e,t,n){c(e),b(t),k(n)},text:m,resetLogMessages:function(){pe=[],he=[]}}),a.a.createElement(u.a,{className:e.container,container:!0},a.a.createElement(u.a,{className:e.itemTop,item:!0,xs:6},a.a.createElement(T,{value:m,updateTextValue:function(e){f(e)}})),a.a.createElement(u.a,{className:e.itemTop,item:!0,xs:6},a.a.createElement(y,{displaySUSHI:o,text:d,isObject:S,errorsAndWarnings:he})),a.a.createElement(u.a,{className:e.itemBottom,item:!0,xs:12},a.a.createElement(w,{consoleMessages:pe}))))}console.log=function(e){pe.push(e),e&&(e.startsWith("error")||e.startsWith("warn"))&&he.push(e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[352,1,2]]]);
//# sourceMappingURL=main.e4f18010.chunk.js.map