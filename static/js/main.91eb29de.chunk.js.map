{"version":3,"sources":["App.js","../node_modules/gofsh/dist/optimizer sync","utils/AppRouter.js","serviceWorker.js","index.js","components/ShareLink.js","components/CodeMirrorComponent.js","utils/BitlyWorker.js","components/DeleteConfirmationModal.js","components/JSONOutput.js","components/FSHOutput.js","components/ConsoleComponent.js","utils/Load.js","utils/Processing.js","utils/helpers.js","utils/FSHHelpers.js","components/FSHControls.js","style/FSH-online-logo.png","components/TopBar.js"],"names":["useStyles","makeStyles","theme","container","height","flexGrow","fullHeightGrid","editorPane","resize","width","cursor","background","colors","lightBlue","resizeBlue","resizeCursor","collapsedMain","expandedMain","collapsedConsole","expandedConsole","top","lighterBlue","blue","darkerBlue","editorGrey","lightestGrey","lightGrey","grey","darkerGrey","darkestGrey","red","createTheme","palette","success","main","dark","light","common","typography","fontFamily","overrides","MuiTooltip","tooltip","backgroundColor","fontSize","arrow","color","MuiButton","text","textTransform","fontWeight","MuiIconButton","root","githubURL","defaultInfoMessage","console","log","defaultProblemMessage","infoMessages","problemMessages","problemCount","problemColor","exampleMetadata","convertManifest","childrenArr","forEach","element","type","children","id","path","replaceAll","concat","description","name","getManifestFromGit","_getManifestFromGit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","manifestJSON","wrap","_context3","prev","next","fetch","then","response","json","sent","abrupt","_toConsumableArray","stop","decodeFSH","_x","_decodeFSH","_callee4","encodedFSH","promisedURL","sliced64","displayText","_context4","undefined","expandLink","long_url","slice","includes","length","inflateSync","Buffer","from","toString","getGistContent","_x2","_getGistContent","_callee5","gistId","gistContent","fshContent","_i","_Object$values","f","_context5","res","Object","values","files","truncated","t0","raw_url","content","trim","message","startsWith","push","ExpandedConsoleContext","createContext","App","props","classes","urlParam","match","_useState","useState","_useState2","_slicedToArray","showNewFHIRText","setShowNewFHIRText","_useState3","_useState4","inputFSHText","setInputFSHText","_useState5","_useState6","inputFHIRText","setInputFHIRText","_useState7","_useState8","initialText","setInitialText","_useState9","_useState10","isWaitingForFHIROutput","setIsWaitingForFHIROutput","_useState11","_useState12","isWaitingForFSHOutput","setIsWaitingForFSHOutput","_useState13","_useState14","expandConsole","setExpandConsole","_useState15","_useState16","exampleConfig","setExampleConfig","_useState17","_useState18","exampleFilePaths","setExampleFilePaths","_useState19","_useState20","leftWidth","setLeftWidth","_useState21","_useState22","isDragging","setIsDragging","_useState23","canonical","version","fhirVersion","dependencies","_useState24","configToShare","setConfigToShare","_useState25","_useState26","sharedConfig","setSharedConfig","onMouseUp","e","preventDefault","debouncedMove","clientX","newPercentage","window","innerWidth","getFileName","nameMap","get","count","nameWithCount","set","useEffect","_waitForFSH","_callee","splitIndex","config","parsedConfig","rawConfig","_fshContent","_context","test","params","indexOf","JSON","parse","c","v","d","_fetchExamples","_callee2","_context2","t1","waitForFSH","fetchExamples","_jsx","ThemeProvider","_jsxs","className","style","TopBar","FSHControls","onSUSHIClick","showNewText","sushiOutput","isWaiting","onGoFSHClick","fshOutput","onConfigChange","fshText","gofshText","resetLogMessages","saveAll","Map","zip","JSZip","file","_partition","partition","def","_partition2","defWithId","defWithUntitledId","_resourceObj","_def$def","resourceObj","_unused","resourceType","value","_def$id","_def$def2","_unused2","generateAsync","blob","FileSaver","saveAs","Provider","Grid","clsx","onTouchMove","touches","debounce","onMouseMove","onMouseLeave","item","maxWidth","flexBasis","FSHOutput","updateTextValue","onTouchStart","onTouchEnd","onMouseDown","onDoubleClick","JSONOutput","setShowNewText","ConsoleComponent","consoleMessages","webpackEmptyContext","req","Error","code","keys","resolve","module","exports","AppRouter","Switch","Route","component","exact","Boolean","location","hostname","ReactDOM","render","React","StrictMode","HashRouter","basename","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","iconButton","white","padding","textArea","primary","copyBox","borderRadius","display","justifyContent","alignItems","paddingLeft","textOverflow","ShareLink","openShare","setOpenShare","shareError","setShareError","openGist","setOpenGist","openGistError","setOpenGistError","copyTip","setCopyTip","fshCopied","fshCopyButton","_useState12$","setFshCopied","link","setLink","gistLink","setGistLink","showCreateGistButton","setshowCreateGistButton","handleOpenGist","handleCloseGist","handleCloseGistError","handleOpenShare","_ref","_props$config","_props$config2","_props$config3","_props$config4","encoded","_props$config5","_props$config6","_props$config7","_props$config8","longLink","bitlyLink","bitlySlice","displayLink","deflateSync","stringify","shareText","generateLink","errorNeeded","handleCloseShare","_Fragment","Tooltip","title","placement","IconButton","onClick","LinkIcon","transform","Dialog","open","onClose","fullWidth","DialogTitle","DialogContent","DialogContentText","Box","overflow","CopyToClipboard","onCopy","FileCopy","DialogActions","Button","align","flex","hidden","Link","href","target","TextField","label","onChange","event","_event$target$value$m","bottom","right","autoFocus","require","CodeMirror","defineSimpleMode","meta","lineComment","start","regex","token","sol","closingParen","pop","comment","drawerWidth","box","header","transition","transitions","create","easing","sharp","duration","leavingScreen","headerShift","easeOut","enteringScreen","marginRight","headerLabel","lineHeight","float","whiteSpace","headerActionGroup","paddingRight","headerActions","drawer","flexShrink","drawerPaper","border","drawerPaperExpandedConsole","drawerHeader","minHeight","drawerHeaderIcon","minWidth","contentShift","CodeMirrorComponent","expandedConsoleContext","useContext","drawerOpen","setDrawerOpen","handleDrawerOpen","handleDrawerClose","renderActionIcon","Icon","upperFirst","_defineProperty","renderDrawer","mode","isExamples","copy","save","SaveAlt","delete","Delete","ChevronLeft","ReactCodeMirror","options","placeholder","scrollbarStyle","autoCloseBrackets","lineNumbers","foldGutter","readOnly","gutters","extraKeys","Tab","cm","replaceSelection","foldCode","getCursor","editor","data","Drawer","variant","anchor","paper","ChevronRight","bitly","BitlyClient","process","_generateLink","Promise","shorten","result","_expandLink","encodedFsh","bitlyURL","expand","DeleteConfirmationModal","isOpen","handleCloseModal","handleDelete","fileTreeContent","overflowY","button","list","paddingBottom","listItemError","paddingTop","margin","listItem","marginTop","marginBottom","listItemSelected","listHeader","listIcon","verticalAlign","listIconError","blankIcon","checkFshType","derivation","kind","getIterablePackage","defsPackage","profiles","extensions","logicals","resources","instances","valueSets","codeSystems","map","fhirDefinitions","setFhirDefinitions","propsUpdateText","currentDef","setCurrentDef","defsWithErrors","setDefsWithErrors","openDeleteConfirmation","setOpenDeleteConfirmation","isEqual","packageJSON","iterablePackage","addDefinition","updatedDefs","handleCloseAndDelete","index","splice","newCurrentDef","newCurrentDefText","newErrors","shiftedErrors","i","handleCloseDeleteConfirmation","renderFileTreeView","order","grouped","groupBy","val","sort","a","b","key","List","aId","bId","toLowerCase","currentIndex","isError","ListItem","ErrorOutline","displayValue","_latestJSON$id","_latestJSON$id2","latestJSON","startIcon","Add","defaultName","_resourceObj2","Blob","handleSave","defToDelete","renderDeleteModal","openDeleteModal","setOpenDeleteModal","handleOpenDeleteModal","consoleControls","boxSizing","problemsButton","expandIcon","pre","circle","marginLeft","Console","problemsView","setProblemsView","ExpandMore","ExpandLess","borderBottom","borderColor","logger","utils","unzipDependencies","dependency","returnPackage","resourceArr","emptyDependencies","https","extract","tarStream","on","stream","buf","chunk","resource","resume","statusCode","pipe","zlib","createGunzip","info","loadDependenciesInStorage","database","reject","transaction","oncomplete","onerror","objectStore","keyPath","put","loadAsFHIRDefs","FHIRdefs","displayLoaded","getData","openCursor","onsuccess","iterator","add","continue","getLatestVersionNumber","packageId","isAutomatic","body","_parsedBody$distTags","_parsedBody$distTags$","parsedBody","latest","FHIRDefinitions","fhirdefs","FSHTank","sushiImport","importText","fillTank","rawFSHes","docs","loadAndCleanDatabase","_loadAndCleanDatabase","defs","helperUpdate","loadExternalDependenciesReturn","resolveDependencies","checkForDatabaseUpgrade","shouldUpdate","loadExternalDependencies","cleanDatabase","databaseName","mergedEmpties","flatten","OpenIDBRequest","indexedDB","close","onupgradeneeded","existingObjectStores","_iterator","_step","_loop","objectStoreNames","_createForOfIteratorHelper","getAll","s","n","done","delegateYield","finish","contains","deleteObjectStore","_x3","helperReturn","dep","_x4","_x5","_x6","_loadExternalDependencies","shouldUnzip","_args5","newDependencies","_ref2","_dependencies$i","_version","unzipReturn","_x9","_dependencies$i2","createObjectStore","_x7","_resolveDependencies","_callee6","resolvedDependencies","filteredResolvedDependencies","_context7","all","_ref3","_context6","replaceLatestVersion","_x10","filter","_x8","_replaceLatestVersion","_callee7","updatedVersion","_context8","latestId","sliceDependency","split","trimmedDep","_trimmedDep$split","_trimmedDep$split2","RawFSH","exportFHIR","sushiExport","stats","getRandomPun","Type","runGoFSH","_runGoFSH","input","_configuration$config","_dependencies","_configuration$config2","lake","fisher","fhirProcessor","goFSHDependencies","configuration","coreFhirVersion","dependenciesToAdd","pkg","fsh","reset","gofshUtils","isProcessableContent","processor","WildFHIR","LakeOfFHIR","MasterFisher","FHIRProcessor","replace","processConfig","join","addCoreFHIRVersionAndAutomaticDependencies","getResources","indent","gofshExport","FSHExporter","apiExport","printGoFSHresults","runSUSHI","_runSUSHI","tank","rawFSH","structDef","outPackage","_args2","fishForFHIR","Resource","_instanceMeta","usage","printSUSHIResults","p","toJSON","l","r","numError","numWarn","profileNum","pad","extentNum","logiclNum","resourcNum","valueSetsNumber","codeSystemsNum","instancesNumber","errorNumMsg","wrNumMsg","padStart","aWittyMessageInvolvingABadFishPun","padEnd","proNum","extNum","logNum","resNum","vsNum","csNum","instNum","invNum","invariants","mapNum","mappings","errNumMsg","wrnNumMsg","results","coreFHIRVersion","coreFHIRPackage","getCoreFHIRPackageIdentifier","hasDependency","terminologyPkg","extensionPkg","dependenciesList","currentDependency","ignoreVersion","some","spacing","rightControls","position","leftControls","left","secondaryButton","progressContainer","progress","buttonLeft","buttonRight","runIcon","dialogPaper","maxHeight","dialogActions","dialogActionsMessage","fontStyle","replacer","openExamples","setOpenExamples","openConfig","setOpenConfig","setCanonical","setVersion","setFhirVersion","setDependencies","isGoFSHIndented","setIsGoFSHIndented","isSUSHIRunning","setIsSUSHIRunning","isGoFSHRunning","setIsGoFSHRunning","isFetchingExample","setIsFetchingExample","currentExample","setCurrentExample","currentExampleName","setCurrentExampleName","_props$config3$fhirVe","at","handleCloseExamples","handleCloseConfig","_handleSUSHIClick","parsedDependencies","jsonOutput","FSHOnly","_handleGoFSHClick","gofshInputStrings","igResource","_yield$runGoFSH","_objectSpread","url","_fetchExampleFSH","utf8Decoder","responseReader","fshString","_yield$responseReader","endsWith","TextDecoder","getReader","read","decode","renderTree","nodes","TreeItem","nodeId","node","treeItem","renderItem","xs","testid","CircularProgress","PlayArrow","LibraryBooksIcon","Settings","helperText","defaultValue","newCanonical","newVersion","select","newFhirVersion","MenuItem","dependencyString","FormControlLabel","control","Checkbox","checked","isIndented","FormHelperText","scroll","TreeView","treeView","defaultCollapseIcon","ExpandMoreIcon","defaultExpandIcon","ChevronRightIcon","onNodeSelect","category","clipboard","writeText","AssignmentOutlinedIcon","boxShadow","logo","toolbarBox","exitIcon","docButton","versionText","AppBar","Toolbar","flexDirection","alignSelf","src","alt","m","StylesProvider","injectFirst","Typography","ExitToApp"],"mappings":"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","file":"static/js/main.91eb29de.chunk.js","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport { inflateSync } from 'browserify-zlib';\nimport FileSaver from 'file-saver';\nimport JSZip from 'jszip';\nimport { debounce, partition } from 'lodash';\nimport clsx from 'clsx';\nimport { createTheme, makeStyles } from '@material-ui/core/styles';\nimport { Grid, ThemeProvider } from '@material-ui/core';\nimport { expandLink } from './utils/BitlyWorker';\nimport TopBar from './components/TopBar';\nimport JSONOutput from './components/JSONOutput';\nimport FSHOutput from './components/FSHOutput';\nimport ConsoleComponent from './components/ConsoleComponent';\nimport FSHControls from './components/FSHControls';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    height: '100%',\n    flexGrow: 1\n  },\n  fullHeightGrid: {\n    height: '100%'\n  },\n  editorPane: {\n    // From MaterialUI Grid:\n    flexGrow: '0'\n    // maxWidth and flexBasis set inline based on state\n  },\n  resize: {\n    height: '100%',\n    width: '4px',\n    cursor: 'col-resize',\n    '&:hover': {\n      background: colors.lightBlue\n    }\n  },\n  resizeBlue: {\n    background: '#487AA2'\n  },\n  resizeCursor: {\n    cursor: 'col-resize'\n  },\n  collapsedMain: {\n    width: '100%',\n    height: 'calc(100vh - 116px - 300px)'\n  },\n  expandedMain: {\n    width: '100%',\n    height: 'calc(100vh - 116px - 34px)'\n  },\n  collapsedConsole: {\n    height: '25px',\n    width: '100%'\n  },\n  expandedConsole: {\n    height: '300px',\n    width: '100%'\n  },\n  top: {\n    height: '116px'\n  }\n}));\n\nconst colors = {\n  lighterBlue: '#D8E2EA',\n  lightBlue: '#487AA2',\n  blue: '#30638e',\n  darkerBlue: '#143E61',\n  editorGrey: '#263238',\n  lightestGrey: '#E7ECEE',\n  lightGrey: '#D0D9DD',\n  grey: '#575B5C',\n  darkerGrey: '#3D4345',\n  darkestGrey: '#121D21',\n  red: '#FD6668'\n};\n\nexport const theme = createTheme({\n  palette: {\n    success: {\n      main: colors.blue,\n      dark: colors.darkerBlue,\n      light: colors.lightBlue\n    },\n    common: colors\n  },\n  typography: {\n    fontFamily: 'Open Sans'\n  },\n  overrides: {\n    MuiTooltip: {\n      tooltip: {\n        backgroundColor: colors.darkestGrey,\n        fontSize: '13px'\n      },\n      arrow: {\n        color: colors.darkestGrey\n      }\n    },\n    MuiButton: {\n      text: {\n        textTransform: 'none',\n        fontWeight: 600\n      }\n    },\n    MuiIconButton: {\n      root: {\n        '&:hover': {\n          backgroundColor: colors.grey\n        }\n      }\n    }\n  }\n});\n\nconst githubURL = 'https://raw.githubusercontent.com/FSHSchool/FSHOnline-Examples/main/';\nconst log = console.log; //eslint-disable-line no-unused-vars\nconst defaultInfoMessage = 'There are no messages to display in the console.';\nconst defaultProblemMessage = 'There are no problems to display in the console.';\nlet infoMessages = [defaultInfoMessage];\nlet problemMessages = [defaultProblemMessage];\nlet problemCount = 0;\nlet problemColor = '#FDD835'; // Default yellow color for warnings\nlet exampleMetadata = {};\nconsole.log = function getMessages(message) {\n  if (message && (message.startsWith('error') || message.startsWith('warn'))) {\n    if (problemMessages[0] === defaultProblemMessage) {\n      problemMessages = [];\n    }\n    problemCount++;\n    problemMessages.push(message);\n    if (message.startsWith('error')) {\n      problemColor = '#FD6668';\n    }\n  }\n  if (infoMessages[0] === defaultInfoMessage) {\n    infoMessages = [];\n  }\n  infoMessages.push(message);\n};\n\n/* \nParses metadata into a seperate object and converts the manifest into a form that can\nbe consumed by the TreeView component\n*/\nfunction convertManifest(childrenArr) {\n  childrenArr.forEach((element) => {\n    if (element.type === 'category') {\n      convertManifest(element.children);\n    }\n    element.id = element.path.replaceAll('%20', '-'); // Spaces in file names are replaced with '%20' in Github urls\n    if (element.type === 'file') {\n      exampleMetadata[element.id] = {\n        path: `${githubURL}/Examples/${element.path}`,\n        description: element.description,\n        name: element.name\n      };\n    }\n    delete element.type;\n    delete element.path;\n  });\n}\n\nasync function getManifestFromGit() {\n  let manifestJSON = await fetch(`${githubURL}/index.json`).then((response) => response.json());\n  convertManifest(manifestJSON.children);\n  return [...manifestJSON.children];\n}\n\nexport async function decodeFSH(encodedFSH) {\n  if (encodedFSH.text === undefined) {\n    return '';\n  } else {\n    const promisedURL = await expandLink(encodedFSH);\n\n    // Removes the encoded data from the end of the url, starting at index 38\n    const sliced64 = promisedURL.long_url.slice(40);\n    if (!promisedURL.long_url.includes('https://fshschool.org/FSHOnline/#/share/') || sliced64.length === 0) {\n      return '';\n    } else {\n      const displayText = inflateSync(Buffer.from(sliced64, 'base64')).toString('utf-8');\n      return displayText;\n    }\n  }\n}\n\nasync function getGistContent(gistId) {\n  const gistContent = await fetch(`https://api.github.com/gists/${gistId}`).then((res) => res.json());\n  let fshContent = '';\n  for (let f of Object.values(gistContent?.files || {})) {\n    if (f.truncated) {\n      fshContent += await fetch(f.raw_url).then((res) => res.text());\n    } else {\n      fshContent += f.content;\n    }\n    fshContent += '\\n\\n';\n  }\n  return fshContent.trim();\n}\n\nexport const ExpandedConsoleContext = createContext(false);\n\nexport default function App(props) {\n  const classes = useStyles();\n  const urlParam = props.match;\n  const [showNewFHIRText, setShowNewFHIRText] = useState(false);\n  const [inputFSHText, setInputFSHText] = useState('');\n  const [inputFHIRText, setInputFHIRText] = useState(['']);\n  const [initialText, setInitialText] = useState('');\n  const [isWaitingForFHIROutput, setIsWaitingForFHIROutput] = useState(false);\n  const [isWaitingForFSHOutput, setIsWaitingForFSHOutput] = useState(false);\n  const [expandConsole, setExpandConsole] = useState(false);\n  const [exampleConfig, setExampleConfig] = useState([]);\n  const [exampleFilePaths, setExampleFilePaths] = useState({});\n  const [leftWidth, setLeftWidth] = useState(41.666667); // Initial width based off grid item xs={5} size to align with FSHControls\n  const [isDragging, setIsDragging] = useState(false);\n  const [configToShare, setConfigToShare] = useState({ canonical: '', version: '', fhirVersion: [], dependencies: '' });\n  const [sharedConfig, setSharedConfig] = useState({});\n\n  useEffect(() => {\n    async function waitForFSH() {\n      if (/\\/share/.test(urlParam.path)) {\n        const text = await decodeFSH(urlParam.params);\n        const splitIndex = text.indexOf('\\n');\n        const config = text.slice(0, splitIndex);\n        let parsedConfig;\n        let fshContent = text;\n        try {\n          const rawConfig = JSON.parse(config);\n          if (rawConfig.c != null && rawConfig.v != null && rawConfig.d != null) {\n            parsedConfig = {\n              canonical: rawConfig.c,\n              version: rawConfig.v,\n              fhirVersion: rawConfig.f || [], // Need to support old share links that did not have fhirVersion\n              dependencies: rawConfig.d\n            };\n            // If the config is successfully parsed and has the expected properties,\n            // we can assume the true FSH content begins on the next line\n            fshContent = text.slice(splitIndex + 1);\n          }\n        } catch (e) {\n          // If parse fails, it is likely decoding a legacy link in which all content is FSH, so just don't\n          // set the parsedConfig, and set fshContent to all of the text\n        }\n        setSharedConfig(parsedConfig || {});\n        setInitialText(fshContent);\n      } else if (/\\/gist/.test(urlParam.path)) {\n        const fshContent = await getGistContent(urlParam.params.id);\n        setInitialText(fshContent);\n      }\n    }\n    async function fetchExamples() {\n      setExampleConfig(await getManifestFromGit());\n      setExampleFilePaths(exampleMetadata);\n    }\n    waitForFSH();\n    fetchExamples();\n  }, [urlParam]);\n\n  function resetLogMessages() {\n    infoMessages = [defaultInfoMessage];\n    problemMessages = [defaultProblemMessage];\n    problemCount = 0;\n    problemColor = '#FDD835';\n  }\n\n  function handleSUSHIControls(showNewText, sushiOutput, isWaiting) {\n    setShowNewFHIRText(showNewText);\n    setInputFHIRText(sushiOutput); // JSONOutput component handles resetting initial text, so don't reset here\n    setIsWaitingForFHIROutput(isWaiting);\n  }\n\n  function handleGoFSHControls(fshOutput, isWaiting) {\n    setIsWaitingForFSHOutput(isWaiting);\n    setInitialText(fshOutput === '' ? null : fshOutput); // Reset initial text to null if empty in order to display placeholder text\n  }\n\n  function updateInputFSHTextValue(text) {\n    // This is a bit of a hack to make sure the editor can be reset by a setInitialText(null)\n    if (initialText === '' || initialText === null) {\n      setInitialText(text);\n    }\n    setInputFSHText(text);\n  }\n\n  function updateInputFHIRTextValue(text) {\n    setInputFHIRText(text);\n  }\n\n  function handleConfigChange(config) {\n    setConfigToShare(config);\n  }\n\n  function handleResetWidth() {\n    setLeftWidth(41.666667);\n  }\n\n  function onMouseDown(e) {\n    e.preventDefault();\n    setIsDragging(true);\n  }\n\n  function onMouseUp(e) {\n    e.preventDefault();\n    setIsDragging(false);\n  }\n\n  function onTouchStart() {\n    setIsDragging(true);\n  }\n\n  function onTouchEnd() {\n    setIsDragging(false);\n  }\n\n  function debouncedMove(clientX) {\n    if (isDragging) {\n      const newPercentage = (clientX / window.innerWidth) * 100;\n      if (newPercentage > 10 && newPercentage < 76) {\n        setLeftWidth(newPercentage);\n      }\n    }\n  }\n\n  function onMouseMove(e) {\n    const clientX = e.clientX;\n    if (isDragging) {\n      debounce(() => debouncedMove(clientX), 10)();\n    }\n  }\n\n  function onTouchMove(e) {\n    const clientX = e.touches[0].clientX;\n    if (isDragging) {\n      debounce(() => debouncedMove(clientX), 10)();\n    }\n  }\n\n  function getFileName(name, nameMap) {\n    if (nameMap.get(name)) {\n      let count = nameMap.get(name);\n      let nameWithCount = `${name}-${count}`;\n      while (nameMap.get(nameWithCount)) {\n        count = count + 1;\n        nameWithCount = `${name}-${count}`;\n      }\n      nameMap.set(name, count + 1); // Keep track of how many times the name has been used in this zip file\n      name = nameWithCount; // Append a number if the file name has been used already\n      nameMap.set(nameWithCount, 1); // Keep track of the new file name we created so we don't use it again\n    } else {\n      nameMap.set(name, 1);\n    }\n    return name;\n  }\n\n  function saveAll() {\n    const nameMap = new Map();\n\n    // Build zip file\n    const zip = new JSZip();\n    zip.file('FSH.fsh', inputFSHText);\n\n    // Prioritize FHIR definitions that have a provided id when naming files\n    const [defWithId, defWithUntitledId] = partition(inputFHIRText, (def) => def.id && def.id !== 'Untitled');\n    defWithId.forEach((def) => {\n      let resourceObj;\n      try {\n        resourceObj = JSON.parse(def.def);\n      } catch {\n        /* Ignore errors and just default to name without resourceType */\n      }\n      const name = getFileName(resourceObj?.resourceType ? `${resourceObj.resourceType}-${def.id}` : def.id, nameMap);\n      const value = def.def ?? null;\n      zip.file(`${name}.json`, value);\n    });\n    defWithUntitledId.forEach((def) => {\n      let resourceObj;\n      try {\n        resourceObj = JSON.parse(def.def);\n      } catch {\n        /* Ignore errors and just default to name without resourceType */\n      }\n      const id = def.id ?? 'Untitled';\n      const name = getFileName(resourceObj.resourceType ? `${resourceObj.resourceType}-${id}` : id, nameMap);\n      const value = def.def ?? null;\n      zip.file(`${name}.json`, value);\n    });\n\n    // Generate blob of zip and save\n    zip.generateAsync({ type: 'blob' }).then((blob) => {\n      FileSaver.saveAs(blob, 'fshonline.zip');\n    });\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"root\" style={{ height: '100vh' }}>\n        <div className={classes.top}>\n          <TopBar />\n          <FSHControls\n            onSUSHIClick={handleSUSHIControls}\n            onGoFSHClick={handleGoFSHControls}\n            onConfigChange={handleConfigChange}\n            config={sharedConfig}\n            fshText={inputFSHText}\n            gofshText={inputFHIRText}\n            resetLogMessages={resetLogMessages}\n            exampleConfig={exampleConfig}\n            exampleMetadata={exampleFilePaths}\n            isWaiting={isWaitingForFSHOutput || isWaitingForFHIROutput}\n            saveAll={saveAll}\n          />\n        </div>\n        <div className={expandConsole ? classes.collapsedMain : classes.expandedMain}>\n          <ExpandedConsoleContext.Provider value={expandConsole}>\n            <Grid\n              className={clsx(classes.container, isDragging && classes.resizeCursor)}\n              container\n              onTouchMove={onTouchMove}\n              onMouseMove={onMouseMove}\n              onMouseUp={onMouseUp}\n              onMouseLeave={onMouseUp}\n            >\n              <Grid\n                item\n                className={clsx(classes.fullHeightGrid, classes.editorPane)}\n                style={{ maxWidth: `calc(${leftWidth}% - 2px)`, flexBasis: `calc(${leftWidth}% - 2px)` }}\n              >\n                <FSHOutput\n                  text={inputFSHText}\n                  initialText={initialText}\n                  updateTextValue={updateInputFSHTextValue}\n                  isWaiting={isWaitingForFSHOutput}\n                  setInitialText={setInitialText}\n                  config={configToShare}\n                />\n              </Grid>\n              <Grid\n                item\n                className={clsx(classes.resize, isDragging && classes.resizeBlue)}\n                onTouchStart={onTouchStart}\n                onTouchEnd={onTouchEnd}\n                onMouseDown={onMouseDown}\n                onDoubleClick={handleResetWidth}\n              />\n              <Grid\n                item\n                className={clsx(classes.fullHeightGrid, classes.editorPane)}\n                style={{\n                  maxWidth: `calc(${100 - leftWidth}% - 2px)`,\n                  flexBasis: `calc(${100 - leftWidth}% - 2px)`\n                }}\n              >\n                <JSONOutput\n                  text={inputFHIRText}\n                  showNewText={showNewFHIRText}\n                  setShowNewText={setShowNewFHIRText}\n                  isWaiting={isWaitingForFHIROutput}\n                  updateTextValue={updateInputFHIRTextValue}\n                />\n              </Grid>\n            </Grid>\n          </ExpandedConsoleContext.Provider>\n        </div>\n        <div className={expandConsole ? classes.expandedConsole : classes.collapsedConsole}>\n          <ConsoleComponent\n            consoleMessages={infoMessages}\n            problemMessages={problemMessages}\n            problemCount={problemCount}\n            problemColor={problemColor}\n            expandConsole={expandConsole}\n            setExpandConsole={setExpandConsole}\n          />\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1272;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport App from '../App';\n\nexport default function AppRouter(props) {\n  return (\n    <Switch>\n      <Route path=\"/share/:text\" component={App} />\n      <Route path=\"/gist/:id\" component={App} />\n      <Route path=\"\" exact component={App} />\n    </Switch>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppRouter from './utils/AppRouter';\nimport * as serviceWorker from './serviceWorker';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter basename=\"/\">\n      <AppRouter />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useState } from 'react';\nimport { deflateSync } from 'browserify-zlib';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link as LinkIcon, FileCopy } from '@material-ui/icons';\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  Tooltip,\n  Link,\n  TextField,\n  Box\n} from '@material-ui/core';\nimport { generateLink } from '../utils/BitlyWorker';\nimport { theme } from '../App';\n\nconst useStyles = makeStyles((theme) => ({\n  iconButton: {\n    color: theme.palette.common.white,\n    padding: '3px'\n  },\n  textArea: {\n    width: '100%',\n    color: theme.palette.text.primary,\n    fontWeight: 'bold'\n  },\n  copyBox: {\n    backgroundColor: theme.palette.common.lightGrey,\n    borderRadius: 2,\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingLeft: '3%',\n    textOverflow: 'ellipsis'\n  }\n}));\n\nexport default function ShareLink(props) {\n  const classes = useStyles();\n  const [openShare, setOpenShare] = useState(false);\n  const [shareError, setShareError] = useState(false);\n  const [openGist, setOpenGist] = useState(false);\n  const [openGistError, setOpenGistError] = useState(false);\n  const [copyTip, setCopyTip] = useState('Copy to Clipboard');\n  const [{ fshCopied, fshCopyButton }, setFshCopied] = useState({\n    fshCopied: false,\n    fshCopyButton: 'Copy FSH to Clipboard'\n  });\n  const [link, setLink] = useState();\n  const [gistLink, setGistLink] = useState();\n  const [showCreateGistButton, setshowCreateGistButton] = useState(true);\n\n  const updateGistLink = (event) => {\n    const gistId = event.target.value.match(/gist\\.github\\.com\\/[^/]+\\/(.+)/)?.[1];\n    if (gistId) {\n      setGistLink(`https://fshschool.org/FSHOnline/#/gist/${gistId}`);\n    }\n  };\n\n  const handleShareError = () => {\n    setShareError(true);\n    handleOpenGist();\n  };\n\n  const handleOpenGist = () => {\n    setOpenShare(false);\n    setOpenGist(true);\n    setGistLink('');\n    setFshCopied({ fshCopied: false, fshCopyButton: 'Copy FSH to Clipboard' });\n  };\n\n  const handleCloseGist = () => {\n    setOpenGist(false);\n    setShareError(false);\n  };\n\n  const handleGenerateGistLink = () => {\n    if (gistLink) {\n      handleCloseGist();\n      setLink(gistLink);\n      setOpenShare(true);\n      setCopyTip('Copy to Clipboard');\n      setshowCreateGistButton(false);\n    } else {\n      setOpenGistError(true);\n    }\n  };\n\n  const handleCloseGistError = () => {\n    setOpenGistError(false);\n  };\n\n  const handleOpenShare = async () => {\n    let encoded;\n    if (\n      props.config?.canonical ||\n      props.config?.version ||\n      props.config?.fhirVersion.length > 0 ||\n      props.config?.dependencies\n    ) {\n      encoded = deflateSync(\n        JSON.stringify({\n          c: props.config?.canonical,\n          v: props.config?.version,\n          f: props.config?.fhirVersion,\n          d: props.config?.dependencies\n        }) +\n          '\\n' +\n          props.shareText\n      ).toString('base64');\n    } else {\n      encoded = deflateSync(props.shareText).toString('base64');\n    }\n    const longLink = `https://fshschool.org/FSHOnline/#/share/${encoded}`;\n    const bitlyLink = await generateLink(longLink);\n    if (bitlyLink.errorNeeded === true) {\n      handleShareError();\n    } else {\n      // Removes the encoded data from the end of the url, starting at index 15\n      const bitlySlice = bitlyLink.link.slice(15);\n      const displayLink = `https://fshschool.org/FSHOnline/#/share/${bitlySlice}`;\n      setLink(displayLink);\n      setOpenShare(true);\n      setCopyTip('Copy to Clipboard');\n      setshowCreateGistButton(true);\n    }\n  };\n\n  const handleCloseShare = () => {\n    setOpenShare(false);\n    setShareError(false);\n  };\n\n  const handleFSHcopy = () => {\n    setFshCopied({ fshCopied: true, fshCopyButton: 'FSH Copied to Clipboard' });\n  };\n\n  return (\n    <>\n      <Tooltip title=\"Share FSH\" placement=\"top\" arrow>\n        <IconButton name=\"Share FSH\" className={classes.iconButton} onClick={handleOpenShare}>\n          <LinkIcon fontSize=\"small\" style={{ transform: 'rotate(-45deg)' }} />\n        </IconButton>\n      </Tooltip>\n      <Dialog open={openShare} onClose={handleCloseShare} aria-labelledby=\"form-dialog-title\" maxWidth=\"md\" fullWidth>\n        <DialogTitle id=\"form-dialog-title\">Share</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Use this link to share your FSH with others!</DialogContentText>\n          <Box className={classes.copyBox}>\n            <Box maxWidth=\"90%\" textOverflow=\"ellipsis\" overflow=\"hidden\">\n              {link}\n            </Box>\n            <Tooltip title={copyTip} placement=\"top\" arrow>\n              <CopyToClipboard text={link} onCopy={() => setCopyTip('Link Copied')}>\n                <IconButton style={{ borderRadius: '0%' }}>\n                  <FileCopy />\n                </IconButton>\n              </CopyToClipboard>\n            </Tooltip>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          {showCreateGistButton && (\n            <Button onClick={handleOpenGist} color=\"primary\" style={{ align: 'left' }}>\n              Create Link with Gist\n            </Button>\n          )}\n          <Box style={{ flex: '1 0 0', hidden: true }} />\n          <Button onClick={handleCloseShare} color=\"primary\">\n            Done\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={openGist} onClose={handleCloseGist} aria-labelledby=\"alert-dialog-title\" maxWidth=\"md\" fullWidth>\n        <DialogTitle id=\"alert-dialog-title\">Share with Gist</DialogTitle>\n        {shareError && (\n          <DialogContent style={{ color: theme.palette.common.red }}>\n            Your FSH content is too long to share directly. Please use a Gist to share.\n          </DialogContent>\n        )}\n        <DialogContent>\n          Create a{' '}\n          <Link id=\"gistURL\" href=\"https://gist.github.com/\" target=\"_blank\">\n            Gist\n          </Link>{' '}\n          and paste the URL below to generate a shareable FSH Online link.\n          <TextField id=\"gistURLText\" label=\"Gist URL\" fullWidth onChange={updateGistLink} />\n        </DialogContent>\n        <DialogActions style={{ bottom: 0, right: 0 }}>\n          <Button onClick={handleCloseGist} color=\"primary\">\n            Cancel\n          </Button>\n          <Box style={{ flex: '1 0 0', hidden: true }} />\n          <CopyToClipboard text={props.shareText} onCopy={handleFSHcopy} style={{ align: 'left' }}>\n            <Button color={fshCopied ? 'secondary' : 'primary'}>{fshCopyButton}</Button>\n          </CopyToClipboard>\n          <Button color=\"primary\" onClick={handleGenerateGistLink} style={{ align: 'left' }}>\n            Generate Link from Gist\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={openGistError} onClose={handleCloseGistError} aria-labelledby=\"alert-dialog-title\" maxWidth=\"lg\">\n        <DialogTitle id=\"alert-dialog-title\">Error Creating Gist Link</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Could not generate a link from your Gist URL. Ensure the URL is valid.</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseGistError} color=\"primary\" autoFocus>\n            Keep Swimming!\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { useState, useContext } from 'react';\nimport clsx from 'clsx';\nimport { upperFirst } from 'lodash';\nimport { Button, Box, Drawer, IconButton, Tooltip } from '@material-ui/core';\nimport { ChevronLeft, ChevronRight, Delete, FileCopy, SaveAlt } from '@material-ui/icons';\nimport { UnControlled as ReactCodeMirror } from 'react-codemirror2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CodeMirror from 'codemirror';\nimport { ExpandedConsoleContext } from '../App';\nimport ShareLink from './ShareLink';\nimport '../style/CodeMirrorComponent.css';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\nrequire('codemirror/addon/mode/simple');\nrequire('codemirror/addon/edit/closebrackets');\nrequire('codemirror/addon/display/placeholder');\nrequire('codemirror/addon/comment/comment');\nrequire('codemirror/addon/fold/foldgutter');\nrequire('codemirror/addon/fold/brace-fold');\nrequire('codemirror/mode/xml/xml');\nrequire('codemirror/mode/javascript/javascript');\nrequire('codemirror/addon/scroll/simplescrollbars');\n\n// Define FSH syntax highlighting\n// Regular expressions from https://github.com/standardhealth/vscode-language-fsh/blob/master/syntaxes/fsh.tmLanguage.json\nCodeMirror.defineSimpleMode('fsh', {\n  meta: {\n    lineComment: '//'\n  },\n  start: [\n    // The regex matches the token, the token property contains the type\n    {\n      regex: /\"(?:[^\\\\]|\\\\.)*?(?:\"|$)/,\n      token: 'atom'\n    },\n    {\n      regex:\n        /\\b(Alias|Characteristics|Context|CodeSystem|Expression|Extension|Description|Id|Instance|InstanceOf|Invariant|Logical|Mapping|Mixins|Parent|Profile|Resource|RuleSet|Severity|Source|Target|Title|Usage|ValueSet|XPath)(?=\\s*:)\\b/,\n      token: 'keyword'\n    },\n    {\n      // NOTE: Original regex has (?<=\\s|^) at start and (?=\\s) at the end, and (?<=\\\\bfrom\\\\s*) before 'system'.\n      // However, there are known shortcomings with look ahead/look behind with the simple mode approach\n      // NOTE: \"from system\" must come before \"from\" in order to properly match the full phrase.\n      regex:\n        /(\\s|^)(and|codes|contains|descendent-of|exclude|exists|from system|from|generalizes|include|in|insert|is-a|is-not-a|named|not-in|obeys|only|or|regex|units|valueset|where|D|MS|N|SU|TU|\\\\?!)(\\s|$)/,\n      token: 'def'\n    },\n    {\n      regex: /(\\(\\s*)(exactly|example|extensible|preferred|required)(\\s*\\))/,\n      token: 'def'\n    },\n    {\n      regex: /\\b(CodeableReference|Reference|Canonical)\\s*\\(/,\n      push: 'closingParen', // Matches the closing parenthesis while not highlighting the content between ( )\n      token: 'atom'\n    },\n    {\n      regex: /\\*|->|=|\\+|:/,\n      token: 'def'\n    },\n    {\n      regex: /\\b(https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*))\\b/,\n      token: 'atom'\n    },\n    {\n      // NOTE: Original regex has (?<=\\s|^) at start and (?=\\s) at end\n      regex: /(\\s|^)(true|false)(\\s|$)/,\n      token: 'string'\n    },\n    {\n      // NOTE: Original regex has (?<=\\s|^) and (?=\\s) at end\n      regex: /(\\s|^)(-?\\d+(\\.\\d+)?)(\\s|^)/, // numbers\n      token: 'string'\n    },\n    {\n      regex: /#\"(?:\\\\.|[^\\\\\"])*\"/, // #\"quoted code\"\n      token: 'string'\n    },\n    {\n      regex: /#[^\\s]*/, // #code\n      token: 'string'\n    },\n    {\n      regex: /'.*'/, // 'ucum'\n      token: 'string'\n    },\n    // The following two regex should be combined into: /(\\s|^)\\/\\/.*/\n    // However, the ^ doesn't work as expected. See sol section: https://codemirror.net/demo/simplemode.html\n    // Instead, we break them into two separate cases:\n    // the comment is preceded by whitespace and the comment is at the start of a line.\n    { regex: /\\s\\/\\/.*/, token: 'comment' },\n    { regex: /\\/\\/.*/, token: 'comment', sol: true },\n    // Start of multiline comment\n    { regex: /\\/\\*/, token: 'comment', next: 'comment' }\n  ],\n  closingParen: [\n    {\n      regex: /\\)/,\n      pop: true,\n      token: 'atom'\n    }\n  ],\n  comment: [\n    { regex: /.*?\\*\\//, token: 'comment', next: 'start' },\n    { regex: /.*/, token: 'comment' }\n  ]\n});\n\nconst drawerWidth = 200;\n\nconst useStyles = makeStyles((theme) => ({\n  box: {\n    height: '100%'\n  },\n  header: {\n    fontFamily: 'Open Sans',\n    color: theme.palette.common.white,\n    background: theme.palette.common.darkerGrey,\n    padding: '0px',\n    paddingLeft: '29px', // width of code mirror gutter\n    height: '34px', // 24px + 10px of padding is total height\n    display: 'flex',\n    justifyContent: 'space-between',\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  headerShift: {\n    width: `calc(100% - ${drawerWidth}px - 29px)`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: drawerWidth\n  },\n  headerLabel: {\n    lineHeight: '34px',\n    float: 'left',\n\n    // Ellipse for long resource ids\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  headerActionGroup: {\n    paddingRight: '10px'\n  },\n  headerActions: {\n    alignItems: 'center',\n    display: 'flex'\n  },\n  iconButton: {\n    color: theme.palette.common.white,\n    padding: '3px'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    border: 'none',\n    // necessary for content to be TopBar and in line with editor\n    height: 'calc(100vh - 116px - 34px)',\n    top: '116px'\n  },\n  drawerPaperExpandedConsole: {\n    height: 'calc(100vh - 116px - 300px)'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    // Color to match header\n    color: theme.palette.common.white,\n    background: theme.palette.common.darkerGrey,\n    height: '34px', // Same height as headers on CodeMirror editors\n    minHeight: '34px'\n  },\n  drawerHeaderIcon: {\n    padding: '0px',\n    color: theme.palette.common.white,\n    background: theme.palette.success.main,\n    '&:hover': {\n      background: theme.palette.success.light\n    },\n    borderRadius: 0,\n    height: '100%',\n    width: '34px',\n    minWidth: '34px' // width and minWidth match the height so button is a square\n  },\n  content: {\n    flexGrow: 1,\n    width: '100%',\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  contentShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: 0\n  }\n}));\n\nexport default function CodeMirrorComponent(props) {\n  const classes = useStyles();\n  const expandedConsoleContext = useContext(ExpandedConsoleContext);\n  const [drawerOpen, setDrawerOpen] = useState(true);\n\n  const handleDrawerOpen = () => {\n    setDrawerOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setDrawerOpen(false);\n  };\n\n  //Updates both the text state with the codemirror value\n  function updateText(text) {\n    props.updateTextValue(text);\n  }\n\n  const renderActionIcon = (Icon, label, onClick, style = {}) => {\n    return (\n      <Tooltip title={upperFirst(label)} placement=\"top\" arrow>\n        <IconButton name={label} className={classes.iconButton} aria-label={label} onClick={onClick}>\n          <Icon fontSize=\"small\" style={style} />\n        </IconButton>\n      </Tooltip>\n    );\n  };\n\n  const renderActionIcons = () => {\n    // Render only specified actions\n    return (\n      <div className={classes.headerActions}>\n        <div className={classes.headerActionGroup}>\n          {props.mode === 'fsh' && !props.isExamples && <ShareLink shareText={props.value} config={props.config} />}\n          {props.copy && renderActionIcon(FileCopy, 'copy', () => {})}\n          {props.save && renderActionIcon(SaveAlt, 'save', props.save)}\n          {props.delete && renderActionIcon(Delete, 'delete', props.delete)}\n        </div>\n        {props.renderDrawer && !drawerOpen && (\n          <IconButton name=\"expand\" className={classes.drawerHeaderIcon} aria-label=\"expand\" onClick={handleDrawerOpen}>\n            <ChevronLeft />\n          </IconButton>\n        )}\n      </div>\n    );\n  };\n\n  const renderDrawer = () => {\n    return (\n      <Drawer\n        className={classes.drawer}\n        data-testid={'editor-drawer'}\n        variant=\"persistent\"\n        anchor=\"right\"\n        open={drawerOpen}\n        classes={{\n          paper: clsx(classes.drawerPaper, expandedConsoleContext && classes.drawerPaperExpandedConsole)\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <Button\n            name=\"collapse\"\n            aria-label=\"collapse\"\n            className={classes.drawerHeaderIcon}\n            onClick={handleDrawerClose}\n          >\n            <ChevronRight />\n          </Button>\n        </div>\n        {props.renderDrawer()}\n      </Drawer>\n    );\n  };\n\n  return (\n    <Box className={classes.box}>\n      <div\n        className={clsx(classes.header, {\n          [classes.headerShift]: props.renderDrawer && drawerOpen\n        })}\n      >\n        <div title={props.name} className={classes.headerLabel}>\n          {props.name}\n        </div>\n        {renderActionIcons()}\n      </div>\n      <ReactCodeMirror\n        className={clsx('react-codemirror2', props.renderDrawer && classes.content, {\n          [classes.contentShift]: props.renderDrawer && drawerOpen\n        })}\n        value={props.initialText}\n        options={{\n          mode: props.mode,\n          theme: 'material',\n          placeholder: props.placeholder,\n          scrollbarStyle: 'overlay',\n          autoCloseBrackets: true,\n          lineNumbers: true,\n          foldGutter: true,\n          readOnly: props.isExamples,\n          gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n          extraKeys: {\n            Tab: (cm) => {\n              // Replace tab character with two spaces\n              // Example described here: https://codemirror.net/doc/manual.html#keymaps\n              cm.replaceSelection('  ');\n            },\n            'Ctrl-/': 'toggleComment',\n            'Cmd-/': 'toggleComment',\n            'Ctrl-Q': (cm) => {\n              cm.foldCode(cm.getCursor());\n            }\n          }\n        }}\n        onChange={(editor, data, value) => {\n          updateText(value);\n        }}\n      />\n      {props.renderDrawer && renderDrawer()}\n    </Box>\n  );\n}\n","const BitlyClient = require('bitly').BitlyClient;\nconst bitly = new BitlyClient(process.env.REACT_APP_BITLY_KEY);\n\nexport async function generateLink(longLink) {\n  return new Promise((resolve) => {\n    bitly\n      .shorten(longLink)\n      .then(function (result) {\n        resolve({ link: result.link, errorNeeded: false });\n      })\n      .catch(function (error) {\n        if (process.env.REACT_APP_BITLY_KEY == null) {\n          console.error(\n            'Error: REACT_APP_BITLY_KEY needs to be set as an environment variable in order to share FSH Online links.'\n          );\n          resolve({ link: undefined, errorNeeded: true });\n        } else {\n          resolve({ link: undefined, errorNeeded: true });\n        }\n      });\n  });\n}\n\nexport async function expandLink(encodedFsh) {\n  const bitlyURL = `https://bit.ly/${encodedFsh.text}`;\n  return new Promise((resolve) => {\n    bitly\n      .expand(bitlyURL)\n      .then(function (result) {\n        resolve(result);\n      })\n      .catch(function (error) {\n        console.error(error);\n      });\n  });\n}\n","import React from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core';\n\nexport default function DeleteConfirmationModal(props) {\n  return (\n    <Dialog open={props.isOpen} onClose={props.handleCloseModal} aria-labelledby=\"delete-confirmation-dialog\">\n      <DialogTitle id=\"delete-confirmation-dialog-title\">Delete {props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to delete {props.item}? This action cannot be undone.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={props.handleCloseModal} color=\"primary\" autoFocus>\n          Cancel\n        </Button>\n        <Button onClick={props.handleDelete} color=\"secondary\">\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport FileSaver from 'file-saver';\nimport { groupBy, isEqual } from 'lodash';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { Button, List, ListItem, Tooltip } from '@material-ui/core';\nimport { Add, ErrorOutline } from '@material-ui/icons';\nimport CodeMirrorComponent from './CodeMirrorComponent';\nimport DeleteConfirmationModal from './DeleteConfirmationModal';\n\nconst useStyles = makeStyles((theme) => ({\n  fileTreeContent: {\n    overflowY: 'scroll',\n    height: '100%'\n  },\n  button: {\n    color: theme.palette.common.white,\n    background: theme.palette.success.main,\n    '&:hover': {\n      background: theme.palette.success.dark\n    },\n    border: '8px solid white',\n    fontSize: '13px',\n    width: '100%'\n  },\n  list: {\n    padding: '8px',\n    paddingLeft: '0px',\n    paddingBottom: '0px',\n    fontSize: '13px'\n  },\n  listItemError: {\n    paddingTop: '5px',\n    paddingBottom: '5px',\n    margin: 0\n  },\n  listItem: {\n    background: theme.palette.common.lightestGrey,\n    paddingTop: '5px',\n    paddingBottom: '5px',\n    marginTop: '5px',\n    marginBottom: '5px',\n    paddingLeft: '5px',\n    // paddingRight is driven by ListItem (16px)\n    margin: 0,\n    '&:hover': {\n      background: theme.palette.common.lightGrey\n    },\n\n    // Ellipse for long resource ids\n    display: 'block',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  listItemSelected: {\n    background: theme.palette.common.editorGrey, // editor background color\n    color: theme.palette.common.white,\n    '&:hover': {\n      background: theme.palette.common.darkestGrey\n    }\n  },\n  listHeader: {\n    padding: '5px',\n    paddingLeft: '15px'\n  },\n  listIcon: {\n    color: theme.palette.success.main,\n    verticalAlign: 'middle',\n    fontSize: '13px',\n    paddingLeft: '3px',\n    paddingRight: '3px'\n  },\n  listIconError: {\n    color: theme.palette.common.red\n  },\n  blankIcon: {\n    paddingLeft: '19px' // width of icon\n  }\n}));\n\nconst checkFshType = (def) => {\n  // The criteria in this function is based on isSDForInstance in GoFSH (LakeOfFHIR.ts)\n  // A Profile has kind \"resource\", \"complex-type\", or \"primitive-type\" and derivation \"constraint\".\n  // An Extension has kind \"complex-type\", derivation \"constraint\", and type \"Extension\". It's a special case of Profile.\n  // A Logical has kind \"logical\" and derivation \"specialization\".\n  // A Resource has kind \"resource\" and derivation \"specialization\".\n  // Any other combination of values for kind and derivation represents an Instance.\n  if (def.resourceType === 'ValueSet' || def.resourceType === 'CodeSystem') {\n    return def.resourceType;\n  } else if (def.resourceType === 'StructureDefinition') {\n    if (def.derivation === 'specialization') {\n      if (def.kind === 'resource') {\n        return 'Resource';\n      } else if (def.kind === 'logical') {\n        return 'Logical Model';\n      }\n    } else if (def.derivation === 'constraint') {\n      if (def.kind === 'complex-type' && def.type === 'Extension') {\n        return 'Extension';\n      } else if (['resource', 'complex-type', 'primitive-type', 'logical'].includes(def.kind)) {\n        return 'Profile';\n      }\n    }\n  }\n\n  // We could have an instance of a SD that can't be a Profile, Extension, Logical, or Resource\n  // So we want to check for any resource that hasn't already been categorized\n  if (def.resourceType != null) {\n    return 'Instance';\n  }\n\n  // Otherwise we don't know the type. This will default to 'Unknown Type' if it is missing.\n  return null;\n};\n\n// Flatten the package so we can render and navigate it more easily,\n// but keep high level attributes we'll need accessible\nconst getIterablePackage = (defsPackage) => {\n  const defArray = [\n    ...defsPackage.profiles,\n    ...defsPackage.extensions,\n    ...defsPackage.logicals,\n    ...defsPackage.resources,\n    ...defsPackage.instances,\n    ...defsPackage.valueSets,\n    ...defsPackage.codeSystems\n  ];\n  return defArray.map((def) => ({ resourceType: checkFshType(def), id: def.id, def: JSON.stringify(def, null, 2) }));\n};\n\nexport default function JSONOutput(props) {\n  const classes = useStyles();\n  const [initialText, setInitialText] = useState('');\n  const [fhirDefinitions, setFhirDefinitions] = useState([{ resourceType: null, id: 'Untitled', def: null }]);\n  const { setShowNewText, updateTextValue: propsUpdateText } = props;\n  const [currentDef, setCurrentDef] = useState(0);\n  const [defsWithErrors, setDefsWithErrors] = useState([]);\n  const [openDeleteConfirmation, setOpenDeleteConfirmation] = useState(false);\n\n  useEffect(() => {\n    // This case represents when we receive a new Package from SUSHI\n    if (props.showNewText && !isEqual(props.text, [''])) {\n      setShowNewText(false); // Indicate that we no longer have new data we need to load so we don't come back here too early\n      let packageJSON;\n      try {\n        packageJSON = JSON.parse(props.text);\n      } catch (e) {\n        packageJSON = {\n          profiles: [],\n          extensions: [],\n          logicals: [],\n          resources: [],\n          instances: [],\n          valueSets: [],\n          codeSystems: []\n        };\n      }\n      const iterablePackage = getIterablePackage(packageJSON);\n      setFhirDefinitions(iterablePackage);\n      setCurrentDef(0);\n      setInitialText(iterablePackage.length > 0 ? iterablePackage[0].def : '');\n      propsUpdateText(iterablePackage); // The value of text kept on props should be the iterable and stringified package\n    } else if (props.isWaiting) {\n      setInitialText(null); // Reset the text to null when loading to reset the editor and display placeholder text\n      setFhirDefinitions([]); // Reset FHIR definitions to clear out file tree\n    }\n  }, [props.text, props.showNewText, props.isWaiting, propsUpdateText, setShowNewText]);\n\n  const updateTextValue = (text) => {\n    // We're waiting for a new package to load, so we don't want the editor to update yet\n    if (props.isWaiting) return;\n\n    // Update the definition we're currently editing\n    const updatedDefs = [...fhirDefinitions];\n\n    // Check if there is a JSON syntax error in the editor\n    try {\n      // If the editor is blank, we want to consider it an empty JSON object so that it is valid JSON\n      const latestJSON = text === '' ? {} : JSON.parse(text);\n      // If there was an error, mark it as resolved\n      if (defsWithErrors.includes(currentDef)) {\n        const newErrors = [...defsWithErrors];\n        newErrors.splice(defsWithErrors.indexOf(currentDef), 1);\n        setDefsWithErrors(newErrors);\n      }\n\n      // If it's new, set metadata (definition text is set below)\n      if (!fhirDefinitions[currentDef]) {\n        updatedDefs[currentDef] = {\n          resourceType: checkFshType(latestJSON),\n          id: latestJSON.id ?? 'Untitled'\n        };\n      }\n\n      // Update resource type if it has changed\n      if (!fhirDefinitions[currentDef] || latestJSON.resourceType !== fhirDefinitions[currentDef].resourceType) {\n        updatedDefs[currentDef].resourceType = checkFshType(latestJSON);\n      }\n\n      // Update id if it has changed or it is new\n      if (!fhirDefinitions[currentDef] || latestJSON.id !== fhirDefinitions[currentDef].id) {\n        updatedDefs[currentDef].id = latestJSON.id ?? 'Untitled';\n      }\n    } catch (e) {\n      // Invalid JSON typed. Keep track of index.\n      if (!defsWithErrors.includes(currentDef)) {\n        const newErrors = [...defsWithErrors];\n        newErrors.push(currentDef);\n        setDefsWithErrors(newErrors);\n      }\n    }\n\n    // Update the text - regardless if it was valid JSON\n    if (updatedDefs[currentDef]) {\n      updatedDefs[currentDef].def = text;\n    }\n    setFhirDefinitions(updatedDefs);\n    props.updateTextValue(updatedDefs);\n\n    // This is a bit of a hack to make sure the editor can be reset by a setInitialText(null)\n    if (initialText === null) {\n      setInitialText(text);\n    }\n  };\n\n  const addDefinition = () => {\n    const updatedDefs = [...fhirDefinitions];\n    updatedDefs.push({ resourceType: null, id: 'Untitled', def: null });\n    setCurrentDef(updatedDefs.length - 1);\n    setFhirDefinitions(updatedDefs);\n    setInitialText(null);\n    props.updateTextValue(updatedDefs);\n  };\n\n  const handleCloseAndDelete = () => {\n    const index = currentDef;\n    const updatedDefs = [...fhirDefinitions];\n    updatedDefs.splice(index, 1); // Remove definition to be deleted\n    if (updatedDefs.length === 0) {\n      // Ensure list is not empty so there is always a definition in the file tree\n      updatedDefs.push({ resourceType: null, id: 'Untitled', def: null });\n    }\n    setFhirDefinitions(updatedDefs);\n\n    // If we deleted the currently viewed definition or any before it, update it\n    if (index <= currentDef) {\n      let newCurrentDef = 0;\n      if (index < currentDef) {\n        newCurrentDef = currentDef - 1;\n      }\n      setCurrentDef(newCurrentDef);\n      const newCurrentDefText = updatedDefs.length > 0 ? updatedDefs[newCurrentDef].def : null;\n      setInitialText(newCurrentDefText);\n    }\n\n    // Update error tracking\n    const newErrors = [...defsWithErrors];\n    if (defsWithErrors.includes(index)) {\n      // If the definition had an error, remove it from the list\n      newErrors.splice(defsWithErrors.indexOf(index), 1);\n    }\n    // Shift any indices that came after the deleted definition to properly track errors\n    const shiftedErrors = newErrors.map((i) => (i < index ? i : i - 1));\n    setDefsWithErrors(shiftedErrors);\n\n    setOpenDeleteConfirmation(false);\n    props.updateTextValue(updatedDefs);\n  };\n\n  const handleOpenDeleteConfirmation = () => {\n    setOpenDeleteConfirmation(true);\n  };\n\n  const handleCloseDeleteConfirmation = () => {\n    setOpenDeleteConfirmation(false);\n  };\n\n  const handleSave = (def, defaultName) => {\n    let resourceObj;\n    try {\n      resourceObj = JSON.parse(def);\n    } catch {\n      /* Ignore errors and just default to name without resourceType */\n    }\n    FileSaver.saveAs(\n      new Blob([def]),\n      resourceObj?.resourceType && resourceObj?.id\n        ? `${resourceObj.resourceType}-${resourceObj.id}.json`\n        : `${name}.json`\n    );\n  };\n\n  const renderDeleteModal = () => {\n    const defToDelete = fhirDefinitions[currentDef];\n    if (!defToDelete) {\n      return;\n    }\n    const type = defToDelete.resourceType || 'Unknown Type';\n    const id = defToDelete.id || 'Untitled';\n    return (\n      <DeleteConfirmationModal\n        title={'FHIR JSON'}\n        item={`${type} ${id}`}\n        isOpen={openDeleteConfirmation}\n        handleCloseModal={handleCloseDeleteConfirmation}\n        handleDelete={handleCloseAndDelete}\n      />\n    );\n  };\n\n  const renderFileTreeView = () => {\n    const order = [\n      'Profiles',\n      'Extensions',\n      'Logical Models',\n      'Resources',\n      'ValueSets',\n      'CodeSystems',\n      'Instances',\n      'Unknown Type'\n    ];\n    const grouped = groupBy(fhirDefinitions, (val) => {\n      if (val && val.resourceType) return `${val.resourceType}s`;\n      return 'Unknown Type';\n    });\n\n    return Object.keys(grouped)\n      .sort((a, b) => order.indexOf(a) - order.indexOf(b)) // Sort so we keep a defined order of types in the tree\n      .map((key) => {\n        return (\n          <List component=\"nav\" key={key} className={classes.list}>\n            <div className={classes.listHeader}>{key}</div>\n            {grouped[key]\n              .sort((a, b) => {\n                const aId = a.id ? a.id : 'Untitled'; // Treat missing or blank ids as \"Untitled\"\n                const bId = b.id ? b.id : 'Untitled';\n                return aId.toLowerCase() < bId.toLowerCase() ? -1 : aId.toLowerCase() > bId.toLowerCase() ? 1 : 0;\n              }) // Sort ids alphabetically\n              .map((def, i) => {\n                const currentIndex = fhirDefinitions.indexOf(def);\n                const isError = defsWithErrors.includes(currentIndex);\n                return (\n                  <ListItem\n                    button\n                    key={i}\n                    title={def?.id || 'Untitled'}\n                    data-testid={`${key}-defId`}\n                    className={clsx(\n                      classes.listItem,\n                      isError && classes.listItemError,\n                      currentIndex === currentDef && classes.listItemSelected\n                    )}\n                    onClick={() => {\n                      setCurrentDef(currentIndex);\n                      setInitialText(def.def);\n                    }}\n                  >\n                    {defsWithErrors.includes(currentIndex) ? (\n                      <Tooltip title=\"Invalid JSON\" placement=\"top\" arrow>\n                        <ErrorOutline className={clsx(classes.listIcon, classes.listIconError)} />\n                      </Tooltip>\n                    ) : (\n                      <span className={classes.blankIcon} />\n                    )}\n                    {def?.id || 'Untitled'}\n                  </ListItem>\n                );\n              })}\n          </List>\n        );\n      });\n  };\n\n  const renderDrawer = () => {\n    return (\n      <>\n        <Button className={classes.button} startIcon={<Add />} onClick={addDefinition}>\n          New JSON Editor\n        </Button>\n        <div className={classes.fileTreeContent}>{renderFileTreeView()}</div>\n      </>\n    );\n  };\n\n  const displayValue = fhirDefinitions.length > 0 ? fhirDefinitions[currentDef].def : null;\n  const name = `${fhirDefinitions.length > 0 ? fhirDefinitions[currentDef].id : 'Untitled'}`;\n\n  return (\n    <>\n      <CodeMirrorComponent\n        name={`FHIR JSON: ${name}`}\n        value={displayValue}\n        initialText={initialText}\n        updateTextValue={updateTextValue}\n        mode={'application/json'}\n        placeholder={\n          props.isWaiting\n            ? 'Loading...'\n            : 'Paste or edit single FHIR JSON artifact here... \\nCreate additional FHIR JSON artifacts to the right.'\n        }\n        renderDrawer={renderDrawer}\n        isExamples={false}\n        delete={handleOpenDeleteConfirmation}\n        save={() => handleSave(displayValue, name)}\n      />\n      {openDeleteConfirmation && renderDeleteModal()}\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport FileSaver from 'file-saver';\nimport CodeMirrorComponent from './CodeMirrorComponent';\nimport DeleteConfirmationModal from './DeleteConfirmationModal';\n\nexport default function FSHOutput(props) {\n  const [openDeleteModal, setOpenDeleteModal] = useState(false);\n\n  const handleOpenDeleteModal = () => {\n    setOpenDeleteModal(!openDeleteModal);\n  };\n\n  const handleCloseAndDelete = () => {\n    setOpenDeleteModal(false);\n    props.setInitialText('');\n  };\n\n  const handleSave = () => {\n    FileSaver.saveAs(new Blob([props.text]), 'FSH.fsh');\n  };\n\n  return (\n    <>\n      <CodeMirrorComponent\n        name={'FSH'}\n        isExamples={false}\n        value={props.text}\n        initialText={props.initialText}\n        updateTextValue={props.updateTextValue}\n        mode={'fsh'}\n        placeholder={props.isWaiting ? 'Loading...' : 'Paste or edit FSH here...'}\n        delete={handleOpenDeleteModal}\n        save={handleSave}\n        config={props.config}\n      />\n      {openDeleteModal && (\n        <DeleteConfirmationModal\n          title={'FHIR Shorthand'}\n          item={'all FSH'}\n          isOpen={openDeleteModal}\n          handleCloseModal={handleOpenDeleteModal}\n          handleDelete={handleCloseAndDelete}\n        />\n      )}\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Box, Button, IconButton } from '@material-ui/core';\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme) => ({\n  consoleControls: {\n    background: theme.palette.common.darkestGrey,\n    height: '34px',\n    boxSizing: 'border-box',\n    display: 'flex;',\n    alignItems: 'center',\n    justifyContent: 'left'\n  },\n  box: {\n    paddingLeft: '29px', // Same padding as header of code mirror\n    color: theme.palette.common.white,\n    background: theme.palette.common.darkestGrey,\n    height: 'calc(100% - 34px)',\n    overflow: 'scroll',\n    boxSizing: 'border-box'\n  },\n  button: {\n    marginRight: '10px',\n    color: theme.palette.common.white,\n    textTransform: 'none',\n    padding: 0\n  },\n  problemsButton: {\n    padding: 0,\n    color: theme.palette.common.white,\n    textTransform: 'none'\n  },\n  expandIcon: {\n    width: '29px', // Lines up with padding,\n    color: theme.palette.common.white,\n    padding: 0\n  },\n  pre: {\n    margin: '0px'\n  },\n  circle: {\n    'border-radius': '50%',\n    'border-style': 'solid',\n    'border-width': '2px',\n    'min-width': '20px',\n    height: '20px',\n    paddingLeft: 1,\n    paddingRight: 1,\n    background: '#263238',\n    'align-items': 'center',\n    display: 'flex',\n    marginLeft: 4,\n    'justify-content': 'center',\n    padding: 0\n  }\n}));\n\nexport default function Console(props) {\n  const classes = useStyles();\n  const [problemsView, setProblemsView] = useState(false);\n  const { problemCount, setExpandConsole } = props;\n\n  useEffect(() => {\n    // When props.problemCount changes and if there is a problem, make sure to open the console.\n    // If the problemCount is 0, we don't need to open it.\n    // The console should be able to be closed, so don't track whether the props.expandConsole value has changed.\n    if (problemCount) {\n      setExpandConsole(true);\n    }\n  }, [problemCount, setExpandConsole]);\n\n  const toggleExpandConsole = () => {\n    props.setExpandConsole(!props.expandConsole);\n  };\n\n  const setMessagesConsole = () => {\n    setProblemsView(false);\n    props.setExpandConsole(true);\n  };\n\n  const setProblemsConsole = () => {\n    setProblemsView(true);\n    props.setExpandConsole(true);\n  };\n\n  return (\n    <>\n      <Box className={classes.consoleControls}>\n        <IconButton\n          onClick={toggleExpandConsole}\n          aria-label={props.expandConsole ? 'collapse console' : 'expand console'}\n          className={classes.expandIcon}\n        >\n          {props.expandConsole ? <ExpandMore /> : <ExpandLess />}\n        </IconButton>\n        <Button onClick={setMessagesConsole} className={classes.button}>\n          <p\n            style={{\n              borderBottom: props.expandConsole && !problemsView ? '1px solid white' : 'none',\n              margin: '0'\n            }}\n          >\n            Console\n          </p>\n        </Button>\n        <Button onClick={setProblemsConsole} className={classes.problemsButton}>\n          <p\n            style={{\n              borderBottom:\n                props.expandConsole && problemsView\n                  ? `1px solid ${!props.problemCount ? 'white' : props.problemColor}`\n                  : 'none',\n              margin: '0'\n            }}\n          >\n            Problems\n          </p>\n          <div\n            className={classes.circle}\n            style={{ borderColor: `${!props.problemCount ? 'white' : props.problemColor}` }}\n          >\n            {props.problemCount}\n          </div>\n        </Button>\n      </Box>\n      <Box style={{ display: props.expandConsole ? 'block' : 'none' }} className={classes.box}>\n        {problemsView\n          ? props.problemMessages.map((message, i) => {\n              return (\n                <pre key={i} className={classes.pre}>\n                  {message}\n                </pre>\n              );\n            })\n          : props.consoleMessages.map((message, i) => {\n              return (\n                <pre key={i} className={classes.pre}>\n                  {message}\n                </pre>\n              );\n            })}\n      </Box>\n    </>\n  );\n}\n","import tarStream from 'tar-stream';\nimport zlib from 'zlib';\nimport https from 'https';\nimport { utils } from 'fsh-sushi';\nconst logger = utils.logger;\n\nexport function unzipDependencies(resources, dependency, id) {\n  let returnPackage = { resourceArr: resources, emptyDependencies: [] };\n  return new Promise((resolve) => {\n    https\n      .get(`https://packages.fhir.org/${dependency}/${id}`, function (res) {\n        const extract = tarStream.extract();\n        // Unzip files\n        extract.on('entry', function (header, stream, next) {\n          let buf = '';\n          stream.on('data', function (chunk) {\n            buf += chunk.toString();\n          });\n          stream.on('end', function () {\n            try {\n              const resource = JSON.parse(buf);\n              if (resource.resourceType) {\n                returnPackage.resourceArr.push(resource);\n              }\n            } catch {} //eslint-disable-line no-empty\n            next();\n          });\n          stream.resume();\n        });\n        extract.on('finish', function () {\n          resolve(returnPackage);\n        });\n        if (res.statusCode < 400) {\n          res.pipe(zlib.createGunzip()).pipe(extract);\n          logger.info(`Downloaded ${dependency}#${id}`);\n        } else {\n          if (id === 'current' || id === 'dev') {\n            logger.error(`FSHOnline does not currently support \"current\" or \"dev\" package versions`);\n          } else {\n            logger.error(`Your dependency ${dependency}#${id} could not be loaded. Your output may be invalid.`);\n            returnPackage.emptyDependencies.push(`${dependency}${id}`);\n          }\n          resolve(returnPackage);\n        }\n      })\n      .on('error', (e) => {\n        logger.error('An error occurred while downloading FHIR packages. Your output may be invalid: ', e);\n        returnPackage.emptyDependencies.push(`${dependency}${id}`);\n        resolve(returnPackage);\n      });\n  });\n}\n\nexport function loadDependenciesInStorage(database, resources, dependency, id) {\n  return new Promise((resolve, reject) => {\n    // Loads parsed json into indexDB\n    const transaction = database.transaction([`${dependency}${id}`], 'readwrite');\n    transaction.oncomplete = () => {\n      resolve();\n    };\n    transaction.onerror = (event) => {\n      reject(event);\n    };\n    const objectStore = transaction.objectStore(`${dependency}${id}`, { keyPath: ['id', 'resourceType'] });\n    resources.forEach((res) => {\n      if (res.id && res.resourceType) {\n        objectStore.put(res);\n      }\n    });\n  });\n}\n\nexport function loadAsFHIRDefs(FHIRdefs, database, dependency, id) {\n  // Convert database data into FHIR Definitions\n  return new Promise((resolve, reject) => {\n    let displayLoaded = false;\n    const getData = database\n      .transaction([`${dependency}${id}`], 'readonly')\n      .objectStore(`${dependency}${id}`, { keyPath: ['id', 'resourceType'] })\n      .openCursor();\n    getData.onerror = function () {\n      reject('There is an error getting data out!');\n    };\n    getData.onsuccess = function () {\n      const iterator = getData.result;\n      if (iterator) {\n        displayLoaded = true;\n        FHIRdefs.add(iterator.value);\n        iterator.continue();\n      } else {\n        if (displayLoaded) {\n          logger.info(`Loaded package ${dependency}#${id}`);\n        }\n        resolve(FHIRdefs);\n      }\n    };\n  });\n}\n\nexport function getLatestVersionNumber(dependency) {\n  return new Promise((resolve, reject) => {\n    const { packageId, isAutomatic } = dependency;\n    https.get(`https://packages.fhir.org/${packageId}`, function (res) {\n      let body = '';\n      res.on('data', function (chunk) {\n        body += chunk;\n      });\n      res.on('end', function () {\n        const parsedBody = JSON.parse(body);\n        if (parsedBody?.['dist-tags']?.latest?.length) {\n          resolve(parsedBody['dist-tags'].latest);\n        } else {\n          logger.error(\n            `Could not determine latest released version of ${\n              isAutomatic ? 'automatically-loaded dependency ' : ''\n            }${packageId}.`\n          );\n          reject('no latest version found');\n        }\n      });\n    });\n  });\n}\n","import { fhirdefs, sushiImport, utils } from 'fsh-sushi';\nimport { getLatestVersionNumber, loadAsFHIRDefs, loadDependenciesInStorage, unzipDependencies } from './Load';\nimport { flatten } from 'lodash';\n\nconst logger = utils.logger;\nconst FHIRDefinitions = fhirdefs.FHIRDefinitions;\nconst FSHTank = sushiImport.FSHTank;\nconst importText = sushiImport.importText;\n\nexport function fillTank(rawFSHes, config) {\n  logger.info('Importing FSH text...');\n  const docs = importText(rawFSHes);\n  return new FSHTank(docs, config);\n}\n\nexport async function loadAndCleanDatabase(defs, dependencies) {\n  dependencies = await resolveDependencies(dependencies);\n\n  let helperUpdate = await checkForDatabaseUpgrade(dependencies);\n  let loadExternalDependenciesReturn = { defs, emptyDependencies: [] };\n\n  if (helperUpdate.shouldUpdate) {\n    loadExternalDependenciesReturn = await loadExternalDependencies(defs, helperUpdate.version + 1, dependencies);\n    defs = loadExternalDependenciesReturn.defs;\n  } else {\n    loadExternalDependenciesReturn = await loadExternalDependencies(defs, helperUpdate.version, dependencies);\n    defs = loadExternalDependenciesReturn.defs;\n  }\n\n  // Cleans out database of any empty objectStores\n  await cleanDatabase(loadExternalDependenciesReturn.emptyDependencies, helperUpdate.version + 2);\n  return defs;\n}\n\nexport function cleanDatabase(emptyDependencies, version, databaseName = 'FSH Playground Dependencies') {\n  const mergedEmpties = flatten(emptyDependencies);\n  return new Promise((resolve, reject) => {\n    let database = null;\n    const OpenIDBRequest = indexedDB.open(databaseName, version);\n    OpenIDBRequest.onsuccess = function (event) {\n      database = event.target.result;\n      database.close();\n      resolve();\n    };\n    OpenIDBRequest.onupgradeneeded = async function (event) {\n      database = event.target.result;\n      let existingObjectStores = database.objectStoreNames;\n\n      // Checks existing objectStores to see if any are empty - failsafe for users who previously had blank objectStores created\n      for (let objectStore of existingObjectStores) {\n        await new Promise((resolve) => {\n          let transaction = event.target.transaction;\n          const objStore = transaction.objectStore(`${objectStore}`).getAll();\n          objStore.onsuccess = (event) => {\n            let items = event.target.result;\n            if (items.length === 0 && !mergedEmpties.includes(objectStore)) {\n              mergedEmpties.push(objectStore);\n            }\n            resolve();\n          };\n        });\n      }\n      // Deletes objectStores that are empty\n      for (let i = 0; i < mergedEmpties.length; i++) {\n        if (existingObjectStores.contains(mergedEmpties[i])) {\n          database.deleteObjectStore(mergedEmpties[i]);\n        }\n      }\n    };\n    OpenIDBRequest.onerror = function (event) {\n      reject(event);\n    };\n  });\n}\n\nexport function checkForDatabaseUpgrade(dependencies, databaseName = 'FSH Playground Dependencies') {\n  let helperReturn = { shouldUpdate: false, version: 1 };\n  return new Promise((resolve, reject) => {\n    let database = null;\n    const OpenIDBRequest = indexedDB.open(databaseName);\n    OpenIDBRequest.onsuccess = function (event) {\n      database = event.target.result;\n      let existingObjectStores = database.objectStoreNames;\n      helperReturn.version = database.version;\n      if (\n        existingObjectStores.length === 0 ||\n        dependencies.length === 0 ||\n        existingObjectStores.contains('resources')\n      ) {\n        helperReturn.shouldUpdate = true;\n        database.close();\n        resolve(helperReturn);\n      } else {\n        dependencies.forEach((dep) => {\n          const { packageId, version } = dep;\n          if (!existingObjectStores.contains(`${packageId}${version}`)) {\n            helperReturn.shouldUpdate = true;\n          }\n        });\n        database.close();\n        resolve(helperReturn);\n      }\n    };\n    OpenIDBRequest.onupgradeneeded = function (event) {\n      database = event.target.result;\n    };\n    OpenIDBRequest.onerror = function (event) {\n      reject(event);\n    };\n  });\n}\n\nexport async function loadExternalDependencies(\n  FHIRdefs,\n  version,\n  dependencies,\n  databaseName = 'FSH Playground Dependencies',\n  shouldUnzip = false\n) {\n  return new Promise((resolve, reject) => {\n    let database = null;\n    let newDependencies = [];\n    let returnPackage = { defs: FHIRDefinitions, emptyDependencies: [] };\n    const OpenIDBRequest = indexedDB.open(databaseName, version);\n\n    // If successful the database exists\n    OpenIDBRequest.onsuccess = async function (event) {\n      database = event.target.result;\n      for (let i = 0; i < dependencies.length; i++) {\n        let resources = [];\n        shouldUnzip = false;\n        const { packageId, version } = dependencies[i];\n        if (newDependencies.includes(`${packageId}${version}`)) {\n          shouldUnzip = true;\n        }\n        if (shouldUnzip) {\n          let unzipReturn = await unzipDependencies(resources, packageId, version);\n          if (unzipReturn.emptyDependencies.length !== 0) {\n            returnPackage.emptyDependencies.push(unzipReturn.emptyDependencies);\n          }\n          await loadDependenciesInStorage(database, unzipReturn.resourceArr, packageId, version);\n        }\n        returnPackage.defs = await loadAsFHIRDefs(FHIRdefs, database, packageId, version);\n      }\n      database.close();\n      resolve(returnPackage);\n    };\n\n    // If upgrade is needed to the version, the database does not yet exist\n    OpenIDBRequest.onupgradeneeded = function (event) {\n      database = event.target.result;\n      let existingObjectStores = database.objectStoreNames;\n      if (existingObjectStores.contains('resources')) {\n        database.deleteObjectStore('resources');\n      }\n      for (let i = 0; i < dependencies.length; i++) {\n        const { packageId, version } = dependencies[i];\n        if (!existingObjectStores.contains(`${packageId}${version}`)) {\n          database.createObjectStore(`${packageId}${version}`, {\n            keyPath: ['id', 'resourceType']\n          });\n          newDependencies.push(`${packageId}${version}`);\n        }\n      }\n    };\n\n    // Checks if there is an error\n    OpenIDBRequest.onerror = function (event) {\n      reject(event);\n    };\n  });\n}\n\nexport async function resolveDependencies(dependencies) {\n  // Replace any 'latest' versions with the latest version number\n  const resolvedDependencies = await Promise.all(dependencies.map(async (dep) => replaceLatestVersion(dep)));\n\n  // Remove any dependencies that can't identify a latest version\n  const filteredResolvedDependencies = resolvedDependencies.filter((d) => d.version !== null);\n\n  return filteredResolvedDependencies;\n}\n\nasync function replaceLatestVersion(dependency) {\n  const { packageId, version } = dependency;\n  let updatedVersion = version;\n  if (version === 'latest') {\n    await getLatestVersionNumber(dependency)\n      .then((latestId) => {\n        updatedVersion = latestId;\n      })\n      .catch(() => {\n        // No 'latest' version could be found, so mark\n        // this to be filtered out of the list to be loaded\n        updatedVersion = null;\n      });\n  }\n  return { packageId, version: updatedVersion };\n}\n","export function sliceDependency(dependencies) {\n  const dependenciesArray = dependencies.split(',');\n  return dependenciesArray\n    .map((dependency) => {\n      const trimmedDep = dependency.trim();\n      if (trimmedDep === '') {\n        return trimmedDep;\n      }\n      const [packageId, version] = trimmedDep.split('#');\n      return { packageId, version };\n    })\n    .filter((d) => d); // filter out any empty strings\n}\n","import { pad, padStart, padEnd } from 'lodash';\nimport { fhirdefs, sushiExport, sushiImport, utils } from 'fsh-sushi';\nimport { gofshExport, processor, utils as gofshUtils } from 'gofsh';\nimport { fillTank, loadAndCleanDatabase } from './Processing';\nimport { sliceDependency } from './helpers';\n\nconst FSHTank = sushiImport.FSHTank;\nconst RawFSH = sushiImport.RawFSH;\nconst exportFHIR = sushiExport.exportFHIR;\nconst logger = utils.logger;\nconst stats = utils.stats;\nconst getRandomPun = utils.getRandomPun;\nconst Type = utils.Type;\nconst FHIRDefinitions = fhirdefs.FHIRDefinitions;\n\n/**\n * Run GoFSH\n * Note: This function is very similar to FhirToFsh in GoFSH.\n * The only difference is that FSH Online must load dependencies into IndexedDB.\n * If FhirToFsh ever supports a way to load dependencies in the browser,\n * we can update this to simply use that function.\n * @param {array} input array of JSON definitions to be processed\n * @param {object} options config options for GoFSH based on user input and defaults\n * dependencies: user set, defaults to []\n * indent: user set, defaults to false\n * @returns {string} the FSH\n */\nexport async function runGoFSH(input, options) {\n  stats.reset();\n\n  // Read in the resources as strings\n  const docs = [];\n  input.forEach((resource, i) => {\n    const location = `Input_${i}`;\n    try {\n      resource = JSON.parse(resource);\n    } catch (e) {\n      logger.error(`Could not parse ${location} to JSON`);\n      return;\n    }\n    if (gofshUtils.isProcessableContent(resource, location)) {\n      docs.push(new processor.WildFHIR({ content: resource }, location));\n    }\n  });\n\n  // Set up the FHIRProcessor\n  const lake = new processor.LakeOfFHIR(docs);\n  let defs = new FHIRDefinitions();\n  const fisher = new gofshUtils.MasterFisher(lake, defs);\n  const fhirProcessor = new processor.FHIRProcessor(lake, fisher);\n\n  // Process the configuration\n  const goFSHDependencies = options.dependencies.map((d) => d.replace('#', '@')); // GoFSH expects a different format\n  const configuration = fhirProcessor.processConfig(goFSHDependencies ?? []); // The created IG files includes the user specified FHIR Version\n\n  // Load dependencies, including those inferred from an IG file, and those given as input\n  let dependencies = configuration?.config.dependencies\n    ? configuration?.config.dependencies.map((dep) => `${dep.packageId}#${dep.version}`)\n    : [];\n  dependencies = sliceDependency(dependencies.join(','));\n\n  const coreFhirVersion = configuration?.config.fhirVersion[0] ?? '4.0.1';\n  const dependenciesToAdd = addCoreFHIRVersionAndAutomaticDependencies(dependencies, coreFhirVersion);\n  dependencies.push(...dependenciesToAdd);\n\n  defs = await loadAndCleanDatabase(defs, dependencies);\n\n  // Process the FHIR to rules, and then export to FSH\n  const pkg = await gofshUtils.getResources(fhirProcessor, configuration, { indent: options.indent });\n\n  // Return the string of FSH definitions\n  const fsh = new gofshExport.FSHExporter(pkg).apiExport('string');\n  logger.info('Done converting definitions');\n  printGoFSHresults(pkg);\n  return { fsh, config: configuration?.config ?? {} };\n}\n\n/**\n * Load dependencies (FHIR R4) and run SUSHI on provided text\n *\n * @param {string} input - string containing FSH text\n * @param {object} config - Configuration for SUSHI based on user input and defaults\n * config.canonical: user set, defaults to http://example.org\n * config.version: user set, defaults to 1.0.0\n * config.FSHOnly: true\n * config.fhirVersion: [4.0.1] - NOTE fhirVersion array will only have one item in it\n *\n * @returns Package with FHIR resources\n */\nexport async function runSUSHI(input, config, dependencies = []) {\n  stats.reset();\n\n  // Load dependencies\n  let defs = new FHIRDefinitions();\n  const dependenciesToAdd = addCoreFHIRVersionAndAutomaticDependencies(dependencies, config.fhirVersion[0]);\n  dependencies.push(...dependenciesToAdd);\n  defs = await loadAndCleanDatabase(defs, dependencies);\n\n  // Load and fill FSH Tank\n  let tank = FSHTank;\n  try {\n    const rawFSH = [new RawFSH(input)];\n    tank = fillTank(rawFSH, config);\n  } catch (e) {\n    logger.error('Something went wrong when importing the FSH definitions');\n    return;\n  }\n\n  // Check for StructureDefinition\n  const structDef = defs.fishForFHIR('StructureDefinition', Type.Resource);\n  if (structDef?.version !== config.fhirVersion[0]) {\n    logger.error(\n      'StructureDefinition resource not found. The FHIR package in the browser cache' +\n        ' may be corrupt. Clear cookies and site data on this webpage to reload the FHIR package.'\n    );\n    return;\n  }\n\n  logger.info('Converting FSH to FHIR resources...');\n  const outPackage = exportFHIR(tank, defs);\n\n  const count =\n    outPackage.profiles.length +\n    outPackage.extensions.length +\n    outPackage.logicals.length +\n    outPackage.resources.length +\n    // Don't count the inline instances that won't have their own JSON output\n    // but do include them in the SUSHI Results box (so don't filter out of outPackage here)\n    outPackage.instances.filter((i) => i._instanceMeta.usage !== 'Inline').length +\n    outPackage.valueSets.length +\n    outPackage.codeSystems.length;\n\n  logger.info(`Exported ${count} FHIR resources as JSON.`);\n\n  console.log(' ');\n  printSUSHIResults(outPackage);\n\n  // Remove snapshots\n  outPackage.profiles = outPackage.profiles.map((p) => p.toJSON(false));\n  outPackage.extensions = outPackage.extensions.map((e) => e.toJSON(false));\n  outPackage.logicals = outPackage.logicals.map((l) => l.toJSON(false));\n  outPackage.resources = outPackage.resources.map((r) => r.toJSON(false));\n\n  // Filter out inline instances\n  outPackage.instances = outPackage.instances.filter((i) => i._instanceMeta.usage !== 'Inline');\n\n  return outPackage;\n}\n\nfunction printSUSHIResults(pkg) {\n  const numError = stats.numError;\n  const numWarn = stats.numWarn;\n  // NOTE: These variables are creatively names to align well in the strings below while keeping prettier happy\n  const profileNum = pad(pkg.profiles.length.toString(), 13);\n  const extentNum = pad(pkg.extensions.length.toString(), 12);\n  const logiclNum = pad(pkg.logicals.length.toString(), 12);\n  const resourcNum = pad(pkg.resources.length.toString(), 13);\n  const valueSetsNumber = pad(pkg.valueSets.length.toString(), 18);\n  const codeSystemsNum = pad(pkg.codeSystems.length.toString(), 17);\n  const instancesNumber = pad(pkg.instances.length.toString(), 18);\n  const errorNumMsg = pad(`${numError} Error${numError !== 1 ? 's' : ''}`, 13);\n  const wrNumMsg = padStart(`${numWarn} Warning${numWarn !== 1 ? 's' : ''}`, 12);\n\n  const aWittyMessageInvolvingABadFishPun = padEnd(getRandomPun(numError, numWarn), 36);\n  const color = numError > 0 ? 'red' : numWarn > 0 ? '#b36200' : 'green'; // eslint-disable-line no-unused-vars\n\n  /* eslint-disable no-useless-concat */\n  // NOTE: Doing some funky things w/ strings on some lines to keep overall alignment in the code\n  const results = [\n    '╔' + '════════════════════════ SUSHI RESULTS ══════════════════════════' + '╗',\n    '║' + ' ╭───────────────┬──────────────┬──────────────┬───────────────╮ ' + '║',\n    '║' + ' │    Profiles   │  Extensions  │   Logicals   │   Resources   │ ' + '║',\n    '║' + ' ├───────────────┼──────────────┼──────────────┼───────────────┤ ' + '║',\n    '║' + ` │ ${profileNum} │ ${extentNum} │ ${logiclNum} │ ${resourcNum} │ ` + '║',\n    '║' + ' ╰───────────────┴──────────────┴──────────────┴───────────────╯ ' + '║',\n    '║' + ' ╭────────────────────┬───────────────────┬────────────────────╮ ' + '║',\n    '║' + ' │      ValueSets     │    CodeSystems    │     Instances      │ ' + '║',\n    '║' + ' ├────────────────────┼───────────────────┼────────────────────┤ ' + '║',\n    '║' + ` │ ${valueSetsNumber} │ ${codeSystemsNum} │ ${instancesNumber} │ ` + '║',\n    '║' + ' ╰────────────────────┴───────────────────┴────────────────────╯ ' + '║',\n    '║' + '                                                                 ' + '║',\n    '╠' + '═════════════════════════════════════════════════════════════════' + '╣',\n    '║' + ` ${aWittyMessageInvolvingABadFishPun} ${errorNumMsg} ${wrNumMsg} ` + '║',\n    '╚' + '═════════════════════════════════════════════════════════════════' + '╝'\n  ];\n  results.forEach((r) => console.log(r));\n  // results.forEach((r) => console.log(`%c${r}`, `color:${clr}`)); // Color formatting for browser console\n}\n\nfunction printGoFSHresults(pkg) {\n  const proNum = pad(pkg.profiles.length.toString(), 18);\n  const extNum = pad(pkg.extensions.length.toString(), 17);\n  const logNum = pad(pkg.logicals.length.toString(), 18);\n  const resNum = pad(pkg.resources.length.toString(), 18);\n  const vsNum = pad(pkg.valueSets.length.toString(), 17);\n  const csNum = pad(pkg.codeSystems.length.toString(), 18);\n  const instNum = pad(pkg.instances.length.toString(), 18);\n  const invNum = pad(pkg.invariants.length.toString(), 17);\n  const mapNum = pad(pkg.mappings.length.toString(), 18);\n  const errNumMsg = pad(`${stats.numError} Error${stats.numError !== 1 ? 's' : ''}`, 12);\n  const wrnNumMsg = padStart(`${stats.numWarn} Warning${stats.numWarn !== 1 ? 's' : ''}`, 12);\n  const aWittyMessageInvolvingABadFishPun = padEnd(getRandomPun(stats.numError, stats.numWarn), 37);\n\n  // prettier-ignore\n  const results = [\n    '╔' + '═════════════════════════ GoFSH RESULTS ═════════════════════════' + '╗',\n    '║' + ' ╭────────────────────┬───────────────────┬────────────────────╮ ' + '║',\n    '║' + ' │      Profiles      │    Extensions     │      Logicals      │ ' + '║',\n    '║' + ' ├────────────────────┼───────────────────┼────────────────────┤ ' + '║',\n    '║' + ` │ ${    proNum     } │ ${    extNum    } │ ${    logNum     } │ ` + '║',\n    '║' + ' ╰────────────────────┴───────────────────┴────────────────────╯ ' + '║',\n    '║' + ' ╭────────────────────┬───────────────────┬────────────────────╮ ' + '║',\n    '║' + ' │     Resources      │     ValueSets     │     CodeSystems    │ ' + '║',\n    '║' + ' ├────────────────────┼───────────────────┼────────────────────┤ ' + '║',\n    '║' + ` │ ${    resNum     } │ ${    vsNum     } │ ${     csNum     } │ ` + '║',\n    '║' + ' ╰────────────────────┴───────────────────┴────────────────────╯ ' + '║',\n    '║' + ' ╭────────────────────┬───────────────────┬────────────────────╮ ' + '║',\n    '║' + ' │     Instances      │    Invariants     │      Mappings      │ ' + '║',\n    '║' + ' ├────────────────────┼───────────────────┼────────────────────┤ ' + '║',\n    '║' + ` │ ${    instNum    } │ ${    invNum    } │ ${    mapNum     } │ ` + '║',\n    '║' + ' ╰────────────────────┴───────────────────┴────────────────────╯ ' + '║',\n    '║' + '                                                                 ' + '║',\n    '╠' + '═════════════════════════════════════════════════════════════════' + '╣',\n    '║' + ` ${aWittyMessageInvolvingABadFishPun } ${errNumMsg} ${wrnNumMsg} ` + '║',\n    '╚' + '═════════════════════════════════════════════════════════════════' + '╝'\n  ];\n\n  console.log(' ');\n  results.forEach((r) => console.log(r));\n}\n\nfunction addCoreFHIRVersionAndAutomaticDependencies(dependencies, coreFHIRVersion) {\n  const dependenciesToAdd = [];\n  const coreFHIRPackage = {\n    packageId: getCoreFHIRPackageIdentifier(coreFHIRVersion),\n    version: coreFHIRVersion\n  };\n  const hasCoreFHIR = hasDependency(dependencies, coreFHIRPackage);\n  if (!hasCoreFHIR) {\n    dependenciesToAdd.push(coreFHIRPackage);\n  }\n  const terminologyPkg = { packageId: 'hl7.terminology.r4', version: 'latest', isAutomatic: true };\n  const hasTerminology = hasDependency(dependencies, terminologyPkg, true);\n  if (!hasTerminology) {\n    dependenciesToAdd.push(terminologyPkg);\n  }\n  if (coreFHIRPackage.version.match(/^5\\.0\\.\\d+$/)) {\n    const extensionPkg = { packageId: 'hl7.fhir.uv.extensions', version: 'latest', isAutomatic: true };\n    const hasExtensions = hasDependency(dependencies, extensionPkg, true);\n    if (!hasExtensions) {\n      dependenciesToAdd.push(extensionPkg);\n    }\n  }\n  return dependenciesToAdd;\n}\n\nfunction hasDependency(dependenciesList, currentDependency, ignoreVersion = false) {\n  return dependenciesList.some(\n    (dep) =>\n      dep.packageId === currentDependency.packageId && (ignoreVersion || dep.version === currentDependency.version)\n  );\n}\n\nexport function getCoreFHIRPackageIdentifier(fhirVersion) {\n  if (/^4\\.0\\.1$/.test(fhirVersion)) {\n    return `hl7.fhir.r4.core`;\n  } else if (/^4\\.3\\.\\d+$/.test(fhirVersion)) {\n    return `hl7.fhir.r4b.core`;\n  } else if (/^5\\.0\\.\\d+$/.test(fhirVersion)) {\n    return `hl7.fhir.r5.core`;\n  } else {\n    return `hl7.fhir.r4.core`;\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  AssignmentOutlined as AssignmentOutlinedIcon,\n  ChevronRight as ChevronRightIcon,\n  ExpandMore as ExpandMoreIcon,\n  LibraryBooks as LibraryBooksIcon,\n  PlayArrow,\n  SaveAlt,\n  Settings\n} from '@material-ui/icons';\nimport {\n  Box,\n  Button,\n  Checkbox,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControlLabel,\n  FormHelperText,\n  Grid,\n  Link,\n  MenuItem,\n  Tooltip,\n  TextField\n} from '@material-ui/core';\nimport { runSUSHI, runGoFSH } from '../utils/FSHHelpers';\nimport { sliceDependency } from '../utils/helpers';\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport CodeMirrorComponent from './CodeMirrorComponent';\n\nconst useStyles = makeStyles((theme) => ({\n  box: {\n    padding: theme.spacing(1),\n    color: theme.palette.text.primary,\n    background: theme.palette.background.paper,\n    display: 'flex;',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  rightControls: {\n    position: 'absolute',\n    right: '24px'\n  },\n  leftControls: {\n    position: 'absolute',\n    left: '28px'\n  },\n  secondaryButton: {\n    color: theme.palette.success.main,\n    '&:hover': {\n      background: theme.palette.common.lighterBlue\n    }\n  },\n  progressContainer: {\n    width: '24px',\n    height: '24px'\n  },\n  progress: {\n    height: '1em !important',\n    width: '1em !important',\n    verticalAlign: 'middle',\n    color: theme.palette.common.white\n  },\n  button: {\n    color: theme.palette.common.white,\n    background: theme.palette.success.main,\n    borderRadius: '0',\n    paddingRight: '15px',\n    paddingLeft: '15px',\n    '&:hover': {\n      background: theme.palette.success.dark\n    }\n  },\n  buttonLeft: {\n    float: 'right',\n    left: '-3.33px'\n  },\n  buttonRight: {\n    float: 'left',\n    right: '-0.67px'\n  },\n  runIcon: {\n    padding: '0px'\n  },\n  dialogPaper: {\n    maxHeight: '80vh',\n    minHeight: '80vh'\n  },\n  dialogActions: {\n    justifyContent: 'space-between'\n  },\n  dialogActionsMessage: {\n    fontStyle: 'italic',\n    padding: '6px 8px'\n  }\n}));\n\nfunction replacer(key, value) {\n  if (key === 'config') {\n    return undefined;\n  }\n  return value;\n}\n\nexport default function FSHControls(props) {\n  const classes = useStyles();\n  const [openExamples, setOpenExamples] = useState(false);\n  const [openConfig, setOpenConfig] = useState(false);\n  const [canonical, setCanonical] = useState('');\n  const [version, setVersion] = useState('');\n  const [fhirVersion, setFhirVersion] = useState('');\n  const [dependencies, setDependencies] = useState('');\n  const [isGoFSHIndented, setIsGoFSHIndented] = useState(false);\n  const [isSUSHIRunning, setIsSUSHIRunning] = useState(false);\n  const [isGoFSHRunning, setIsGoFSHRunning] = useState(false);\n  const [isFetchingExample, setIsFetchingExample] = useState(false);\n  const [currentExample, setCurrentExample] = useState('');\n  const [currentExampleName, setCurrentExampleName] = useState('');\n\n  useEffect(() => {\n    setCanonical(props.config?.canonical || '');\n    setVersion(props.config?.version || '');\n    setFhirVersion(props.config?.fhirVersion?.length > 0 ? props.config.fhirVersion.at(0) : '');\n    setDependencies(props.config?.dependencies || '');\n  }, [props.config]);\n\n  const handleOpenExamples = () => {\n    setOpenExamples(true);\n  };\n\n  const handleCloseExamples = () => {\n    setOpenExamples(false);\n    setCurrentExample('');\n  };\n\n  const handleOpenConfig = () => {\n    setOpenConfig(true);\n  };\n\n  const handleCloseConfig = () => {\n    setOpenConfig(false);\n    props.onConfigChange({ canonical, version, fhirVersion: [fhirVersion], dependencies, isGoFSHIndented });\n  };\n\n  const updateCanonical = (event) => {\n    const newCanonical = event.target.value;\n    setCanonical(newCanonical);\n  };\n\n  const updateVersion = (event) => {\n    const newVersion = event.target.value;\n    setVersion(newVersion);\n  };\n\n  const updateFhirVersion = (event) => {\n    const newFhirVersion = event.target.value;\n    setFhirVersion(newFhirVersion);\n  };\n\n  const updateDependencyString = (event) => {\n    const dependencyString = event.target.value;\n    setDependencies(dependencyString);\n  };\n\n  const updateIsGoFSHIndented = (event) => {\n    const isIndented = event.target.checked;\n    setIsGoFSHIndented(isIndented);\n  };\n\n  async function handleSUSHIClick() {\n    if (props.isWaiting) {\n      // If SUSHI or GoFSH is in the middle of processes, don't do anything\n      return;\n    }\n\n    props.resetLogMessages();\n    props.onSUSHIClick(true, [''], true);\n    setIsSUSHIRunning(true);\n    const parsedDependencies = sliceDependency(dependencies);\n    const config = {\n      canonical: canonical ? canonical : 'http://example.org',\n      version: version ? version : '1.0.0',\n      FSHOnly: true,\n      fhirVersion: fhirVersion ? [fhirVersion] : ['4.0.1']\n    };\n    const outPackage = await runSUSHI(props.fshText, config, parsedDependencies);\n    let jsonOutput = JSON.stringify(outPackage, replacer, 2);\n    if (outPackage && outPackage.codeSystems) {\n      if (\n        !outPackage.codeSystems.length &&\n        !outPackage.extensions.length &&\n        !outPackage.instances.length &&\n        !outPackage.profiles.length &&\n        !outPackage.logicals.length &&\n        !outPackage.resources.length &&\n        !outPackage.valueSets.length\n      ) {\n        jsonOutput = [''];\n      }\n    } else {\n      jsonOutput = [''];\n    }\n\n    props.onSUSHIClick(true, jsonOutput, false);\n    setIsSUSHIRunning(false);\n  }\n\n  async function handleGoFSHClick() {\n    if (props.isWaiting) {\n      // If SUSHI or GoFSH is in the middle of processes, don't do anything\n      return;\n    }\n\n    props.resetLogMessages();\n    props.onGoFSHClick('', true);\n    setIsGoFSHRunning(true);\n    const gofshInputStrings = props.gofshText.map((def) => def.def).filter((d) => d);\n    const parsedDependencies = dependencies === '' ? [] : dependencies.split(',');\n\n    // Create small ImplementationGuide resource to send canonical and version information\n    if (canonical || version || fhirVersion !== '') {\n      const igResource = {\n        resourceType: 'ImplementationGuide',\n        fhirVersion: fhirVersion ? [fhirVersion] : ['4.0.1'],\n        id: '1',\n        ...(canonical && { url: `${canonical}/ImplementationGuide/1` }),\n        ...(version && { version: version })\n      };\n      gofshInputStrings.push(JSON.stringify(igResource, null, 2));\n    }\n\n    const options = { dependencies: parsedDependencies, indent: isGoFSHIndented };\n    const { fsh, config } = await runGoFSH(gofshInputStrings, options);\n    props.onGoFSHClick(fsh, false);\n    setIsGoFSHRunning(false);\n    if (canonical === '' && config.canonical) setCanonical(config.canonical);\n    if (version === '' && config.version) setVersion(config.version);\n    if (fhirVersion === '' && config.fhirVersion) setFhirVersion(config.fhirVersion.at(0));\n  }\n\n  async function fetchExampleFSH(event, value) {\n    if (!value.endsWith('.fsh')) return;\n    const exampleMetadata = props.exampleMetadata[value];\n    setIsFetchingExample(true);\n    setCurrentExampleName(exampleMetadata.name);\n    const utf8Decoder = new TextDecoder('utf-8');\n    let responseReader = await fetch(exampleMetadata.path).then((response) => response.body.getReader());\n    let fshString = '';\n    const { value: chunk } = await responseReader.read();\n    fshString += utf8Decoder.decode(chunk);\n    setIsFetchingExample(false);\n    setCurrentExample(fshString);\n  }\n\n  function updateExampleValue(text) {\n    setCurrentExample(text);\n  }\n\n  function handleCopyToClipboard() {\n    navigator.clipboard.writeText(currentExample);\n  }\n\n  const renderItem = (node) => (\n    <Tooltip\n      key={node.id}\n      title={\n        props.exampleMetadata[node.id] && props.exampleMetadata[node.id].description\n          ? props.exampleMetadata[node.id].description\n          : node.name\n      }\n      placement=\"bottom\"\n      arrow\n    >\n      <TreeItem key={node.id} nodeId={node.id} label={node.name} className={classes.treeItem}></TreeItem>\n    </Tooltip>\n  );\n\n  const renderTree = (nodes) => (\n    <TreeItem key={nodes.id} nodeId={nodes.id} label={nodes.name}>\n      {nodes.children ? nodes.children.map((node) => (node.children ? renderTree(node) : renderItem(node))) : null}\n    </TreeItem>\n  );\n\n  return (\n    <Box className={classes.box}>\n      <Grid container>\n        <Grid item xs={5}>\n          <Button className={clsx(classes.button, classes.buttonLeft)} onClick={handleSUSHIClick} testid=\"Button\">\n            Convert to JSON\n            {isSUSHIRunning ? (\n              <div className={classes.progressContainer}>\n                <CircularProgress className={classes.progress} />\n              </div>\n            ) : (\n              <PlayArrow className={classes.runIcon} />\n            )}\n          </Button>\n        </Grid>\n        <Grid item xs={7}>\n          <Button\n            className={clsx(classes.button, classes.buttonRight)}\n            onClick={handleGoFSHClick}\n            testid=\"GoFSH-button\"\n          >\n            {isGoFSHRunning ? (\n              <div className={classes.progressContainer}>\n                <CircularProgress className={classes.progress} />\n              </div>\n            ) : (\n              <PlayArrow className={classes.runIcon} style={{ transform: 'scaleX(-1)' }} />\n            )}\n            Convert to FSH\n          </Button>\n        </Grid>\n      </Grid>\n\n      <div className={classes.leftControls}>\n        <Button name=\"Examples\" className={classes.button} onClick={handleOpenExamples}>\n          <LibraryBooksIcon /> &nbsp; FSH Examples\n        </Button>\n      </div>\n\n      <div className={classes.rightControls}>\n        <Button name=\"SaveAll\" className={classes.secondaryButton} onClick={props.saveAll}>\n          <SaveAlt /> Save All\n        </Button>\n        <Button name=\"Configuration\" className={classes.secondaryButton} onClick={handleOpenConfig}>\n          <Settings /> Configuration\n        </Button>\n      </div>\n\n      <Dialog open={openConfig} onClose={handleCloseConfig} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Configuration Settings</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Change the Implementation Guide configuration to use when processing FSH and FHIR JSON\n          </DialogContentText>\n          <TextField\n            id=\"canonical\"\n            margin=\"dense\"\n            fullWidth\n            label=\"Canonical URL\"\n            helperText=\"Default: http://example.org\"\n            defaultValue={canonical}\n            onChange={updateCanonical}\n          />\n          <TextField\n            id=\"version\"\n            margin=\"dense\"\n            fullWidth\n            label=\"Version\"\n            helperText=\"Default: 1.0.0\"\n            defaultValue={version}\n            onChange={updateVersion}\n          />\n          <TextField\n            id=\"fhir-version-select\"\n            margin=\"dense\"\n            fullWidth\n            select\n            label=\"FHIR Version\"\n            helperText=\"Default: 4.0.1 (R4)\"\n            value={fhirVersion}\n            onChange={updateFhirVersion}\n          >\n            <MenuItem value={'4.0.1'}>4.0.1 (R4)</MenuItem>\n            <MenuItem value={'4.3.0'}>4.3.0 (R4B)</MenuItem>\n            <MenuItem value={'5.0.0'}>5.0.0 (R5)</MenuItem>\n          </TextField>\n          <TextField\n            id=\"dependencies\"\n            margin=\"dense\"\n            fullWidth\n            label=\"Dependencies\"\n            helperText=\"Format: packageId#version, packageId#version (e.g., hl7.fhir.us.core#6.0.0)\"\n            defaultValue={dependencies}\n            onChange={updateDependencyString}\n          />\n          <FormControlLabel\n            id=\"goFSHIndent\"\n            margin=\"dense\"\n            control={<Checkbox checked={isGoFSHIndented} color=\"primary\" />}\n            label=\"Indent output of Convert to FSH\"\n            onChange={updateIsGoFSHIndented}\n          />\n          <FormHelperText>If set, Convert to FSH will output FSH using path rules</FormHelperText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseConfig} color=\"primary\">\n            Done\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={openExamples}\n        onClose={handleCloseExamples}\n        aria-labelledby=\"form-dialog-title\"\n        maxWidth=\"lg\"\n        fullWidth\n        scroll=\"paper\"\n        classes={{ paper: classes.dialogPaper }}\n      >\n        <DialogTitle id=\"form-dialog-title\">FSH Examples</DialogTitle>\n        <DialogContent>\n          <Grid container style={{ overflow: 'scroll', minHeight: '64vh' }}>\n            <Grid item xs={4}>\n              <TreeView\n                className={classes.treeView}\n                defaultCollapseIcon={<ExpandMoreIcon />}\n                defaultExpandIcon={<ChevronRightIcon />}\n                onNodeSelect={fetchExampleFSH}\n              >\n                {props.exampleConfig.map((category) => renderTree(category))}\n              </TreeView>\n            </Grid>\n            <Grid item xs={8}>\n              <CodeMirrorComponent\n                name={currentExample ? currentExampleName : ''}\n                isExamples={true}\n                value={currentExample}\n                initialText={currentExample}\n                updateTextValue={updateExampleValue}\n                mode={'fsh'}\n                placeholder={isFetchingExample ? 'Fetching example...' : 'Select an example'}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions className={classes.dialogActions}>\n          <div className={classes.dialogActionsMessage}>\n            Have an example that might be bene-fish-al? Seas the day and add to our collection on{' '}\n            <Link href=\"https://github.com/FSHSchool/FSHOnline-Examples#readme\">GitHub</Link>!\n          </div>\n          <div>\n            <Button onClick={handleCopyToClipboard} color=\"primary\">\n              <AssignmentOutlinedIcon></AssignmentOutlinedIcon> Copy to clipboard\n            </Button>\n            <Button onClick={handleCloseExamples} color=\"secondary\">\n              Close\n            </Button>\n          </div>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/FSH-online-logo.1322e272.png\";","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppBar, Toolbar, Button, Typography, Box } from '@material-ui/core';\nimport { StylesProvider } from '@material-ui/core/styles';\nimport { ExitToApp } from '@material-ui/icons';\nimport logo from '../style/FSH-online-logo.png';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: theme.palette.common.blue,\n    position: 'static',\n    boxShadow: '0'\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 700\n  },\n  logo: {\n    height: '55px',\n    width: '63px'\n  },\n  toolbarBox: {\n    alignItems: 'center'\n  },\n  exitIcon: {\n    paddingLeft: '3px',\n    transform: 'scaleX(-1)'\n  },\n  docButton: {\n    color: theme.palette.common.white,\n    backgroundColor: theme.palette.common.blue,\n    fontSize: '0.875rem',\n    fontWeight: 700,\n    '&:hover': {\n      background: theme.palette.common.lightBlue\n    }\n  },\n  versionText: {\n    color: theme.palette.common.white,\n    fontSize: '0.8rem',\n    fontStyle: 'italic',\n    marginTop: '-5px'\n  }\n}));\n\nexport default function TopBar() {\n  const classes = useStyles();\n  return (\n    <AppBar className={classes.root}>\n      <Toolbar>\n        <Box className={classes.toolbarBox} display=\"flex\" flexGrow={1} flexDirection=\"row\">\n          <Box order={1} display=\"flex\" flexGrow={1} flexDirection=\"row\">\n            <Box order={1} alignSelf=\"center\" display=\"flex\">\n              <img src={logo} alt=\"logo\" className={classes.logo} />\n            </Box>\n            <Box order={2} alignSelf=\"center\" m={1}>\n              <StylesProvider injectFirst>\n                <Typography order={1} className={classes.title}>\n                  FSH ONLINE\n                </Typography>\n                <Typography order={2} className={classes.versionText}>\n                  Powered by SUSHI v3.3.3 and GoFSH v2.1.1\n                </Typography>\n              </StylesProvider>\n            </Box>\n          </Box>\n          <Box order={1}>\n            <StylesProvider injectFirst>\n              <Button className={classes.docButton} href=\"https://fshschool.org/\" target=\"_blank\">\n                <ExitToApp className={classes.exitIcon} fontSize=\"small\" />\n                Back to School\n              </Button>\n            </StylesProvider>\n          </Box>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  );\n}\n"],"sourceRoot":""}