(this["webpackJsonpfsh-online"]=this["webpackJsonpfsh-online"]||[]).push([[0],{124:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return I})),n.d(t,"a",(function(){return W})),n.d(t,"b",(function(){return J}));var r=n(35),i=n(24),a=n(17),o=n(37),c=n(0),s=n(115),l=n(163),u=n.n(l),d=n(622),p=n.n(d),f=n(15),h=n(10),g=n(397),b=n(396),m=n(1490),j=n(285),x=n(273),O=n(632),v=n(624),y=n(627),S=n(628),C=n(631),w=n(4),k=Object(g.a)((function(e){return{container:{height:"100%",flexGrow:1},fullHeightGrid:{height:"100%"},editorPane:{flexGrow:"0"},resize:{height:"100%",width:"4px",cursor:"col-resize","&:hover":{background:R.lightBlue}},resizeBlue:{background:"#487AA2"},resizeCursor:{cursor:"col-resize"},collapsedMain:{width:"100%",height:"calc(100vh - 116px - 300px)"},expandedMain:{width:"100%",height:"calc(100vh - 116px - 34px)"},collapsedConsole:{height:"25px",width:"100%"},expandedConsole:{height:"300px",width:"100%"},top:{height:"116px"}}})),R={lighterBlue:"#D8E2EA",lightBlue:"#487AA2",blue:"#30638e",darkerBlue:"#143E61",editorGrey:"#263238",lightestGrey:"#E7ECEE",lightGrey:"#D0D9DD",grey:"#575B5C",darkerGrey:"#3D4345",darkestGrey:"#121D21",red:"#FD6668"},I=Object(b.a)({palette:{success:{main:R.blue,dark:R.darkerBlue,light:R.lightBlue},common:R},typography:{fontFamily:"Open Sans"},overrides:{MuiTooltip:{tooltip:{backgroundColor:R.darkestGrey,fontSize:"13px"},arrow:{color:R.darkestGrey}},MuiButton:{text:{textTransform:"none",fontWeight:600}},MuiIconButton:{root:{"&:hover":{backgroundColor:R.grey}}}}}),z="https://raw.githubusercontent.com/FSHSchool/FSHOnline-Examples/main/",N=(console.log,"There are no messages to display in the console."),T="There are no problems to display in the console.",F=[N],H=[T],E=0,D="#FDD835",L={};function U(e){e.forEach((function(e){"category"===e.type&&U(e.children),e.id=e.path.replaceAll("%20","-"),"file"===e.type&&(L[e.id]={path:"".concat(z,"/Examples/").concat(e.path),description:e.description,name:e.name}),delete e.type,delete e.path}))}function P(){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/index.json")).then((function(e){return e.json()}));case 2:return U((t=e.sent).children),e.abrupt("return",Object(r.a)(t.children));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return G.apply(this,arguments)}function G(){return(G=Object(o.a)(Object(i.a)().mark((function t(n){var r,a,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n.text){t.next=4;break}return t.abrupt("return","");case 4:return t.next=6,Object(x.a)(n);case 6:if(r=t.sent,a=r.long_url.slice(40),r.long_url.includes("https://fshschool.org/FSHOnline/#/share/")&&0!==a.length){t.next=12;break}return t.abrupt("return","");case 12:return o=Object(s.inflateSync)(e.from(a,"base64")).toString("utf-8"),t.abrupt("return",o);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(e){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(Object(i.a)().mark((function e(t){var n,r,a,o,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/gists/".concat(t)).then((function(e){return e.json()}));case 2:n=e.sent,r="",a=0,o=Object.values((null===n||void 0===n?void 0:n.files)||{});case 5:if(!(a<o.length)){e.next=19;break}if(!(c=o[a]).truncated){e.next=14;break}return e.t0=r,e.next=11,fetch(c.raw_url).then((function(e){return e.text()}));case 11:r=e.t0+=e.sent,e.next=15;break;case 14:r+=c.content;case 15:r+="\n\n";case 16:a++,e.next=5;break;case 19:return e.abrupt("return",r.trim());case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log=function(e){e&&(e.startsWith("error")||e.startsWith("warn"))&&(H[0]===T&&(H=[]),E++,H.push(e),e.startsWith("error")&&(D="#FD6668")),F[0]===N&&(F=[]),F.push(e)};var W=Object(c.createContext)(!1);function J(e){var t=k(),n=e.match,r=Object(c.useState)(!1),s=Object(a.a)(r,2),l=s[0],d=s[1],g=Object(c.useState)(""),b=Object(a.a)(g,2),x=b[0],R=b[1],z=Object(c.useState)([""]),U=Object(a.a)(z,2),B=U[0],G=U[1],V=Object(c.useState)(""),J=Object(a.a)(V,2),_=J[0],Z=J[1],$=Object(c.useState)(!1),Y=Object(a.a)($,2),K=Y[0],X=Y[1],Q=Object(c.useState)(!1),q=Object(a.a)(Q,2),ee=q[0],te=q[1],ne=Object(c.useState)(!1),re=Object(a.a)(ne,2),ie=re[0],ae=re[1],oe=Object(c.useState)([]),ce=Object(a.a)(oe,2),se=ce[0],le=ce[1],ue=Object(c.useState)({}),de=Object(a.a)(ue,2),pe=de[0],fe=de[1],he=Object(c.useState)(41.666667),ge=Object(a.a)(he,2),be=ge[0],me=ge[1],je=Object(c.useState)(!1),xe=Object(a.a)(je,2),Oe=xe[0],ve=xe[1],ye=Object(c.useState)({canonical:"",version:"",fhirVersion:[],dependencies:""}),Se=Object(a.a)(ye,2),Ce=Se[0],we=Se[1],ke=Object(c.useState)({}),Re=Object(a.a)(ke,2),Ie=Re[0],ze=Re[1];function Ne(e){e.preventDefault(),ve(!1)}function Te(e){if(Oe){var t=e/window.innerWidth*100;t>10&&t<76&&me(t)}}function Fe(e,t){if(t.get(e)){for(var n=t.get(e),r="".concat(e,"-").concat(n);t.get(r);)n+=1,r="".concat(e,"-").concat(n);t.set(e,n+1),e=r,t.set(r,1)}else t.set(e,1);return e}return Object(c.useEffect)((function(){function e(){return(e=Object(o.a)(Object(i.a)().mark((function e(){var t,r,a,o,c,s,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\/share/.test(n.path)){e.next=12;break}return e.next=3,A(n.params);case 3:t=e.sent,r=t.indexOf("\n"),a=t.slice(0,r),c=t;try{null!=(s=JSON.parse(a)).c&&null!=s.v&&null!=s.d&&(o={canonical:s.c,version:s.v,fhirVersion:s.f||[],dependencies:s.d},c=t.slice(r+1))}catch(i){}ze(o||{}),Z(c),e.next=17;break;case 12:if(!/\/gist/.test(n.path)){e.next=17;break}return e.next=15,M(n.params.id);case 15:l=e.sent,Z(l);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(o.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=le,e.next=3,P();case 3:e.t1=e.sent,(0,e.t0)(e.t1),fe(L);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[n]),Object(w.jsx)(m.a,{theme:I,children:Object(w.jsxs)("div",{className:"root",style:{height:"100vh"},children:[Object(w.jsxs)("div",{className:t.top,children:[Object(w.jsx)(O.a,{}),Object(w.jsx)(C.a,{onSUSHIClick:function(e,t,n){d(e),G(t),X(n)},onGoFSHClick:function(e,t){te(t),Z(""===e?null:e)},onConfigChange:function(e){we(e)},config:Ie,fshText:x,gofshText:B,resetLogMessages:function(){F=[N],H=[T],E=0,D="#FDD835"},exampleConfig:se,exampleMetadata:pe,isWaiting:ee||K,saveAll:function(){var e=new Map,t=new p.a;t.file("FSH.fsh",x);var n=Object(f.partition)(B,(function(e){return e.id&&"Untitled"!==e.id})),r=Object(a.a)(n,2),i=r[0],o=r[1];i.forEach((function(n){var r,i,a;try{a=JSON.parse(n.def)}catch(s){}var o=Fe(null!==(r=a)&&void 0!==r&&r.resourceType?"".concat(a.resourceType,"-").concat(n.id):n.id,e),c=null!==(i=n.def)&&void 0!==i?i:null;t.file("".concat(o,".json"),c)})),o.forEach((function(n){var r,i,a;try{a=JSON.parse(n.def)}catch(l){}var o=null!==(r=n.id)&&void 0!==r?r:"Untitled",c=Fe(a.resourceType?"".concat(a.resourceType,"-").concat(o):o,e),s=null!==(i=n.def)&&void 0!==i?i:null;t.file("".concat(c,".json"),s)})),t.generateAsync({type:"blob"}).then((function(e){u.a.saveAs(e,"fshonline.zip")}))}})]}),Object(w.jsx)("div",{className:ie?t.collapsedMain:t.expandedMain,children:Object(w.jsx)(W.Provider,{value:ie,children:Object(w.jsxs)(j.a,{className:Object(h.a)(t.container,Oe&&t.resizeCursor),container:!0,onTouchMove:function(e){var t=e.touches[0].clientX;Oe&&Object(f.debounce)((function(){return Te(t)}),10)()},onMouseMove:function(e){var t=e.clientX;Oe&&Object(f.debounce)((function(){return Te(t)}),10)()},onMouseUp:Ne,onMouseLeave:Ne,children:[Object(w.jsx)(j.a,{item:!0,className:Object(h.a)(t.fullHeightGrid,t.editorPane),style:{maxWidth:"calc(".concat(be,"% - 2px)"),flexBasis:"calc(".concat(be,"% - 2px)")},children:Object(w.jsx)(y.a,{text:x,initialText:_,updateTextValue:function(e){""!==_&&null!==_||Z(e),R(e)},isWaiting:ee,setInitialText:Z,config:Ce})}),Object(w.jsx)(j.a,{item:!0,className:Object(h.a)(t.resize,Oe&&t.resizeBlue),onTouchStart:function(){ve(!0)},onTouchEnd:function(){ve(!1)},onMouseDown:function(e){e.preventDefault(),ve(!0)},onDoubleClick:function(){me(41.666667)}}),Object(w.jsx)(j.a,{item:!0,className:Object(h.a)(t.fullHeightGrid,t.editorPane),style:{maxWidth:"calc(".concat(100-be,"% - 2px)"),flexBasis:"calc(".concat(100-be,"% - 2px)")},children:Object(w.jsx)(v.a,{text:B,showNewText:l,setShowNewText:d,isWaiting:K,updateTextValue:function(e){G(e)}})})]})})}),Object(w.jsx)("div",{className:ie?t.expandedConsole:t.collapsedConsole,children:Object(w.jsx)(S.a,{consoleMessages:F,problemMessages:H,problemCount:E,problemColor:D,expandConsole:ie,setExpandConsole:ae})})]})})}}).call(this,n(22).Buffer)},1241:function(e,t){},1243:function(e,t){},1259:function(e,t){},1261:function(e,t){},1389:function(e,t,n){var r={".":195,"./":195,"./OptimizerPlugin":368,"./OptimizerPlugin.d.ts":1390,"./OptimizerPlugin.js":368,"./index":195,"./index.d.ts":1391,"./index.js":195,"./loadOptimizers":367,"./loadOptimizers.d.ts":1392,"./loadOptimizers.js":367,"./plugins":262,"./plugins/":262,"./plugins/AddPathRulesOptimizer":369,"./plugins/AddPathRulesOptimizer.d.ts":1393,"./plugins/AddPathRulesOptimizer.js":369,"./plugins/AddReferenceKeywordOptimizer":198,"./plugins/AddReferenceKeywordOptimizer.d.ts":1394,"./plugins/AddReferenceKeywordOptimizer.js":198,"./plugins/CombineCardAndFlagRulesOptimizer":370,"./plugins/CombineCardAndFlagRulesOptimizer.d.ts":1395,"./plugins/CombineCardAndFlagRulesOptimizer.js":370,"./plugins/CombineCodingAndQuantityValuesOptimizer":267,"./plugins/CombineCodingAndQuantityValuesOptimizer.d.ts":1396,"./plugins/CombineCodingAndQuantityValuesOptimizer.js":267,"./plugins/CombineContainsRulesOptimizer":371,"./plugins/CombineContainsRulesOptimizer.d.ts":1397,"./plugins/CombineContainsRulesOptimizer.js":371,"./plugins/ConstructInlineInstanceOptimizer":263,"./plugins/ConstructInlineInstanceOptimizer.d.ts":1398,"./plugins/ConstructInlineInstanceOptimizer.js":263,"./plugins/ConstructNamedExtensionContainsRulesOptimizer":268,"./plugins/ConstructNamedExtensionContainsRulesOptimizer.d.ts":1399,"./plugins/ConstructNamedExtensionContainsRulesOptimizer.js":268,"./plugins/RemoveChoiceSlicingRulesOptimizer":372,"./plugins/RemoveChoiceSlicingRulesOptimizer.d.ts":1400,"./plugins/RemoveChoiceSlicingRulesOptimizer.js":372,"./plugins/RemoveDefaultExtensionContextRulesOptimizer":373,"./plugins/RemoveDefaultExtensionContextRulesOptimizer.d.ts":1401,"./plugins/RemoveDefaultExtensionContextRulesOptimizer.js":373,"./plugins/RemoveDefaultLogicalCaretRulesOptimizer":374,"./plugins/RemoveDefaultLogicalCaretRulesOptimizer.d.ts":1402,"./plugins/RemoveDefaultLogicalCaretRulesOptimizer.js":374,"./plugins/RemoveDefaultResourceCaretRulesOptimizer":375,"./plugins/RemoveDefaultResourceCaretRulesOptimizer.d.ts":1403,"./plugins/RemoveDefaultResourceCaretRulesOptimizer.js":375,"./plugins/RemoveExtensionSlicingRulesOptimizer":376,"./plugins/RemoveExtensionSlicingRulesOptimizer.d.ts":1404,"./plugins/RemoveExtensionSlicingRulesOptimizer.js":376,"./plugins/RemoveExtensionURLAssignmentRules":377,"./plugins/RemoveExtensionURLAssignmentRules.d.ts":1405,"./plugins/RemoveExtensionURLAssignmentRules.js":377,"./plugins/RemoveGeneratedTextRulesOptimizer":196,"./plugins/RemoveGeneratedTextRulesOptimizer.d.ts":1406,"./plugins/RemoveGeneratedTextRulesOptimizer.js":196,"./plugins/RemoveImpliedZeroZeroCardRulesOptimizer":266,"./plugins/RemoveImpliedZeroZeroCardRulesOptimizer.d.ts":1407,"./plugins/RemoveImpliedZeroZeroCardRulesOptimizer.js":266,"./plugins/RemovePublisherDerivedDateRulesOptimizer":378,"./plugins/RemovePublisherDerivedDateRulesOptimizer.d.ts":1408,"./plugins/RemovePublisherDerivedDateRulesOptimizer.js":378,"./plugins/ResolveBindingRuleURLsOptimizer":379,"./plugins/ResolveBindingRuleURLsOptimizer.d.ts":1409,"./plugins/ResolveBindingRuleURLsOptimizer.js":379,"./plugins/ResolveInstanceOfURLsOptimizer":197,"./plugins/ResolveInstanceOfURLsOptimizer.d.ts":1410,"./plugins/ResolveInstanceOfURLsOptimizer.js":197,"./plugins/ResolveOnlyRuleURLsOptimizer":269,"./plugins/ResolveOnlyRuleURLsOptimizer.d.ts":1411,"./plugins/ResolveOnlyRuleURLsOptimizer.js":269,"./plugins/ResolveParentURLsOptimizer":380,"./plugins/ResolveParentURLsOptimizer.d.ts":1412,"./plugins/ResolveParentURLsOptimizer.js":380,"./plugins/ResolveReferenceAssignmentsOptimizer":381,"./plugins/ResolveReferenceAssignmentsOptimizer.d.ts":1413,"./plugins/ResolveReferenceAssignmentsOptimizer.js":381,"./plugins/ResolveValueRuleURLsOptimizer":382,"./plugins/ResolveValueRuleURLsOptimizer.d.ts":1414,"./plugins/ResolveValueRuleURLsOptimizer.js":382,"./plugins/ResolveValueSetComponentRuleURLsOptimizer":383,"./plugins/ResolveValueSetComponentRuleURLsOptimizer.d.ts":1415,"./plugins/ResolveValueSetComponentRuleURLsOptimizer.js":383,"./plugins/SimplifyArrayIndexingOptimizer":200,"./plugins/SimplifyArrayIndexingOptimizer.d.ts":1416,"./plugins/SimplifyArrayIndexingOptimizer.js":200,"./plugins/SimplifyInstanceNameOptimizer":199,"./plugins/SimplifyInstanceNameOptimizer.d.ts":1417,"./plugins/SimplifyInstanceNameOptimizer.js":199,"./plugins/SimplifyMappingNamesOptimizer":384,"./plugins/SimplifyMappingNamesOptimizer.d.ts":1418,"./plugins/SimplifyMappingNamesOptimizer.js":384,"./plugins/SimplifyObeysRuleDotPathsOptimizer":265,"./plugins/SimplifyObeysRuleDotPathsOptimizer.d.ts":1419,"./plugins/SimplifyObeysRuleDotPathsOptimizer.js":265,"./plugins/SimplifyRulePathContextsOptimizer":264,"./plugins/SimplifyRulePathContextsOptimizer.d.ts":1420,"./plugins/SimplifyRulePathContextsOptimizer.js":264,"./plugins/index":262,"./plugins/index.d.ts":1421,"./plugins/index.js":262,"./utils":114,"./utils.d.ts":1422,"./utils.js":114};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=1389},1449:function(e,t){},1451:function(e,t){},1458:function(e,t){},1460:function(e,t){},1474:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(31),o=n.n(a),c=(n(654),n(47)),s=n(124),l=n(4);function u(e){return Object(l.jsxs)(c.c,{children:[Object(l.jsx)(c.a,{path:"/share/:text",component:s.b}),Object(l.jsx)(c.a,{path:"/gist/:id",component:s.b}),Object(l.jsx)(c.a,{path:"",exact:!0,component:s.b})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(392);o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(d.a,{basename:"/",children:Object(l.jsx)(u,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var r=n(34),i=n(17),a=n(0),o=n(10),c=n(15),s=n(1493),l=n(1478),u=n(1544),d=n(203),p=n(638),f=n(1526),h=n(1529),g=n(1530),b=n(1531),m=n(1532),j=n(625),x=n(397),O=n(82),v=n.n(O),y=n(124),S=n(24),C=n(37),w=n(115),k=n(393),R=n(1525),I=n(1479),z=n(1481),N=n(1482),T=n(1483),F=n(1484),H=n(1527),E=n(1541),D=n(273),L=n(4),U=Object(x.a)((function(e){return{iconButton:{color:e.palette.common.white,padding:"3px"},textArea:{width:"100%",color:e.palette.text.primary,fontWeight:"bold"},copyBox:{backgroundColor:e.palette.common.lightGrey,borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:"3%",textOverflow:"ellipsis"}}}));function P(e){var t=U(),n=Object(a.useState)(!1),r=Object(i.a)(n,2),o=r[0],c=r[1],u=Object(a.useState)(!1),h=Object(i.a)(u,2),g=h[0],b=h[1],m=Object(a.useState)(!1),j=Object(i.a)(m,2),x=j[0],O=j[1],v=Object(a.useState)(!1),P=Object(i.a)(v,2),B=P[0],A=P[1],G=Object(a.useState)("Copy to Clipboard"),M=Object(i.a)(G,2),V=M[0],W=M[1],J=Object(a.useState)({fshCopied:!1,fshCopyButton:"Copy FSH to Clipboard"}),_=Object(i.a)(J,2),Z=_[0],$=Z.fshCopied,Y=Z.fshCopyButton,K=_[1],X=Object(a.useState)(),Q=Object(i.a)(X,2),q=Q[0],ee=Q[1],te=Object(a.useState)(),ne=Object(i.a)(te,2),re=ne[0],ie=ne[1],ae=Object(a.useState)(!0),oe=Object(i.a)(ae,2),ce=oe[0],se=oe[1],le=function(){c(!1),O(!0),ie(""),K({fshCopied:!1,fshCopyButton:"Copy FSH to Clipboard"})},ue=function(){O(!1),b(!1)},de=function(){A(!1)},pe=function(){var t=Object(C.a)(Object(S.a)().mark((function t(){var n,r,i,a,o,s,l,u,d,p,f,h,g;return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null!==(n=e.config)&&void 0!==n&&n.canonical||null!==(r=e.config)&&void 0!==r&&r.version||(null===(i=e.config)||void 0===i?void 0:i.fhirVersion.length)>0||null!==(a=e.config)&&void 0!==a&&a.dependencies?Object(w.deflateSync)(JSON.stringify({c:null===(s=e.config)||void 0===s?void 0:s.canonical,v:null===(l=e.config)||void 0===l?void 0:l.version,f:null===(u=e.config)||void 0===u?void 0:u.fhirVersion,d:null===(d=e.config)||void 0===d?void 0:d.dependencies})+"\n"+e.shareText).toString("base64"):Object(w.deflateSync)(e.shareText).toString("base64"),p="https://fshschool.org/FSHOnline/#/share/".concat(o),t.next=4,Object(D.b)(p);case 4:!0===(f=t.sent).errorNeeded?(b(!0),le()):(h=f.link.slice(15),g="https://fshschool.org/FSHOnline/#/share/".concat(h),ee(g),c(!0),W("Copy to Clipboard"),se(!0));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),fe=function(){c(!1),b(!1)};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(s.a,{title:"Share FSH",placement:"top",arrow:!0,children:Object(L.jsx)(l.a,{name:"Share FSH",className:t.iconButton,onClick:pe,children:Object(L.jsx)(R.a,{fontSize:"small",style:{transform:"rotate(-45deg)"}})})}),Object(L.jsxs)(I.a,{open:o,onClose:fe,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0,children:[Object(L.jsx)(z.a,{id:"form-dialog-title",children:"Share"}),Object(L.jsxs)(N.a,{children:[Object(L.jsx)(T.a,{children:"Use this link to share your FSH with others!"}),Object(L.jsxs)(p.a,{className:t.copyBox,children:[Object(L.jsx)(p.a,{maxWidth:"90%",textOverflow:"ellipsis",overflow:"hidden",children:q}),Object(L.jsx)(s.a,{title:V,placement:"top",arrow:!0,children:Object(L.jsx)(k.CopyToClipboard,{text:q,onCopy:function(){return W("Link Copied")},children:Object(L.jsx)(l.a,{style:{borderRadius:"0%"},children:Object(L.jsx)(f.a,{})})})})]})]}),Object(L.jsxs)(F.a,{children:[ce&&Object(L.jsx)(d.a,{onClick:le,color:"primary",style:{align:"left"},children:"Create Link with Gist"}),Object(L.jsx)(p.a,{style:{flex:"1 0 0",hidden:!0}}),Object(L.jsx)(d.a,{onClick:fe,color:"primary",children:"Done"})]})]}),Object(L.jsxs)(I.a,{open:x,onClose:ue,"aria-labelledby":"alert-dialog-title",maxWidth:"md",fullWidth:!0,children:[Object(L.jsx)(z.a,{id:"alert-dialog-title",children:"Share with Gist"}),g&&Object(L.jsx)(N.a,{style:{color:y.c.palette.common.red},children:"Your FSH content is too long to share directly. Please use a Gist to share."}),Object(L.jsxs)(N.a,{children:["Create a"," ",Object(L.jsx)(H.a,{id:"gistURL",href:"https://gist.github.com/",target:"_blank",children:"Gist"})," ","and paste the URL below to generate a shareable FSH Online link.",Object(L.jsx)(E.a,{id:"gistURLText",label:"Gist URL",fullWidth:!0,onChange:function(e){var t,n=null===(t=e.target.value.match(/gist\.github\.com\/[^/]+\/(.+)/))||void 0===t?void 0:t[1];n&&ie("https://fshschool.org/FSHOnline/#/gist/".concat(n))}})]}),Object(L.jsxs)(F.a,{style:{bottom:0,right:0},children:[Object(L.jsx)(d.a,{onClick:ue,color:"primary",children:"Cancel"}),Object(L.jsx)(p.a,{style:{flex:"1 0 0",hidden:!0}}),Object(L.jsx)(k.CopyToClipboard,{text:e.shareText,onCopy:function(){K({fshCopied:!0,fshCopyButton:"FSH Copied to Clipboard"})},style:{align:"left"},children:Object(L.jsx)(d.a,{color:$?"secondary":"primary",children:Y})}),Object(L.jsx)(d.a,{color:"primary",onClick:function(){re?(ue(),ee(re),c(!0),W("Copy to Clipboard"),se(!1)):A(!0)},style:{align:"left"},children:"Generate Link from Gist"})]})]}),Object(L.jsxs)(I.a,{open:B,onClose:de,"aria-labelledby":"alert-dialog-title",maxWidth:"lg",children:[Object(L.jsx)(z.a,{id:"alert-dialog-title",children:"Error Creating Gist Link"}),Object(L.jsx)(N.a,{children:Object(L.jsx)(T.a,{children:"Could not generate a link from your Gist URL. Ensure the URL is valid."})}),Object(L.jsx)(F.a,{children:Object(L.jsx)(d.a,{onClick:de,color:"primary",autoFocus:!0,children:"Keep Swimming!"})})]})]})}n(713),n(714),n(715),n(716),n(717);n(718),n(719),n(720),n(721),n(722),n(724),n(725),n(726),n(727),v.a.defineSimpleMode("fsh",{meta:{lineComment:"//"},start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"atom"},{regex:/\b(Alias|CodeSystem|Expression|Extension|Description|Id|Instance|InstanceOf|Invariant|Logical|Mapping|Mixins|Parent|Profile|Resource|RuleSet|Severity|Source|Target|Title|Usage|ValueSet|XPath)(?=\s*:)\b/,token:"keyword"},{regex:/(\s|^)(and|codes|contains|descendent-of|exclude|exists|from system|from|generalizes|include|in|insert|is-a|is-not-a|named|not-in|obeys|only|or|regex|units|valueset|where|D|MS|N|SU|TU|\\?!)(\s|$)/,token:"def"},{regex:/(\(\s*)(exactly|example|extensible|preferred|required)(\s*\))/,token:"def"},{regex:/\b(Reference|Canonical)\s*\(/,push:"closingParen",token:"atom"},{regex:/\*|->|=|\+|:/,token:"def"},{regex:/\b(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*))\b/,token:"atom"},{regex:/(\s|^)(true|false)(\s|$)/,token:"string"},{regex:/(\s|^)(-?\d+(\.\d+)?)(\s|^)/,token:"string"},{regex:/#"(?:\\.|[^\\"])*"/,token:"string"},{regex:/#[^\s]*/,token:"string"},{regex:/'.*'/,token:"string"},{regex:/\s\/\/.*/,token:"comment"},{regex:/\/\/.*/,token:"comment",sol:!0},{regex:/\/\*/,token:"comment",next:"comment"}],closingParen:[{regex:/\)/,pop:!0,token:"atom"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}]});var B=200,A=Object(x.a)((function(e){return{box:{height:"100%"},header:{fontFamily:"Open Sans",color:e.palette.common.white,background:e.palette.common.darkerGrey,padding:"0px",paddingLeft:"29px",height:"34px",display:"flex",justifyContent:"space-between",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},headerShift:{width:"calc(100% - ".concat(B,"px - 29px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:B},headerLabel:{lineHeight:"34px",float:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},headerActionGroup:{paddingRight:"10px"},headerActions:{alignItems:"center",display:"flex"},iconButton:{color:e.palette.common.white,padding:"3px"},drawer:{width:B,flexShrink:0},drawerPaper:{width:B,border:"none",height:"calc(100vh - 116px - 34px)",top:"116px"},drawerPaperExpandedConsole:{height:"calc(100vh - 116px - 300px)"},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.palette.common.white,background:e.palette.common.darkerGrey,height:"34px",minHeight:"34px"},drawerHeaderIcon:{padding:"0px",color:e.palette.common.white,background:e.palette.success.main,"&:hover":{background:e.palette.success.light},borderRadius:0,height:"100%",width:"34px",minWidth:"34px"},content:{flexGrow:1,width:"100%",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentShift:{width:"calc(100% - ".concat(B,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}}));function G(e){var t=A(),n=Object(a.useContext)(y.a),x=Object(a.useState)(!0),O=Object(i.a)(x,2),v=O[0],S=O[1],C=function(){S(!0)},w=function(){S(!1)};var k=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(L.jsx)(s.a,{title:Object(c.upperFirst)(n),placement:"top",arrow:!0,children:Object(L.jsx)(l.a,{name:n,className:t.iconButton,"aria-label":n,onClick:r,children:Object(L.jsx)(e,{fontSize:"small",style:i})})})};return Object(L.jsxs)(p.a,{className:t.box,children:[Object(L.jsxs)("div",{className:Object(o.a)(t.header,Object(r.a)({},t.headerShift,e.renderDrawer&&v)),children:[Object(L.jsx)("div",{title:e.name,className:t.headerLabel,children:e.name}),Object(L.jsxs)("div",{className:t.headerActions,children:[Object(L.jsxs)("div",{className:t.headerActionGroup,children:["fsh"===e.mode&&!e.isExamples&&Object(L.jsx)(P,{shareText:e.value,config:e.config}),e.copy&&k(f.a,"copy",(function(){})),e.save&&k(h.a,"save",e.save),e.delete&&k(g.a,"delete",e.delete)]}),e.renderDrawer&&!v&&Object(L.jsx)(l.a,{name:"expand",className:t.drawerHeaderIcon,"aria-label":"expand",onClick:C,children:Object(L.jsx)(b.a,{})})]})]}),Object(L.jsx)(j.UnControlled,{className:Object(o.a)("react-codemirror2",e.renderDrawer&&t.content,Object(r.a)({},t.contentShift,e.renderDrawer&&v)),value:e.initialText,options:{mode:e.mode,theme:"material",placeholder:e.placeholder,scrollbarStyle:"overlay",autoCloseBrackets:!0,lineNumbers:!0,foldGutter:!0,readOnly:e.isExamples,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{Tab:function(e){e.replaceSelection("  ")},"Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Ctrl-Q":function(e){e.foldCode(e.getCursor())}}},onChange:function(t,n,r){var i;i=r,e.updateTextValue(i)}}),e.renderDrawer&&Object(L.jsxs)(u.a,{className:t.drawer,"data-testid":"editor-drawer",variant:"persistent",anchor:"right",open:v,classes:{paper:Object(o.a)(t.drawerPaper,n&&t.drawerPaperExpandedConsole)},children:[Object(L.jsx)("div",{className:t.drawerHeader,children:Object(L.jsx)(d.a,{name:"collapse","aria-label":"collapse",className:t.drawerHeaderIcon,onClick:w,children:Object(L.jsx)(m.a,{})})}),e.renderDrawer()]})]})}},273:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(24),i=n(37),a=new(0,n(679).BitlyClient)("2740ea05eb8099e664f60559416380f4f06d9dc8");function o(e){return c.apply(this,arguments)}function c(){return(c=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){a.shorten(t).then((function(t){e({link:t.link,errorNeeded:!1})})).catch((function(t){e({link:void 0,errorNeeded:!0})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://bit.ly/".concat(t.text),e.abrupt("return",new Promise((function(e){a.expand(n).then((function(t){e(t)})).catch((function(e){console.error(e)}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},280:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var r=n(1479),i=n(1481),a=n(1482),o=n(1483),c=n(1484),s=n(203),l=n(4);function u(e){return Object(l.jsxs)(r.a,{open:e.isOpen,onClose:e.handleCloseModal,"aria-labelledby":"delete-confirmation-dialog",children:[Object(l.jsxs)(i.a,{id:"delete-confirmation-dialog-title",children:["Delete ",e.title]}),Object(l.jsx)(a.a,{children:Object(l.jsxs)(o.a,{children:["Are you sure you want to delete ",e.item,"? This action cannot be undone."]})}),Object(l.jsxs)(c.a,{children:[Object(l.jsx)(s.a,{onClick:e.handleCloseModal,color:"primary",autoFocus:!0,children:"Cancel"}),Object(l.jsx)(s.a,{onClick:e.handleDelete,color:"secondary",children:"Delete"})]})]})}},624:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(17),i=n(35),a=n(0),o=n(163),c=n.n(o),s=n(15),l=n(397),u=n(10),d=n(1485),p=n(637),f=n(1493),h=n(203),g=n(1486),b=n(1487),m=n(167),j=n(280),x=n(4),O=Object(l.a)((function(e){return{fileTreeContent:{overflowY:"scroll",height:"100%"},button:{color:e.palette.common.white,background:e.palette.success.main,"&:hover":{background:e.palette.success.dark},border:"8px solid white",fontSize:"13px",width:"100%"},list:{padding:"8px",paddingLeft:"0px",paddingBottom:"0px",fontSize:"13px"},listItemError:{paddingTop:"5px",paddingBottom:"5px",margin:0},listItem:{background:e.palette.common.lightestGrey,paddingTop:"5px",paddingBottom:"5px",marginTop:"5px",marginBottom:"5px",paddingLeft:"5px",margin:0,"&:hover":{background:e.palette.common.lightGrey},display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},listItemSelected:{background:e.palette.common.editorGrey,color:e.palette.common.white,"&:hover":{background:e.palette.common.darkestGrey}},listHeader:{padding:"5px",paddingLeft:"15px"},listIcon:{color:e.palette.success.main,verticalAlign:"middle",fontSize:"13px",paddingLeft:"3px",paddingRight:"3px"},listIconError:{color:e.palette.common.red},blankIcon:{paddingLeft:"19px"}}})),v=function(e){if("ValueSet"===e.resourceType||"CodeSystem"===e.resourceType)return e.resourceType;if("StructureDefinition"===e.resourceType)if("specialization"===e.derivation){if("resource"===e.kind)return"Resource";if("logical"===e.kind)return"Logical Model"}else if("constraint"===e.derivation){if("complex-type"===e.kind&&"Extension"===e.type)return"Extension";if(["resource","complex-type","primitive-type","logical"].includes(e.kind))return"Profile"}return null!=e.resourceType?"Instance":null},y=function(e){return[].concat(Object(i.a)(e.profiles),Object(i.a)(e.extensions),Object(i.a)(e.logicals),Object(i.a)(e.resources),Object(i.a)(e.instances),Object(i.a)(e.valueSets),Object(i.a)(e.codeSystems)).map((function(e){return{resourceType:v(e),id:e.id,def:JSON.stringify(e,null,2)}}))};function S(e){var t=O(),n=Object(a.useState)(""),o=Object(r.a)(n,2),l=o[0],S=o[1],C=Object(a.useState)([{resourceType:null,id:"Untitled",def:null}]),w=Object(r.a)(C,2),k=w[0],R=w[1],I=e.setShowNewText,z=e.updateTextValue,N=Object(a.useState)(0),T=Object(r.a)(N,2),F=T[0],H=T[1],E=Object(a.useState)([]),D=Object(r.a)(E,2),L=D[0],U=D[1],P=Object(a.useState)(!1),B=Object(r.a)(P,2),A=B[0],G=B[1];Object(a.useEffect)((function(){if(e.showNewText&&!Object(s.isEqual)(e.text,[""])){var t;I(!1);try{t=JSON.parse(e.text)}catch(r){t={profiles:[],extensions:[],logicals:[],resources:[],instances:[],valueSets:[],codeSystems:[]}}var n=y(t);R(n),H(0),S(n.length>0?n[0].def:""),z(n)}else e.isWaiting&&(S(null),R([]))}),[e.text,e.showNewText,e.isWaiting,z,I]);var M=function(){var t=Object(i.a)(k);t.push({resourceType:null,id:"Untitled",def:null}),H(t.length-1),R(t),S(null),e.updateTextValue(t)},V=function(){var t=F,n=Object(i.a)(k);if(n.splice(t,1),0===n.length&&n.push({resourceType:null,id:"Untitled",def:null}),R(n),t<=F){var r=0;t<F&&(r=F-1),H(r);var a=n.length>0?n[r].def:null;S(a)}var o=Object(i.a)(L);L.includes(t)&&o.splice(L.indexOf(t),1);var c=o.map((function(e){return e<t?e:e-1}));U(c),G(!1),e.updateTextValue(n)},W=function(){G(!1)},J=function(){var e=["Profiles","Extensions","Logical Models","Resources","ValueSets","CodeSystems","Instances","Unknown Type"],n=Object(s.groupBy)(k,(function(e){return e&&e.resourceType?"".concat(e.resourceType,"s"):"Unknown Type"}));return Object.keys(n).sort((function(t,n){return e.indexOf(t)-e.indexOf(n)})).map((function(e){return Object(x.jsxs)(d.a,{component:"nav",className:t.list,children:[Object(x.jsx)("div",{className:t.listHeader,children:e}),n[e].sort((function(e,t){var n=e.id?e.id:"Untitled",r=t.id?t.id:"Untitled";return n.toLowerCase()<r.toLowerCase()?-1:n.toLowerCase()>r.toLowerCase()?1:0})).map((function(n,r){var i=k.indexOf(n),a=L.includes(i);return Object(x.jsxs)(p.a,{button:!0,title:(null===n||void 0===n?void 0:n.id)||"Untitled","data-testid":"".concat(e,"-defId"),className:Object(u.a)(t.listItem,a&&t.listItemError,i===F&&t.listItemSelected),onClick:function(){H(i),S(n.def)},children:[L.includes(i)?Object(x.jsx)(f.a,{title:"Invalid JSON",placement:"top",arrow:!0,children:Object(x.jsx)(g.a,{className:Object(u.a)(t.listIcon,t.listIconError)})}):Object(x.jsx)("span",{className:t.blankIcon}),(null===n||void 0===n?void 0:n.id)||"Untitled"]},r)}))]},e)}))},_=k.length>0?k[F].def:null,Z="".concat(k.length>0?k[F].id:"Untitled");return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(m.a,{name:"FHIR JSON: ".concat(Z),value:_,initialText:l,updateTextValue:function(t){if(!e.isWaiting){var n=Object(i.a)(k);try{var r,a,o=""===t?{}:JSON.parse(t);if(L.includes(F)){var c=Object(i.a)(L);c.splice(L.indexOf(F),1),U(c)}if(!k[F])n[F]={resourceType:v(o),id:null!==(r=o.id)&&void 0!==r?r:"Untitled"};if(k[F]&&o.resourceType===k[F].resourceType||(n[F].resourceType=v(o)),!k[F]||o.id!==k[F].id)n[F].id=null!==(a=o.id)&&void 0!==a?a:"Untitled"}catch(u){if(!L.includes(F)){var s=Object(i.a)(L);s.push(F),U(s)}}n[F]&&(n[F].def=t),R(n),e.updateTextValue(n),null===l&&S(t)}},mode:"application/json",placeholder:e.isWaiting?"Loading...":"Paste or edit single FHIR JSON artifact here... \nCreate additional FHIR JSON artifacts to the right.",renderDrawer:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{className:t.button,startIcon:Object(x.jsx)(b.a,{}),onClick:M,children:"New JSON Editor"}),Object(x.jsx)("div",{className:t.fileTreeContent,children:J()})]})},isExamples:!1,delete:function(){G(!0)},save:function(){return function(e,t){var n,r,i;try{i=JSON.parse(e)}catch(a){}c.a.saveAs(new Blob([e]),null!==(n=i)&&void 0!==n&&n.resourceType&&null!==(r=i)&&void 0!==r&&r.id?"".concat(i.resourceType,"-").concat(i.id,".json"):"".concat(Z,".json"))}(_)}}),A&&function(){var e=k[F];if(e){var t=e.resourceType||"Unknown Type",n=e.id||"Untitled";return Object(x.jsx)(j.a,{title:"FHIR JSON",item:"".concat(t," ").concat(n),isOpen:A,handleCloseModal:W,handleDelete:V})}}()]})}},627:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(17),i=n(0),a=n(163),o=n.n(a),c=n(167),s=n(280),l=n(4);function u(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],u=n[1],d=function(){u(!a)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.a,{name:"FSH",isExamples:!1,value:e.text,initialText:e.initialText,updateTextValue:e.updateTextValue,mode:"fsh",placeholder:e.isWaiting?"Loading...":"Paste or edit FSH here...",delete:d,save:function(){o.a.saveAs(new Blob([e.text]),"FSH.fsh")},config:e.config}),a&&Object(l.jsx)(s.a,{title:"FHIR Shorthand",item:"all FSH",isOpen:a,handleCloseModal:d,handleDelete:function(){u(!1),e.setInitialText("")}})]})}},628:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(17),i=n(0),a=n(397),o=n(638),c=n(1478),s=n(203),l=n(1488),u=n(1489),d=n(4),p=Object(a.a)((function(e){return{consoleControls:{background:e.palette.common.darkestGrey,height:"34px",boxSizing:"border-box",display:"flex;",alignItems:"center",justifyContent:"left"},box:{paddingLeft:"29px",color:e.palette.common.white,background:e.palette.common.darkestGrey,height:"calc(100% - 34px)",overflow:"scroll",boxSizing:"border-box"},button:{marginRight:"10px",color:e.palette.common.white,textTransform:"none",padding:0},problemsButton:{padding:0,color:e.palette.common.white,textTransform:"none"},expandIcon:{width:"29px",color:e.palette.common.white,padding:0},pre:{margin:"0px"},circle:{"border-radius":"50%","border-style":"solid","border-width":"2px","min-width":"20px",height:"20px",paddingLeft:1,paddingRight:1,background:"#263238","align-items":"center",display:"flex",marginLeft:4,"justify-content":"center",padding:0}}}));function f(e){var t=p(),n=Object(i.useState)(!1),a=Object(r.a)(n,2),f=a[0],h=a[1],g=e.problemCount,b=e.setExpandConsole;Object(i.useEffect)((function(){g&&b(!0)}),[g,b]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(o.a,{className:t.consoleControls,children:[Object(d.jsx)(c.a,{onClick:function(){e.setExpandConsole(!e.expandConsole)},"aria-label":e.expandConsole?"collapse console":"expand console",className:t.expandIcon,children:e.expandConsole?Object(d.jsx)(l.a,{}):Object(d.jsx)(u.a,{})}),Object(d.jsx)(s.a,{onClick:function(){h(!1),e.setExpandConsole(!0)},className:t.button,children:Object(d.jsx)("p",{style:{borderBottom:e.expandConsole&&!f?"1px solid white":"none",margin:"0"},children:"Console"})}),Object(d.jsxs)(s.a,{onClick:function(){h(!0),e.setExpandConsole(!0)},className:t.problemsButton,children:[Object(d.jsx)("p",{style:{borderBottom:e.expandConsole&&f?"1px solid ".concat(e.problemCount?e.problemColor:"white"):"none",margin:"0"},children:"Problems"}),Object(d.jsx)("div",{className:t.circle,style:{borderColor:"".concat(e.problemCount?e.problemColor:"white")},children:e.problemCount})]})]}),Object(d.jsx)(o.a,{style:{display:e.expandConsole?"block":"none"},className:t.box,children:f?e.problemMessages.map((function(e,n){return Object(d.jsx)("pre",{className:t.pre,children:e},n)})):e.consoleMessages.map((function(e,n){return Object(d.jsx)("pre",{className:t.pre,children:e},n)}))})]})}},631:function(e,t,n){"use strict";n.d(t,"a",(function(){return He}));var r=n(394),i=n(24),a=n(37),o=n(17),c=n(0),s=n(10),l=n(397),u=n(1534),d=n(1535),p=n(1529),f=n(1536),h=n(1488),g=n(1532),b=n(1540),m=n(1493),j=n(638),x=n(285),O=n(203),v=n(1533),y=n(1479),S=n(1481),C=n(1482),w=n(1483),k=n(1541),R=n(1537),I=n(1538),z=n(1543),N=n(1528),T=n(1484),F=n(35),H=n(15),E=n(16),D=n(127),L=n(629),U=n(630),P=n.n(U),B=n(115),A=n.n(B),G=n(161),M=n.n(G),V=E.utils.logger;function W(e,t,n){var r={resourceArr:e,emptyDependencies:[]};return new Promise((function(e){M.a.get("https://packages.fhir.org/".concat(t,"/").concat(n),(function(i){var a=P.a.extract();a.on("entry",(function(e,t,n){var i="";t.on("data",(function(e){i+=e.toString()})),t.on("end",(function(){try{var e=JSON.parse(i);e.resourceType&&r.resourceArr.push(e)}catch(t){}n()})),t.resume()})),a.on("finish",(function(){e(r)})),i.statusCode<400?(i.pipe(A.a.createGunzip()).pipe(a),V.info("Downloaded ".concat(t,"#").concat(n))):("current"===n||"dev"===n?V.error('FSHOnline does not currently support "current" or "dev" package versions'):(V.error("Your dependency ".concat(t,"#").concat(n," could not be loaded. Your output may be invalid.")),r.emptyDependencies.push("".concat(t).concat(n))),e(r))})).on("error",(function(i){V.error("An error occurred while downloading FHIR packages. Your output may be invalid: ",i),r.emptyDependencies.push("".concat(t).concat(n)),e(r)}))}))}function J(e,t,n,r){return new Promise((function(i,a){var o=e.transaction(["".concat(n).concat(r)],"readwrite");o.oncomplete=function(){i()},o.onerror=function(e){a(e)};var c=o.objectStore("".concat(n).concat(r),{keyPath:["id","resourceType"]});t.forEach((function(e){e.id&&e.resourceType&&c.put(e)}))}))}function _(e,t,n,r){return new Promise((function(i,a){var o=!1,c=t.transaction(["".concat(n).concat(r)],"readonly").objectStore("".concat(n).concat(r),{keyPath:["id","resourceType"]}).openCursor();c.onerror=function(){a("There is an error getting data out!")},c.onsuccess=function(){var t=c.result;t?(o=!0,e.add(t.value),t.continue()):(o&&V.info("Loaded package ".concat(n,"#").concat(r)),i(e))}}))}function Z(e){return new Promise((function(t,n){var r=e.packageId,i=e.isAutomatic;M.a.get("https://packages.fhir.org/".concat(r),(function(e){var a="";e.on("data",(function(e){a+=e})),e.on("end",(function(){var e,o,c=JSON.parse(a);null!==c&&void 0!==c&&null!==(e=c["dist-tags"])&&void 0!==e&&null!==(o=e.latest)&&void 0!==o&&o.length?t(c["dist-tags"].latest):(V.error("Could not determine latest released version of ".concat(i?"automatically-loaded dependency ":"").concat(r,".")),n("no latest version found"))}))}))}))}var $=E.utils.logger,Y=E.fhirdefs.FHIRDefinitions,K=E.sushiImport.FSHTank,X=E.sushiImport.importText;function Q(e,t){$.info("Importing FSH text...");var n=X(e);return new K(n,t)}function q(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(a.a)(Object(i.a)().mark((function e(t,n){var r,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(n);case 2:return n=e.sent,e.next=5,ne(n);case 5:if(r=e.sent,a={defs:t,emptyDependencies:[]},!r.shouldUpdate){e.next=14;break}return e.next=10,re(t,r.version+1,n);case 10:a=e.sent,t=a.defs,e.next=18;break;case 14:return e.next=16,re(t,r.version,n);case 16:a=e.sent,t=a.defs;case 18:return e.next=20,te(a.emptyDependencies,r.version+2);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FSH Playground Dependencies",r=Object(H.flatten)(e);return new Promise((function(e,o){var c=null,s=indexedDB.open(n,t);s.onsuccess=function(t){(c=t.target.result).close(),e()},s.onupgradeneeded=function(){var e=Object(a.a)(Object(i.a)().mark((function e(t){var n,a,o,s,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target.result,n=c.objectStoreNames,a=Object(L.a)(n),e.prev=3,s=Object(i.a)().mark((function e(){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,e.next=3,new Promise((function(e){t.target.transaction.objectStore("".concat(n)).getAll().onsuccess=function(t){0!==t.target.result.length||r.includes(n)||r.push(n),e()}}));case 3:case"end":return e.stop()}}),e)})),a.s();case 6:if((o=a.n()).done){e.next=10;break}return e.delegateYield(s(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),a.e(e.t1);case 15:return e.prev=15,a.f(),e.finish(15);case 18:for(l=0;l<r.length;l++)n.contains(r[l])&&c.deleteObjectStore(r[l]);case 19:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),s.onerror=function(e){o(e)}}))}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FSH Playground Dependencies",n={shouldUpdate:!1,version:1};return new Promise((function(r,i){var a=null,o=indexedDB.open(t);o.onsuccess=function(t){var i=(a=t.target.result).objectStoreNames;n.version=a.version,0===i.length||0===e.length||i.contains("resources")?(n.shouldUpdate=!0,a.close(),r(n)):(e.forEach((function(e){var t=e.packageId,r=e.version;i.contains("".concat(t).concat(r))||(n.shouldUpdate=!0)})),a.close(),r(n))},o.onupgradeneeded=function(e){a=e.target.result},o.onerror=function(e){i(e)}}))}function re(e,t,n){return ie.apply(this,arguments)}function ie(){return ie=Object(a.a)(Object(i.a)().mark((function e(t,n,r){var o,c,s=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:"FSH Playground Dependencies",c=s.length>4&&void 0!==s[4]&&s[4],e.abrupt("return",new Promise((function(e,s){var l=null,u=[],d={defs:Y,emptyDependencies:[]},p=indexedDB.open(o,n);p.onsuccess=function(){var n=Object(a.a)(Object(i.a)().mark((function n(a){var o,s,p,f,h,g;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=a.target.result,o=0;case 2:if(!(o<r.length)){n.next=20;break}if(s=[],c=!1,p=r[o],f=p.packageId,h=p.version,u.includes("".concat(f).concat(h))&&(c=!0),!c){n.next=14;break}return n.next=10,W(s,f,h);case 10:return 0!==(g=n.sent).emptyDependencies.length&&d.emptyDependencies.push(g.emptyDependencies),n.next=14,J(l,g.resourceArr,f,h);case 14:return n.next=16,_(t,l,f,h);case 16:d.defs=n.sent;case 17:o++,n.next=2;break;case 20:l.close(),e(d);case 22:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p.onupgradeneeded=function(e){var t=(l=e.target.result).objectStoreNames;t.contains("resources")&&l.deleteObjectStore("resources");for(var n=0;n<r.length;n++){var i=r[n],a=i.packageId,o=i.version;t.contains("".concat(a).concat(o))||(l.createObjectStore("".concat(a).concat(o),{keyPath:["id","resourceType"]}),u.push("".concat(a).concat(o)))}},p.onerror=function(e){s(e)}})));case 3:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ae(e){return oe.apply(this,arguments)}function oe(){return oe=Object(a.a)(Object(i.a)().mark((function e(t){var n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(a.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ce(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,r=n.filter((function(e){return null!==e.version})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(a.a)(Object(i.a)().mark((function e(t){var n,r,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.packageId,r=t.version,a=r,"latest"!==r){e.next=5;break}return e.next=5,Z(t).then((function(e){a=e})).catch((function(){a=null}));case 5:return e.abrupt("return",{packageId:n,version:a});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return e.split(",").map((function(e){var t=e.trim();if(""===t)return t;var n=t.split("#"),r=Object(o.a)(n,2);return{packageId:r[0],version:r[1]}})).filter((function(e){return e}))}var ue=E.sushiImport.FSHTank,de=E.sushiImport.RawFSH,pe=E.sushiExport.exportFHIR,fe=E.utils.logger,he=E.utils.stats,ge=E.utils.getRandomPun,be=E.utils.Type,me=E.fhirdefs.FHIRDefinitions;function je(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(a.a)(Object(i.a)().mark((function e(t,n){var r,a,o,c,s,l,u,d,p,f,h,g,b,m,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he.reset(),c=[],t.forEach((function(e,t){var n="Input_".concat(t);try{e=JSON.parse(e)}catch(r){return void fe.error("Could not parse ".concat(n," to JSON"))}D.utils.isProcessableContent(e,n)&&c.push(new D.processor.WildFHIR({content:e},n))})),s=new D.processor.LakeOfFHIR(c),l=new me,u=new D.utils.MasterFisher(s,l),d=new D.processor.FHIRProcessor(s,u),p=n.dependencies.map((function(e){return e.replace("#","@")})),f=d.processConfig(null!==p&&void 0!==p?p:[]),h=le((h=null!==f&&void 0!==f&&f.config.dependencies?null===f||void 0===f?void 0:f.config.dependencies.map((function(e){return"".concat(e.packageId,"#").concat(e.version)})):[]).join(",")),g=null!==(r=null===f||void 0===f?void 0:f.config.fhirVersion[0])&&void 0!==r?r:"4.0.1",b=Ce(h,g),(a=h).push.apply(a,Object(F.a)(b)),e.next=16,q(l,h);case 16:return l=e.sent,e.next=19,D.utils.getResources(d,f,{indent:n.indent});case 19:return m=e.sent,j=new D.gofshExport.FSHExporter(m).apiExport("string"),fe.info("Done converting definitions"),Se(m),e.abrupt("return",{fsh:j,config:null!==(o=null===f||void 0===f?void 0:f.config)&&void 0!==o?o:{}});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t){return ve.apply(this,arguments)}function ve(){return ve=Object(a.a)(Object(i.a)().mark((function e(t,n){var r,a,o,c,s,l,u,d,p=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:[],he.reset(),a=new me,o=Ce(r,n.fhirVersion[0]),r.push.apply(r,Object(F.a)(o)),e.next=7,q(a,r);case 7:a=e.sent,c=ue,e.prev=9,s=[new de(t)],c=Q(s,n),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),fe.error("Something went wrong when importing the FSH definitions"),e.abrupt("return");case 18:if((null===(l=a.fishForFHIR("StructureDefinition",be.Resource))||void 0===l?void 0:l.version)===n.fhirVersion[0]){e.next=22;break}return fe.error("StructureDefinition resource not found. The FHIR package in the browser cache may be corrupt. Clear cookies and site data on this webpage to reload the FHIR package."),e.abrupt("return");case 22:return fe.info("Converting FSH to FHIR resources..."),u=pe(c,a),d=u.profiles.length+u.extensions.length+u.logicals.length+u.resources.length+u.instances.filter((function(e){return"Inline"!==e._instanceMeta.usage})).length+u.valueSets.length+u.codeSystems.length,fe.info("Exported ".concat(d," FHIR resources as JSON.")),console.log(" "),ye(u),u.profiles=u.profiles.map((function(e){return e.toJSON(!1)})),u.extensions=u.extensions.map((function(e){return e.toJSON(!1)})),u.logicals=u.logicals.map((function(e){return e.toJSON(!1)})),u.resources=u.resources.map((function(e){return e.toJSON(!1)})),u.instances=u.instances.filter((function(e){return"Inline"!==e._instanceMeta.usage})),e.abrupt("return",u);case 34:case"end":return e.stop()}}),e,null,[[9,14]])}))),ve.apply(this,arguments)}function ye(e){var t=he.numError,n=he.numWarn,r=Object(H.pad)(e.profiles.length.toString(),13),i=Object(H.pad)(e.extensions.length.toString(),12),a=Object(H.pad)(e.logicals.length.toString(),12),o=Object(H.pad)(e.resources.length.toString(),13),c=Object(H.pad)(e.valueSets.length.toString(),18),s=Object(H.pad)(e.codeSystems.length.toString(),17),l=Object(H.pad)(e.instances.length.toString(),18),u=Object(H.pad)("".concat(t," Error").concat(1!==t?"s":""),13),d=Object(H.padStart)("".concat(n," Warning").concat(1!==n?"s":""),12),p=Object(H.padEnd)(ge(t,n),36);["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 SUSHI RESULTS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502    Profiles   \u2502  Extensions  \u2502   Logicals   \u2502   Resources   \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(r," \u2502 ").concat(i," \u2502 ").concat(a," \u2502 ").concat(o," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502      ValueSets     \u2502    CodeSystems    \u2502     Instances      \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(c," \u2502 ").concat(s," \u2502 ").concat(l," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551                                                                 \u2551","\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563","\u2551"+" ".concat(p," ").concat(u," ").concat(d," ")+"\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"].forEach((function(e){return console.log(e)}))}function Se(e){var t=Object(H.pad)(e.profiles.length.toString(),18),n=Object(H.pad)(e.extensions.length.toString(),17),r=Object(H.pad)(e.logicals.length.toString(),18),i=Object(H.pad)(e.resources.length.toString(),18),a=Object(H.pad)(e.valueSets.length.toString(),17),o=Object(H.pad)(e.codeSystems.length.toString(),18),c=Object(H.pad)(e.instances.length.toString(),18),s=Object(H.pad)(e.invariants.length.toString(),17),l=Object(H.pad)(e.mappings.length.toString(),18),u=Object(H.pad)("".concat(he.numError," Error").concat(1!==he.numError?"s":""),12),d=Object(H.padStart)("".concat(he.numWarn," Warning").concat(1!==he.numWarn?"s":""),12),p=Object(H.padEnd)(ge(he.numError,he.numWarn),37),f=["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 GoFSH RESULTS \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502      Profiles      \u2502    Extensions     \u2502      Logicals      \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(t," \u2502 ").concat(n," \u2502 ").concat(r," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502     Resources      \u2502     ValueSets     \u2502     CodeSystems    \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(i," \u2502 ").concat(a," \u2502 ").concat(o," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551 \u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e \u2551","\u2551 \u2502     Instances      \u2502    Invariants     \u2502      Mappings      \u2502 \u2551","\u2551 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2551","\u2551"+" \u2502 ".concat(c," \u2502 ").concat(s," \u2502 ").concat(l," \u2502 ")+"\u2551","\u2551 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f \u2551","\u2551                                                                 \u2551","\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563","\u2551"+" ".concat(p," ").concat(u," ").concat(d," ")+"\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"];console.log(" "),f.forEach((function(e){return console.log(e)}))}function Ce(e,t){var n=[],r={packageId:ke(t),version:t};we(e,r)||n.push(r);var i={packageId:"hl7.terminology.r4",version:"latest",isAutomatic:!0};if(we(e,i,!0)||n.push(i),r.version.match(/^5\.0\.\d+$/)){var a={packageId:"hl7.fhir.uv.extensions",version:"latest",isAutomatic:!0};we(e,a,!0)||n.push(a)}return n}function we(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.some((function(e){return e.packageId===t.packageId&&(n||e.version===t.version)}))}function ke(e){return/^4\.0\.1$/.test(e)?"hl7.fhir.r4.core":/^4\.3\.\d+$/.test(e)?"hl7.fhir.r4b.core":/^5\.0\.\d+$/.test(e)?"hl7.fhir.r5.core":"hl7.fhir.r4.core"}var Re=n(1545),Ie=n(1539),ze=n(167),Ne=n(4),Te=Object(l.a)((function(e){return{box:{padding:e.spacing(1),color:e.palette.text.primary,background:e.palette.background.paper,display:"flex;",alignItems:"center",justifyContent:"center"},rightControls:{position:"absolute",right:"24px"},leftControls:{position:"absolute",left:"28px"},secondaryButton:{color:e.palette.success.main,"&:hover":{background:e.palette.common.lighterBlue}},progressContainer:{width:"24px",height:"24px"},progress:{height:"1em !important",width:"1em !important",verticalAlign:"middle",color:e.palette.common.white},button:{color:e.palette.common.white,background:e.palette.success.main,borderRadius:"0",paddingRight:"15px",paddingLeft:"15px","&:hover":{background:e.palette.success.dark}},buttonLeft:{float:"right",left:"-3.33px"},buttonRight:{float:"left",right:"-0.67px"},runIcon:{padding:"0px"},dialogPaper:{maxHeight:"80vh",minHeight:"80vh"}}}));function Fe(e,t){if("config"!==e)return t}function He(e){var t=Te(),n=Object(c.useState)(!1),l=Object(o.a)(n,2),F=l[0],H=l[1],E=Object(c.useState)(!1),D=Object(o.a)(E,2),L=D[0],U=D[1],P=Object(c.useState)(""),B=Object(o.a)(P,2),A=B[0],G=B[1],M=Object(c.useState)(""),V=Object(o.a)(M,2),W=V[0],J=V[1],_=Object(c.useState)(""),Z=Object(o.a)(_,2),$=Z[0],Y=Z[1],K=Object(c.useState)(""),X=Object(o.a)(K,2),Q=X[0],q=X[1],ee=Object(c.useState)(!1),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ie=Object(c.useState)(!1),ae=Object(o.a)(ie,2),oe=ae[0],ce=ae[1],se=Object(c.useState)(!1),ue=Object(o.a)(se,2),de=ue[0],pe=ue[1],fe=Object(c.useState)(!1),he=Object(o.a)(fe,2),ge=he[0],be=he[1],me=Object(c.useState)(""),xe=Object(o.a)(me,2),ve=xe[0],ye=xe[1],Se=Object(c.useState)(""),Ce=Object(o.a)(Se,2),we=Ce[0],ke=Ce[1];Object(c.useEffect)((function(){var t,n,r,i,a;G((null===(t=e.config)||void 0===t?void 0:t.canonical)||""),J((null===(n=e.config)||void 0===n?void 0:n.version)||""),Y((null===(r=e.config)||void 0===r||null===(i=r.fhirVersion)||void 0===i?void 0:i.length)>0?e.config.fhirVersion.at(0):""),q((null===(a=e.config)||void 0===a?void 0:a.dependencies)||"")}),[e.config]);var He=function(){H(!1),ye("")},Ee=function(){U(!1),e.onConfigChange({canonical:A,version:W,fhirVersion:[$],dependencies:Q,isGoFSHIndented:ne})};function De(){return(De=Object(a.a)(Object(i.a)().mark((function t(){var n,r,a,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isWaiting){t.next=2;break}return t.abrupt("return");case 2:return e.resetLogMessages(),e.onSUSHIClick(!0,[""],!0),ce(!0),n=le(Q),r={canonical:A||"http://example.org",version:W||"1.0.0",FSHOnly:!0,fhirVersion:$?[$]:["4.0.1"]},t.next=9,Oe(e.fshText,r,n);case 9:a=t.sent,o=JSON.stringify(a,Fe,2),a&&a.codeSystems&&(a.codeSystems.length||a.extensions.length||a.instances.length||a.profiles.length||a.logicals.length||a.resources.length||a.valueSets.length)||(o=[""]),e.onSUSHIClick(!0,o,!1),ce(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Le(){return(Le=Object(a.a)(Object(i.a)().mark((function t(){var n,a,o,c,s,l,u;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isWaiting){t.next=2;break}return t.abrupt("return");case 2:return e.resetLogMessages(),e.onGoFSHClick("",!0),pe(!0),n=e.gofshText.map((function(e){return e.def})).filter((function(e){return e})),a=""===Q?[]:Q.split(","),(A||W||""!==$)&&(o=Object(r.a)(Object(r.a)({resourceType:"ImplementationGuide",fhirVersion:$?[$]:["4.0.1"],id:"1"},A&&{url:"".concat(A,"/ImplementationGuide/1")}),W&&{version:W}),n.push(JSON.stringify(o,null,2))),c={dependencies:a,indent:ne},t.next=11,je(n,c);case 11:s=t.sent,l=s.fsh,u=s.config,e.onGoFSHClick(l,!1),pe(!1),""===A&&u.canonical&&G(u.canonical),""===W&&u.version&&J(u.version),""===$&&u.fhirVersion&&Y(u.fhirVersion.at(0));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ue(){return(Ue=Object(a.a)(Object(i.a)().mark((function t(n,r){var a,o,c,s,l,u;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.endsWith(".fsh")){t.next=2;break}return t.abrupt("return");case 2:return a=e.exampleMetadata[r],be(!0),ke(a.name),o=new TextDecoder("utf-8"),t.next=8,fetch(a.path).then((function(e){return e.body.getReader()}));case 8:return c=t.sent,s="",t.next=12,c.read();case 12:l=t.sent,u=l.value,s+=o.decode(u),be(!1),ye(s);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Pe=function n(r){return Object(Ne.jsx)(Re.a,{nodeId:r.id,label:r.name,children:r.children?r.children.map((function(r){return r.children?n(r):function(n){return Object(Ne.jsx)(m.a,{title:e.exampleMetadata[n.id]&&e.exampleMetadata[n.id].description?e.exampleMetadata[n.id].description:n.name,placement:"bottom",arrow:!0,children:Object(Ne.jsx)(Re.a,{nodeId:n.id,label:n.name,className:t.treeItem},n.id)},n.id)}(r)})):null},r.id)};return Object(Ne.jsxs)(j.a,{className:t.box,children:[Object(Ne.jsxs)(x.a,{container:!0,children:[Object(Ne.jsx)(x.a,{item:!0,xs:5,children:Object(Ne.jsxs)(O.a,{className:Object(s.a)(t.button,t.buttonLeft),onClick:function(){return De.apply(this,arguments)},testid:"Button",children:["Convert to JSON",oe?Object(Ne.jsx)("div",{className:t.progressContainer,children:Object(Ne.jsx)(v.a,{className:t.progress})}):Object(Ne.jsx)(u.a,{className:t.runIcon})]})}),Object(Ne.jsx)(x.a,{item:!0,xs:7,children:Object(Ne.jsxs)(O.a,{className:Object(s.a)(t.button,t.buttonRight),onClick:function(){return Le.apply(this,arguments)},testid:"GoFSH-button",children:[de?Object(Ne.jsx)("div",{className:t.progressContainer,children:Object(Ne.jsx)(v.a,{className:t.progress})}):Object(Ne.jsx)(u.a,{className:t.runIcon,style:{transform:"scaleX(-1)"}}),"Convert to FSH"]})})]}),Object(Ne.jsx)("div",{className:t.leftControls,children:Object(Ne.jsxs)(O.a,{name:"Examples",className:t.button,onClick:function(){H(!0)},children:[Object(Ne.jsx)(d.a,{})," \xa0 FSH Examples"]})}),Object(Ne.jsxs)("div",{className:t.rightControls,children:[Object(Ne.jsxs)(O.a,{name:"SaveAll",className:t.secondaryButton,onClick:e.saveAll,children:[Object(Ne.jsx)(p.a,{})," Save All"]}),Object(Ne.jsxs)(O.a,{name:"Configuration",className:t.secondaryButton,onClick:function(){U(!0)},children:[Object(Ne.jsx)(f.a,{})," Configuration"]})]}),Object(Ne.jsxs)(y.a,{open:L,onClose:Ee,"aria-labelledby":"form-dialog-title",children:[Object(Ne.jsx)(S.a,{id:"form-dialog-title",children:"Configuration Settings"}),Object(Ne.jsxs)(C.a,{children:[Object(Ne.jsx)(w.a,{children:"Change the Implementation Guide configuration to use when processing FSH and FHIR JSON"}),Object(Ne.jsx)(k.a,{id:"canonical",margin:"dense",fullWidth:!0,label:"Canonical URL",helperText:"Default: http://example.org",defaultValue:A,onChange:function(e){var t=e.target.value;G(t)}}),Object(Ne.jsx)(k.a,{id:"version",margin:"dense",fullWidth:!0,label:"Version",helperText:"Default: 1.0.0",defaultValue:W,onChange:function(e){var t=e.target.value;J(t)}}),Object(Ne.jsxs)(k.a,{id:"fhir-version-select",margin:"dense",fullWidth:!0,select:!0,label:"FHIR Version",helperText:"Default: 4.0.1 (R4)",value:$,onChange:function(e){var t=e.target.value;Y(t)},children:[Object(Ne.jsx)(R.a,{value:"4.0.1",children:"4.0.1 (R4)"}),Object(Ne.jsx)(R.a,{value:"4.3.0",children:"4.3.0 (R4B)"}),Object(Ne.jsx)(R.a,{value:"5.0.0",children:"5.0.0 (R5)"})]}),Object(Ne.jsx)(k.a,{id:"dependencies",margin:"dense",fullWidth:!0,label:"Dependencies",helperText:"Format: packageId#version, packageId#version (e.g., hl7.fhir.us.core#6.0.0)",defaultValue:Q,onChange:function(e){var t=e.target.value;q(t)}}),Object(Ne.jsx)(I.a,{id:"goFSHIndent",margin:"dense",control:Object(Ne.jsx)(z.a,{checked:ne,color:"primary"}),label:"Indent output of Convert to FSH",onChange:function(e){var t=e.target.checked;re(t)}}),Object(Ne.jsx)(N.a,{children:"If set, Convert to FSH will output FSH using path rules"})]}),Object(Ne.jsx)(T.a,{children:Object(Ne.jsx)(O.a,{onClick:Ee,color:"primary",children:"Done"})})]}),Object(Ne.jsxs)(y.a,{open:F,onClose:He,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0,scroll:"paper",classes:{paper:t.dialogPaper},children:[Object(Ne.jsx)(S.a,{id:"form-dialog-title",children:"FSH Examples"}),Object(Ne.jsx)(C.a,{children:Object(Ne.jsxs)(x.a,{container:!0,style:{overflow:"scroll",minHeight:"64vh"},children:[Object(Ne.jsx)(x.a,{item:!0,xs:4,children:Object(Ne.jsx)(Ie.a,{className:t.treeView,defaultCollapseIcon:Object(Ne.jsx)(h.a,{}),defaultExpandIcon:Object(Ne.jsx)(g.a,{}),onNodeSelect:function(e,t){return Ue.apply(this,arguments)},children:e.exampleConfig.map((function(e){return Pe(e)}))})}),Object(Ne.jsx)(x.a,{item:!0,xs:8,children:Object(Ne.jsx)(ze.a,{name:ve?we:"",isExamples:!0,value:ve,initialText:ve,updateTextValue:function(e){ye(e)},mode:"fsh",placeholder:ge?"Fetching example...":"Select an example"})})]})}),Object(Ne.jsxs)(T.a,{children:[Object(Ne.jsxs)(O.a,{onClick:function(){navigator.clipboard.writeText(ve)},color:"primary",children:[Object(Ne.jsx)(b.a,{})," Copy to clipboard"]}),Object(Ne.jsx)(O.a,{onClick:He,color:"secondary",children:"Close"})]})]})]})}},632:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(0);var r=n(397),i=n(1519),a=n(1521),o=n(638),c=n(284),s=n(203),l=n(1542),u=n(1522),d=n.p+"static/media/FSH-online-logo.1322e272.png",p=n(4),f=Object(r.a)((function(e){return{root:{background:e.palette.common.blue,position:"static",boxShadow:"0"},title:{fontSize:20,fontWeight:700},logo:{height:"55px",width:"63px"},toolbarBox:{alignItems:"center"},exitIcon:{paddingLeft:"3px",transform:"scaleX(-1)"},docButton:{color:e.palette.common.white,backgroundColor:e.palette.common.blue,fontSize:"0.875rem",fontWeight:700,"&:hover":{background:e.palette.common.lightBlue}},versionText:{color:e.palette.common.white,fontSize:"0.8rem",fontStyle:"italic",marginTop:"-5px"}}}));function h(){var e=f();return Object(p.jsx)(i.a,{className:e.root,children:Object(p.jsx)(a.a,{children:Object(p.jsxs)(o.a,{className:e.toolbarBox,display:"flex",flexGrow:1,flexDirection:"row",children:[Object(p.jsxs)(o.a,{order:1,display:"flex",flexGrow:1,flexDirection:"row",children:[Object(p.jsx)(o.a,{order:1,alignSelf:"center",display:"flex",children:Object(p.jsx)("img",{src:d,alt:"logo",className:e.logo})}),Object(p.jsx)(o.a,{order:2,alignSelf:"center",m:1,children:Object(p.jsxs)(l.b,{injectFirst:!0,children:[Object(p.jsx)(c.a,{order:1,className:e.title,children:"FSH ONLINE"}),Object(p.jsx)(c.a,{order:2,className:e.versionText,children:"Powered by SUSHI v2.10.1 and GoFSH v1.6.5"})]})})]}),Object(p.jsx)(o.a,{order:1,children:Object(p.jsx)(l.b,{injectFirst:!0,children:Object(p.jsxs)(s.a,{className:e.docButton,href:"https://fshschool.org/",target:"_blank",children:[Object(p.jsx)(u.a,{className:e.exitIcon,fontSize:"small"}),"Back to School"]})})})]})})})}},654:function(e,t,n){},659:function(e,t){},661:function(e,t){},713:function(e,t,n){},764:function(e,t){},766:function(e,t){},780:function(e,t){},782:function(e,t){}},[[1474,1,2]]]);
//# sourceMappingURL=main.ee3999fb.chunk.js.map